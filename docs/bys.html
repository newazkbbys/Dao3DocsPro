<!DOCTYPE html>
<html>
<head>
<title>bys.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/*

Arduino® Light Theme - Stefania Mellai <s.mellai@arduino.cc>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #FFFFFF;
}

.hljs,
.hljs-subst {
  color: #434f54;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-doctag,
.hljs-name {
  color: #00979D;
}

.hljs-built_in,
.hljs-literal,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #D35400;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #00979D;
}

.hljs-type,
.hljs-string,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #005C5F;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-comment {
  color: rgba(149,165,166,.8);
}

.hljs-meta-keyword {
  color: #728E00;
}

.hljs-meta {
  color: #434f54;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-function {
  color: #728E00;
}

.hljs-number {
  color: #8A7B52;  
}

</style>

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family:   "HelveticaNeue-Light", sans-serif, "宋体","Segoe WPC", "Segoe UI", "SFUIText-Light","Droid Sans Fallback";
	font-size: 18px;
	padding: 0 12px;
	line-height: 1.6;
	word-wrap: break-word;
	color: #333333;
}

.content-wrapper{
	max-width: 860px;
    margin: 0 auto;
    padding: 0 30px;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom: 1px solid #eee;
}


h2{
	padding-bottom: .3em;
    font-size: 2em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

h3{
	font-size: 1.75em;
    line-height: 1.225;
}

h1, h2, h3 {
	font-weight: bold;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

.table-of-contents li{
	list-style-type: initial;
}
</style>

<style>
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.16.2"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

</style>

</head>
<body>
    <div class="content-wrapper">
        <h1 id="js%E6%A6%82%E8%BF%B0" tabindex="-1">JS概述</h1>
<p>脚本可以为游戏添加自定义的动态行为，为你的用户提供更吸引人的交互体验。 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ogs36u8gn7oz00zt">javascript</a>是神奇代码岛支持脚本语言，你可以用它来构建你得游戏功能。</p>
<p>神奇代码岛（Box3）是一个基于网页的多人联机3D创作平台，支持JavaScript编程。
在神奇代码岛，模型、建筑构成了丰富多彩了视觉世界，而JavaScript代码则为这个世界注入了交互玩法的灵魂；无论是对战还是冒险，模拟经营还是角色扮演，都离不开JavaScript的神奇魔力。
现在，就跟着我一起了解JavaScript的神奇魔法吧～</p>
<h2 id="%E4%BB%80%E4%B9%88%E6%98%AFjavascript" tabindex="-1">什么是JavaScript</h2>
<p>JavaScript（简称“JS”）是当前最流行、应用最广泛的客户端脚本语言，在 Web 开发领域有着举足轻重的地位，是成为一名优秀前端工程师的必备技能之一。
JS 是一种具有函数优先的轻量级，解释型或即时编译型的编程语言。既能用在浏览器中控制页面交互，也能用在服务器端作为网站后台（借助 Node.js），还能在各种操作系统下运行，因此 JavaScript 也是一种全栈式的编程语言。</p>
<h2 id="js-%E5%8F%AF%E4%BB%A5%E5%81%9A%E4%BB%80%E4%B9%88" tabindex="-1">JS 可以做什么</h2>
<p>JavaScript 的应用场合极其广泛，简单到幻灯片、照片库、浮动布局和响应按钮点击，复杂到游戏、2D/3D 动画、大型数据库驱动程序等等。
JavaScript 可以用于 Web 开发的各个领域，例如：
Web 应用开发：日常生活中我们所浏览的网页都是由 HTML、CSS、JavaScript 构成的，通过 JavaScript 可以实时更新网页中元素的样式，并可以实现人与网页之间的交互（例如监听用户是否点击了鼠标或按下了某个按键等），还可以在网页中添加一些炫酷的动画；
移动应用开发：除了可以进行 Web 应用开发外，JavaScript 还可以用来开发手机或平板电脑上的应用程序，而且我们还可以借助一些优秀的框架（例如 React Native），让开发更加轻松；
Web 游戏：在网页中的小游戏，都可以使用 JavaScript 来实现；
后端 Web 应用开发：以前我们都是使用 JavaScript 来进行 Web 应用程序前端部分的开发，但随着 Node.JS（一个 JavaScript 运行环境）的出现，使得 JavaScript 也可以用来开发 Web 应用程序的后端部分。</p>
<h2 id="%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0" tabindex="-1">如何学习</h2>
<p>学习JavaScript，需先掌握<a href="https://docs.box3.codemao.cn/js-tutorial.html">Javascript基础</a>，你可以依次掌握：
●变量、字符串、数字、数组等关键功能
●基础的运算符与逻辑
●条件语句、循环、函数等代码块
●对象与属性的学习和了解
●神奇代码岛相关的API的使用
●上手操作一些实例教程
学习过程，可以打开<a href="https://box3.codemao.cn/me/content?type=map">地图编辑器(opens new window)</a>边操作变学习哦～当然，学习的方式方法不唯一
除了可以在神奇代码岛的API文档里阅读相关的资料，也可以在下面的外部学习资料里学习相关的内容</p>
<h2 id="%E5%A4%96%E9%83%A8%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99" tabindex="-1">外部学习资料</h2>
<p>●<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference">MDN Web Docs(opens new window)</a>
●<a href="https://www.runoob.com/js/js-tutorial.html">RUNOOB.COM(opens new window)</a>
●<a href="http://c.biancheng.net/js/">语言中文网(opens new window)</a>
●还有，B站等视频网站也可以搜索相关的视频教学哦～</p>
<h1 id="%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1" tabindex="-1">全局对象</h1>
<p>在脚本中可全局访问的对象。
类、接口类型以及枚举值不在此列出，请查看对应目录下的内容。</p>
<p>全局变量</p>
<p>storage
• Conststorage: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/game_storage">GameStorage</a>
代表存储服务的全局对象。</p>
<p>voxels
• Constvoxels: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gkz7g1wazf5izpfy">GameVoxels</a>
控制所有方块。</p>
<p>world
• Constworld: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s">GameWorld</a>
代表游戏世界的全局对象。</p>
<h2 id="%F0%9F%8C%8D%E4%B8%96%E7%95%8C" tabindex="-1">🌍世界</h2>
<p>概述
<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s">GameWorld 世界</a></p>
<p>是整个游戏世界的主要接口，可以通过全局对象world 来使用它。
它对应涵盖了控制环境天气、物理重力、画面滤镜等全局场景属性，还可以在世界中创建、搜索实体，或监听世界中实体和玩家的碰撞、伤害、互动等事件。
在世界之下，还可以创造<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone 区域</a></p>
<p>对地图世界进行指定范围的定制。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s">GameWorld 世界</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone 区域</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString 选择器参数</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gz8i9v7feiuz8cm6">GameWorldKeyframe 世界动画关键帧</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yiaupxo6r5es9wcw">GameZoneConfig 区域配置</a></p>
<p>事件
几乎所有事件都能在world上进行监听。
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2">GameChatEvent 聊天事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent 实体伤害事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent 实体死亡事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent 实体碰撞事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d">GameEntityEvent 实体创建销毁事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent 液体碰撞事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent 玩家输入事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/go3it5p7im5tonnk">GameInteractEvent 实体互动事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oue67nqv8mfga7av">GamePurchaseSuccessEvent 购买成功事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent 实体复活事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl">GameTickEvent 时钟事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent 区域触发事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent 方块碰撞事件</a></p>
<h2 id="%F0%9F%A7%B1%E6%96%B9%E5%9D%97" tabindex="-1">🧱方块</h2>
<p>概述
<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gkz7g1wazf5izpfy">GameVoxels 方块</a></p>
<p>是控制所有方块的接口，可通过全局对象voxels使用。
它负责控制地形变化，利用循环语法批量生成/销毁方块，获取某个方块的类型、名称、旋转角度等。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/pdmg33m4vgx4t6bu">GameFluidContact 液体碰撞数据</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/le6z78ge7yokyxal">GameVoxelContact 方块碰撞数据</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gkz7g1wazf5izpfy">GameVoxels 方块</a></p>
<p>事件
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent 液体碰撞事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent 方块碰撞事件</a></p>
<h2 id="%F0%9F%8F%A0%E5%AE%9E%E4%BD%93" tabindex="-1">🏠实体</h2>
<p>概述
实体是地图内的游戏对象，用于对物体、玩家等的控制。
实体对象类为<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>，可以通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#XvlaO">world.createEntity</a>进行创建，或通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#LzPJ7">world.querySelector</a>等方法获取地图内已存在的实体对象。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity 实体</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tdvolpzhshdwfxri">GameEntityContact 实体碰撞参数</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult 射线检测结果</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vim7evgezkmnvhxk">GameEntityConfig 实体配置参数</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/re5g6gz99r48fzi9">GameEntityKeyframe 实体动画关键帧</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dvgk7szaqicsyb4q">GameHurtOptions 实体伤害参数</a></p>
<p>事件
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4">GameClickEvent 点击事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent 实体伤害事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent 实体死亡事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d">GameEntityEvent 实体创建销毁事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent 实体碰撞事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent 液体碰撞事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/go3it5p7im5tonnk">GameInteractEvent 实体互动事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent 方块碰撞事件</a></p>
<h2 id="%F0%9F%91%A4%E7%8E%A9%E5%AE%B6" tabindex="-1">👤玩家</h2>
<p>玩家指的是进入地图游玩的用户，由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer 玩家</a></p>
<p>控制，此接口可用定义游戏中的玩家属性、操作等等。玩家属于一种特殊的<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cxlovd92efvpx3ny">实体</a>，可以在 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></p>
<p>的player属性上读取到玩家对象。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer 玩家</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable 穿戴配件</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/extmobyyfsaec26x">GameDialogCall 显示对话框</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/hgcguag2m8l09v1g">GamePlayerKeyframe 玩家动画关键帧</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/agf4z03gzqipg9mv">GameSkinInvisible 隐藏身体部位参数</a></p>
<p>枚举
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fqfcrsh8mid6ook3">GameBodyPart 身体部位</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType 对话框类型</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zeoheeamz6dfaf60">GamePlayerMoveState 玩家运动状态</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nfty4bko9nn3kyiv">GamePlayerWalkState 玩家行走状态</a></p>
<p>●<a href="https://box3.yuque.com/staff-khn556/wupvz3/bxykxeicwinbyle1">SocialType 玩家社交关系</a></p>
<p>事件
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent 玩家输入事件</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent 实体复活事件</a></p>
<h2 id="%F0%9F%8E%AF%E4%BA%8B%E4%BB%B6" tabindex="-1">🎯事件</h2>
<p>概述
控制、处理事件流程的公共模块。有关具体事件的信息，请查阅对应功能模块。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/su72pndir0p5c7hh">GameEventHandlerToken 事件管理凭据</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel 事件频道监听</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture 事件单次监听</a></p>
<h2 id="%F0%9F%95%BA%E5%8A%A8%E4%BD%9C" tabindex="-1">🕺动作</h2>
<p>动作模块负责控制由 Voxa 导入的模型所带有的动作。包括加载特定动作，暂停动作，重播动作和设置默认动作等，主要通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dikrnsd8s0c3zuoc">GameMotionController 动作控制器</a></p>
<p>进行控制。
动作作为实体的一部分，可以通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#ZNwcj">entity.motion</a>获取该实体的动作控制器。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dikrnsd8s0c3zuoc">GameMotionController 动作控制器</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/czupdql58ligote4">GameMotionHandler 动作处理器</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mglxkfvi4hga2g97">MotionClipConfig 动作序列配置</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/grhrvh4gh1s1t7ni">MotionConfig 动作配置</a></p>
<p>事件
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eplk4m6wyt4gymk6">GameMotionEvent 动作事件</a></p>
<h2 id="%F0%9F%92%83%E5%8A%A8%E7%94%BB" tabindex="-1">💃动画</h2>
<p>概述
通过动画模块，可以对<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s">GameWorld</a>、<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity-bean</a>、<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a></p>
<p>对象添加关键帧动画。动画将在本地播放运行，获得更好的性能，播放更流畅、平滑。
通过对应对象上的animate方法可以创建动画对象 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ritpgy64d053qg64">GameAnimation-bean</a>，从而控制动画的播放。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ritpgy64d053qg64">GameAnimation 动画</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk">GameAnimationPlaybackConfig 动画播放配置参数</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/re5g6gz99r48fzi9">GameEntityKeyframe 实体动画关键帧</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/hgcguag2m8l09v1g">GamePlayerKeyframe 玩家动画关键帧</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gz8i9v7feiuz8cm6">GameWorldKeyframe 世界动画关键帧</a></p>
<p>枚举
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cgylgydyg35npvup">GameAnimationDirection - 动画播放方向</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wmi50cpmg29sg5up">GameAnimationPlaybackState 动画播放状态</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing 缓动效果</a></p>
<p>事件
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent 动画事件</a></p>
<h2 id="%F0%9F%93%88%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8" tabindex="-1">📈数据存储</h2>
<p>概述
数据存储模块，管理游戏中的数据。</p>
<p>类
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage 数据存储空间</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/game_storage">GameStorage 数据存储模块</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181">QueryList 数据查询列表</a></p>
<p>类型
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tgkiwinql39mrrc7">JSONValue 类JSON格式</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ugyg698kg8940k4d">ListPageOption 列表翻页配置</a></p>
<p>●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue 数据查询返回</a></p>
<h1 id="classes-%E7%B1%BB" tabindex="-1">Classes-类</h1>
<h2 id="gameanimation-%E5%8A%A8%E7%94%BB" tabindex="-1">GameAnimation 动画</h2>
<p>类 - GameAnimation
Animation 动画，可对World世界、Entity实体及Player玩家等对象添加动画。动画将在本地播放运行，获得更好的性能，播放更流畅、平滑。</p>
<p>currentTime
•currentTime:number= 0
动画的当前播放时间（多少动画帧）</p>
<p>playState
•playState:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wmi50cpmg29sg5up">GameAnimationPlaybackState</a>= GameAnimationPlaybackState.PENDING
当前动画播放状态</p>
<p>playbackRate
•playbackRate:number= 1
每tick动画播放速度</p>
<p>startTime
•startTime:number= 0
动画开始的时间tick</p>
<p>target
•target:TargetType
动画作用的对象（可为world、player或entity）</p>
<p>控制动画播放</p>
<p>play
•play:function
播放或者恢复动画的播放</p>
<p>函数声明:
▸ (playback?: Partial‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk">GameAnimationPlaybackConfig</a>›):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>playback?</td>
<td>Partial‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk">GameAnimationPlaybackConfig</a>›</td>
</tr>
</tbody>
</table>
<p>cancel
•cancel: *function
取消当前播放的动画</p>
<p>和动画有关的事件</p>
<p>onFinish
•onFinish:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a>‹KeyframeType, TargetType››
•nextFinish:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a>‹KeyframeType, TargetType››
当动画结束播放时触发</p>
<p>onReady
•onReady:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a>‹KeyframeType, TargetType››
• nextReady: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a>‹KeyframeType, TargetType››
当动画开始播放时触发</p>
<p>方法</p>
<p>keyframes
•keyframes:function
返回所有的动画关键帧</p>
<p>函数声明：
▸ ():Partial‹KeyframeType›[]</p>
<p>then
▸then‹T›(resolve: function,reject?: undefined | function):any
类型参数
▪T
参数:
▪resolve:function
▸ (event:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a>‹KeyframeType, TargetType›):T
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oeb04fye24vyeicg">GameAnimationEvent</a> ‹KeyframeType, TargetType›</td>
<td></td>
</tr>
</tbody>
</table>
<p>▪可选reject:undefined | function
返回值:any</p>
<h2 id="gamebounds3-3%E7%BB%B4%E7%A9%BA%E9%97%B4" tabindex="-1">GameBounds3 3维空间</h2>
<p>类 - GameBounds3
GameBounds用于指定世界中一个立方体空间区域。</p>
<p>构造函数
+new GameBounds3(lo:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>,hi:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>
新建一个区域
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>lo</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>区域的低处顶点</td>
<td></td>
</tr>
<tr>
<td>hi</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>区域的高处顶点</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></p>
<p>属性</p>
<p>hi
区域的高处顶点
•hi:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></p>
<p>lo
区域的低处顶点
•lo:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></p>
<p>方法</p>
<p>copy
▸copy(b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></p>
<p>set
▸set(lox: number,loy: number,loz: number,hix: number,hiy: number,hiz: number):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>lox</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>loy</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>loz</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>hix</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>hiy</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>hiz</td>
<td>number</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:void</p>
<p>intersect
▸intersect(b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td>计算与此包围盒相交的部分</td>
<td></td>
</tr>
</tbody>
</table>
<p>intersects
▸intersects(b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td>检测是否与此包围盒相交</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>contains
▸contains(b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>检测是否包围了这个3d点</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>containsBounds
▸containsBounds(b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td>检测是否完全包围了此盒</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>toString
▸toString():string
返回值:string</p>
<p>StaticfromPoints
▸fromPoints(...points: [<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>](%5BGameVector3%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc))):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>...points</td>
<td>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>](%5BGameVector3%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc))</td>
<td>任意数量的3d坐标点, 用来形成包围盒</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></p>
<h2 id="gamechatevent-%E8%81%8A%E5%A4%A9%E4%BA%8B%E4%BB%B6" tabindex="-1">GameChatEvent 聊天事件</h2>
<p>类 - GameChatEvent
由聊天触发的事件 通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#PRROA">GameWorld.onChat</a>和<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#lDN5j">GamePlayer.onChat</a>触发</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
发起聊天的实体</p>
<p>message
•message:string
聊天事件中说话的内容</p>
<p>tick
•tick:number
聊天事件发生时间</p>
<h2 id="gameclickevent-%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6" tabindex="-1">GameClickEvent 点击事件</h2>
<p>类 - GameClickEvent
当玩家用鼠标点击实体时触发的事件</p>
<p>button
•button:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">ACTION0</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">ACTION1</a>
被点击的按钮，ACTION0 = 左键，ACTION1 = 右键</p>
<p>clicker
•clicker:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>&amp; object
发起点击事件的玩家</p>
<p>clickerPosition
•clickerPosition:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
点击鼠标的瞬间玩家所在位置</p>
<p>distance
•distance:number
玩家到被点击实体的距离</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
被点击的实体</p>
<p>raycast
•raycast:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult</a>
玩家 -&gt; 被点击实体的射线检测结果</p>
<p>tick
•tick:number
鼠标点击事件发生的时间</p>
<h2 id="gamedamageevent-%E5%AE%9E%E4%BD%93%E4%BC%A4%E5%AE%B3%E4%BA%8B%E4%BB%B6" tabindex="-1">GameDamageEvent 实体伤害事件</h2>
<p>类 - GameDamageEvent
当实体收到伤害时触发的事件，由<a href="https://docs.box3.codemao.cn/box3world.html">GameWorld</a>.<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#MSnaO">onTakeDamage</a>和<a href="https://docs.box3.codemao.cn/box3entity.html">GameEntity</a>.<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#TLS2e">onTakeDamage</a>触发</p>
<p>tick
•tick:number
事件发生的时间</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
受到伤害的实体</p>
<p>damage
•damage:number
伤害值的大小</p>
<p>attacker
•attacker:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>|null
攻击者</p>
<p>damageType
•damageType:string
伤害的类型</p>
<h2 id="gamedatastorage-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4" tabindex="-1">GameDataStorage 数据存储空间</h2>
<p>Class: GameDataStorage
代表数据存储空间的类，能通过 {GameStorage.getDataStorage} 或 {GameStorage.getGroupStorage} 创建。能够以键值对的形式存储数据，提供方法处理空间内键值对相关的操作。</p>
<p>存储空间隔离
当游戏服务器尝试连接指定名称的空间时：</p>
<ul>
<li>不同地图的服务器，连接到的空间不同</li>
<li>同一地图不同服务器，连接到的空间相同</li>
<li>编辑模式与游戏服务器连接的空间不同</li>
</ul>
<p>属性与方法</p>
<p>key
• key: string
空间名称 （只读）</p>
<p>示例代码</p>
<p>set
• set : function
传入指定键与值，无论该键是否存在，均将值设置到此键上。</p>
<p>函数声明:
▸ (key:string, value:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tgkiwinql39mrrc7">JSONValue</a>): Promise <code>&lt;void&gt;</code></p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>需要设置的键</td>
</tr>
<tr>
<td>value</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tgkiwinql39mrrc7">JSONValue</a></td>
<td>需要设置的值</td>
</tr>
</tbody>
</table>
<p>返回值:Promise <code>&lt;void&gt;</code>
当设置完成时 resolve，否则 reject</p>
<p>get
• get : function
获取指定键对应的值</p>
<p>函数声明:
▸ (key:string): Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>](%5BReturnValue%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7))</p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>指定的键</td>
</tr>
</tbody>
</table>
<p>返回值:Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>](%5BReturnValue%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7))
返回 Promise 对象，当获取完成时 resolve，否则 reject，resolve 时返回对应{ ReturnValue | 键值对内容}。</p>
<p>update
• update : function
使用传入的方法更新键值对</p>
<p>函数声明:
▸ (key:string, handler:(prevValue: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>)=&gt;<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tgkiwinql39mrrc7">JSONValue</a>): Promise <code>&lt;void&gt;</code></p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>需要更新的键</td>
</tr>
<tr>
<td>handler</td>
<td>(prevValue:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>)=&gt;<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tgkiwinql39mrrc7">JSONValue</a></td>
<td>处理更新的方法，接受一个参数，为当前键的值，返回一个更新后的值</td>
</tr>
</tbody>
</table>
<p>返回值:Promise <code>&lt;void&gt;</code>
返回 Promise 对象，当更新完成时 resolve，否则 reject。</p>
<p>remove
• remove : function
删除指定键值对</p>
<p>函数声明:
▸ (key:string): Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>](%5BReturnValue%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7))</p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>指定的键</td>
</tr>
</tbody>
</table>
<p>返回值:Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>](%5BReturnValue%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7))
返回 Promise 对象，resolve 时返回被删除的 { <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a> | 键值对内容}。</p>
<p>list
• list : function
批量获取键值对</p>
<p>函数声明:
▸ (options:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ugyg698kg8940k4d">ListPageOptions</a>): Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181">QueryList</a>](%5BQueryList%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181))</p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ugyg698kg8940k4d">ListPageOptions</a></td>
<td>批量获取键值对的配置项</td>
</tr>
</tbody>
</table>
<p>返回值:Promise[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181">QueryList</a>](%5BQueryList%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181))
返回 Promise 对象，resolve 时返回{ <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dw93mzb6q0d5d181">QueryList</a> | 键值对查询表}。</p>
<p>操作频率限制</p>
<p>服务器维度
对每一个游戏服务器独立生效，与服务器在线玩家数正相关，同一队列中的所有API共享限制。</p>
<table>
<thead>
<tr>
<th>队列</th>
<th>API</th>
<th>限制</th>
</tr>
</thead>
<tbody>
<tr>
<td>写入</td>
<td>set updateremove</td>
<td>（60 + 玩家数 * 10 ）次操作 / 分钟</td>
</tr>
<tr>
<td>读取</td>
<td>get update</td>
<td>（120 + 玩家数*20）次操作/分钟</td>
</tr>
</tbody>
</table>
<p>注；当前版本下，此处玩家数取固定值70。</p>
<p>吞吐量维度
对每一个 Key 的任意操作有吞吐量的限制。</p>
<table>
<thead>
<tr>
<th>队列</th>
<th>API</th>
<th>限制</th>
</tr>
</thead>
<tbody>
<tr>
<td>写入</td>
<td>set updateremove</td>
<td>4M/min</td>
</tr>
<tr>
<td>读取</td>
<td>get update</td>
<td>25M/min</td>
</tr>
</tbody>
</table>
<p>错误码</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Status</th>
<th>Error Message</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>400</td>
<td>DB_NAME_INVALID</td>
<td>Invalid data storage name.</td>
<td>存储空间名为空，或不满足限制要求。</td>
</tr>
<tr>
<td>400</td>
<td>KEY_INVALID</td>
<td>Invalid data key.</td>
<td>数据键为空。</td>
</tr>
<tr>
<td>400</td>
<td>VALUE_INVALID</td>
<td>Invalid data value.</td>
<td>数据值为空。</td>
</tr>
<tr>
<td>400</td>
<td>PARAMS_INVALID</td>
<td>Invalid parameters.</td>
<td>参数不合法。</td>
</tr>
<tr>
<td>429</td>
<td>REQUEST_THROTTLED</td>
<td>Too Many Requests</td>
<td>超出操作频率限制</td>
</tr>
<tr>
<td>500</td>
<td>SERVER_FETCH_ERROR</td>
<td>Server network error.</td>
<td>服务由于网络原因请求失败。</td>
</tr>
<tr>
<td>500</td>
<td>UNKNOWN</td>
<td>Unknown server error.</td>
<td>未知的服务器错误。</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<pre class='hljs'><code><div><span class="hljs-built_in">console</span>.clear()

<span class="hljs-keyword">const</span> testStorage = storage.getDataStorage(<span class="hljs-string">&#x27;test&#x27;</span>)

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">storageExample</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">await</span> testStorage.set(<span class="hljs-string">&#x27;keyNumber&#x27;</span>, <span class="hljs-number">1</span>)

    <span class="hljs-keyword">await</span> testStorage.set(<span class="hljs-string">&#x27;keyStr&#x27;</span>, <span class="hljs-string">&#x27;字符串&#x27;</span>)

    <span class="hljs-keyword">await</span> testStorage.set(<span class="hljs-string">&#x27;keyBoolean&#x27;</span>, <span class="hljs-literal">false</span>)

    <span class="hljs-keyword">await</span> testStorage.set(<span class="hljs-string">&#x27;keyJson&#x27;</span>, { <span class="hljs-attr">describe</span>: <span class="hljs-string">&#x27;json内容&#x27;</span> })

    <span class="hljs-keyword">let</span> numberValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyNumber&#x27;</span>)

    <span class="hljs-keyword">let</span> strValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyStr&#x27;</span>)

    <span class="hljs-keyword">let</span> boolValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyBoolean&#x27;</span>)

    <span class="hljs-keyword">let</span> jsonValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyJson&#x27;</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyNumber 的 value： <span class="hljs-subst">${numberValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyStr 的 value： <span class="hljs-subst">${strValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyBoolean 的 value： <span class="hljs-subst">${boolValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyJson 的 value： <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(jsonValue.value)}</span>`</span>)

    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)

    numberValue = <span class="hljs-keyword">await</span> testStorage.remove(<span class="hljs-string">&#x27;keyNumber&#x27;</span>)

    strValue = <span class="hljs-keyword">await</span> testStorage.remove(<span class="hljs-string">&#x27;keyStr&#x27;</span>)

    boolValue = <span class="hljs-keyword">await</span> testStorage.remove(<span class="hljs-string">&#x27;keyBoolean&#x27;</span>)

    jsonValue = <span class="hljs-keyword">await</span> testStorage.remove(<span class="hljs-string">&#x27;keyJson&#x27;</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;\n==========================\n\n&#x27;</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyNumber 的 value： <span class="hljs-subst">${numberValue}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyStr 的 value： <span class="hljs-subst">${strValue}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyBoolean 的 value： <span class="hljs-subst">${boolValue}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyJson 的 value： <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(jsonValue)}</span>`</span>)

    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)

    <span class="hljs-keyword">await</span> testStorage.update(<span class="hljs-string">&#x27;keyNumber&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">preData</span>) =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> })

    <span class="hljs-keyword">await</span> testStorage.update(<span class="hljs-string">&#x27;keyStr&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">preData</span>) =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;被更改的字符串&#x27;</span> })

    <span class="hljs-keyword">await</span> testStorage.update(<span class="hljs-string">&#x27;keyBoolean&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">preData</span>) =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> })

    <span class="hljs-keyword">await</span> testStorage.update(<span class="hljs-string">&#x27;keyJson&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">preData</span>) =&gt;</span> { <span class="hljs-keyword">return</span> { <span class="hljs-attr">describe</span>: <span class="hljs-string">&#x27;json内容被更改&#x27;</span> } })

    numberValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyNumber&#x27;</span>)

    strValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyStr&#x27;</span>)

    boolValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyBoolean&#x27;</span>)

    jsonValue = <span class="hljs-keyword">await</span> testStorage.get(<span class="hljs-string">&#x27;keyJson&#x27;</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;\n==========================\n\n&#x27;</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyNumber 的 value： <span class="hljs-subst">${numberValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyStr 的 value： <span class="hljs-subst">${strValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyBoolean 的 value： <span class="hljs-subst">${boolValue.value}</span>`</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`keyJson 的 value： <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(jsonValue.value)}</span>`</span>)

    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;\n==========================\n\n&#x27;</span>)

    <span class="hljs-keyword">const</span> queryList = <span class="hljs-keyword">await</span> testStorage.list({

    <span class="hljs-comment">// 分页指针，用于指定本次获取的分页起点。</span>

    <span class="hljs-attr">cursor</span>: <span class="hljs-number">0</span>,

    <span class="hljs-comment">// 分页大小，一页内的数据量，默认100。</span>

    <span class="hljs-attr">pageSize</span>: <span class="hljs-number">100</span>

    })

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> queryList.getCurrentPage()) {

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${value.key}</span> 的 value：<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(value.value)}</span>`</span>)

    }

    <span class="hljs-comment">// 假如为最后一页，退出循环</span>

    <span class="hljs-keyword">if</span> (queryList.isLastPage) <span class="hljs-keyword">break</span>

    <span class="hljs-comment">// 翻到下一页</span>

    <span class="hljs-keyword">await</span> queryList.nextPage()

    }

}

storageExample()
</div></code></pre>
<h2 id="gamedieevent-%E5%AE%9E%E4%BD%93%E6%AD%BB%E4%BA%A1%E4%BA%8B%E4%BB%B6" tabindex="-1">GameDieEvent 实体死亡事件</h2>
<p>类 - GameDieEvent
当实体死亡时触发的事件，由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#fO5zM">GameWorld.onDie</a>和<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#A8ka7">GameEntity.onDie</a>触发</p>
<p>tick
•tick:number
事件发生的时间</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
死亡的实体</p>
<p>attacker
•attacker:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>|null
击杀者</p>
<p>damageType
•damageType:string
伤害的类型</p>
<h2 id="gameentity-%E5%AE%9E%E4%BD%93" tabindex="-1">GameEntity 实体</h2>
<p>类 - GameEntity
Entity实体是Box3中的游戏对象，用于对物体、玩家等的控制。</p>
<p>属性与方法</p>
<p>控制实体的外观
由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vim7evgezkmnvhxk">GameEntityConfig</a>实现</p>
<p>entity.mesh
•mesh:string= &quot;&quot;</p>
<p>实体形状数据(mesh)的hash。如果设为空字符串/''，则实体无mesh。 除非实体为玩家，否则设定实体的mesh之后，mesh就会用来计算实体的边界。
只有提前在场景中放置模型，才能获得模型的Mesh属性。
模型被放置后，会自动保存在文件列表中。模型文件对应的*'mesh/.vb'名称便是 mesh属性。
示例代码</p>
<p>entity.position
• position: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt; = new GameVector3(0, 0, 0)
实体的位置。
示例代码</p>
<p>entity.meshOrientation
• meshOrientation: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>&lt;&gt; = new GameQuaternion(0, 0, 0, 1)
实体的旋转角度</p>
<p>entity.lookAt
(targetPosition:<a href="https://box3.yuque.com/staff-khn556/wupvz3/lqqc61nd3gud9omc">GameVector3</a>, meshFacing?:&quot;X&quot;|&quot;Y&quot;|&quot;Z&quot;, up?:<a href="https://box3.yuque.com/staff-khn556/wupvz3/lqqc61nd3gud9omc">GameVector3</a>) : void
将实体旋转至面向指定位置的方向，与图形学中定义的 LookAt 矩阵不是一个东西哦。
通过此方法进行的旋转会瞬时发生，仅影响实体的朝向，不会影响实体的运动状态。
●position:<a href="https://box3.yuque.com/staff-khn556/wupvz3/lqqc61nd3gud9omc">GameVector3</a> - 世界坐标，希望让实体朝向的位置
●meshFacing:&quot;X&quot;|&quot;Y&quot;|&quot;Z&quot; - 定义模型在未旋转状态下的参考方向，处理模型设计时未朝向Z轴时的情况：
○当取X、Z时，定义模型的正方向分别为X、Z轴正方向，上方向为 Y 轴正方向
○当取Y时，定义模型的正方向为Y轴正方向，上方向为Z轴正方向
○默认值为Z，即模型设计时朝向Z轴正方向
●up:<a href="https://box3.yuque.com/staff-khn556/wupvz3/lqqc61nd3gud9omc">GameVector3</a> - 上向量，默认取 Y 轴正方向</p>
<p>entity.meshScale
• meshScale: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt; = new GameVector3(1 / 64, 1 / 64, 1 / 64)
实体的缩放比例</p>
<p>entity.meshColor
• meshColor: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>&lt;&gt; = new GameRGBAColor(1, 1, 1, 1)
实体的颜色</p>
<p>entity.meshInvisible
•meshInvisible:boolean= false
可控制实体隐形，当值设为true时，则实体隐形。</p>
<p>entity.meshEmissive
• meshEmissive: number = 0
实体的发光度</p>
<p>entity.meshMetalness
• meshMetalness: number = 0
实体的金属感</p>
<p>entity.meshShininess
• meshShininess: number = 0
实体的反光度，设为1则为非常光滑</p>
<p>entity.meshOffset
•meshOffset:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(0, 0, 0)
实体的位移</p>
<p>控制实体的物理属性
由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vim7evgezkmnvhxk">GameEntityConfig</a>实现</p>
<p>entity.bounds
•bounds:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(1, 1, 1)
实体边界框的半径，沿着x/y/z方向，这是一个只读属性，每帧都会重新计算</p>
<p>entity.collides
• collides: boolean = true
如果为假(false)，则实体不会碰撞</p>
<p>entity.fixed
• fixed: boolean = false
如果为真(true)，则实体不会移动</p>
<p>entity.friction
• friction: number = 0
控制实体的粘性(0 = 滑，1 = 粘)</p>
<p>entity.gravity
• gravity: boolean = true
如果为假(false)，则实体不会下落
示例代码</p>
<p>entity.mass
• mass: number = 1
实体物理质量</p>
<p>entity.restitution
• restitution: number = 0
控制实体的弹性(0 = 软, 1 = 弹)</p>
<p>entity.velocity
• velocity: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt; = new GameVector3(0, 0, 0)
实体的速度
示例代码</p>
<p>entity.contactForce
•contactForce:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(0, 0, 0)
实体受到的碰撞力</p>
<p>entity.entityContacts
•entityContacts:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/tdvolpzhshdwfxri">GameEntityContact</a>[] = []
返回正在和玩家/实体发生碰撞的全部实体列表</p>
<p>entity.voxelContacts
•voxelContacts:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/le6z78ge7yokyxal">GameVoxelContact</a>[] = []
返回正在和玩家/实体发生碰撞的全部方块列表</p>
<p>entity.fluidContacts
•fluidContacts:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/pdmg33m4vgx4t6bu">GameFluidContact</a>[] = []
返回正在被玩家/实体触碰的全部液体方块列表</p>
<p>聊天</p>
<p>entity.say
•say(message: string):void
让实体说话。
示例代码</p>
<p>互动
允许实体进行互动</p>
<p>entity.enableInteract
•enableInteract:boolean= false
是否允许实体进行互动。如果允许互动，走进互动范围之内，实体身上将会出现互动提示。</p>
<p>实体互动范围</p>
<p>entity.interactRadius
•interactRadius:number= 16
实体互动范围。数值越小，则需要靠近实体才会出现互动提示。
范围有多个可互动实体，按下键盘[或]键，切换互动目标。</p>
<p>互动提示文本</p>
<p>entity.interactHint
•interactHint:string= &quot;&quot;
进入实体互动范围时，实体身上出现的提示文本。</p>
<p>互动提示文本颜色</p>
<p>entity.interactColor
•interactColor:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(1, 1, 1)
进入实体互动范围时，提示文本的颜色。
示例代码
与实体互动之前，在场景中必须先有一个实体。
在模型列表中，挑选一个你喜欢的模型，将它放置在场景中，并记住模型的名字。</p>
<p>和实体有关的事件</p>
<p>entity.onClick
•onClick:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4">GameClickEvent</a>](%5BGameClickEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4))
•nextClick:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4">GameClickEvent</a>](%5BGameClickEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4))
当玩家用鼠标点击实体时触发的事件</p>
<p>entity.onEntityContact
•onEntityContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
•nextEntityContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
当实体触碰另一个实体时触发</p>
<p>entity.onEntitySeparate
•onEntitySeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
•nextEntitySeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
当实体停止触碰另一个实体时触发</p>
<p>entity.onFluidEnter
•onFluidEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
•nextFluidEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
当实体进入液体时触发</p>
<p>entity.onFluidLeave
•onFluidLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
•nextFluidLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
当实体离开液体时触发</p>
<p>entity.onInteract
•onInteract:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/go3it5p7im5tonnk">GameInteractEvent</a>›
•nextInteract:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/go3it5p7im5tonnk">GameInteractEvent</a>›
当实体进行互动时触发
示例代码</p>
<p>entity.onVoxelContact
•onVoxelContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
•nextVoxelContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
当实体触碰方块时触发</p>
<p>entity.onVoxelSeparate
•onVoxelSeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
•nextVoxelSeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
当实体停止触碰方块时触发</p>
<p>控制玩家</p>
<p>entity.isPlayer
•isPlayer:boolean= false
如果为真，则实体为玩家</p>
<p>Optionalplayer
•player? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a>
索引与玩家相关的全部状态和方法</p>
<p>快速查找实体</p>
<p>entity.addTag
为实体添加一个新标签
函数声明:
▸addTag(tag: string):void
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tag</td>
<td>string</td>
<td>要添加的标签名</td>
</tr>
</tbody>
</table>
<p>entity.hasTag
判断实体是否带有某个标签
函数声明:
▸hasTag(tag: string):boolean
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tag</td>
<td>string</td>
<td>标签名</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>entity.id
•id:string= &quot;&quot;
已在编辑器中添加的实体名称</p>
<p>entity.removeTag
从实体移除标签
函数声明:
▸removeTag(tag: string):void
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tag</td>
<td>string</td>
<td>要移除的标签名</td>
</tr>
</tbody>
</table>
<p>entity.tags
在编辑器中给实体添加的全部标签</p>
<p>函数声明:
▸tags():string[]</p>
<p>实体的销毁</p>
<p>entity.destroy
•destroy:function
销毁实体
函数声明:
▸destroy():void</p>
<p>entity.destroyed
•destroyed:boolean= false
如果为真(true)，实体就被销毁。</p>
<p>entity.onDestroy
•onDestroy:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d">GameEntityEvent</a>](%5BGameEntityEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d))
•nextDestroy:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d">GameEntityEvent</a>](%5BGameEntityEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d))
当实体被销毁时触发</p>
<p>控制实体的生命值</p>
<p>entity.enableDamage
•enableDamage:boolean= false
如果为真true，则可对实体进行伤害</p>
<p>entity.showHealthBar
•showHealthBar:boolean= true
如果为真true，则显示实体的生命值HP</p>
<p>entity.hp
•hp:number= 100
实体的当前生命值hp</p>
<p>entity.maxHp
•maxHp:number= 100
实体的最大生命值hp</p>
<p>entity.onTakeDamage
实体受到伤害时触发的事件
•onTakeDamage:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent</a>](%5BGameDamageEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm))
•nextTakeDamage:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent</a>](%5BGameDamageEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm))</p>
<p>entity.onDie
实体死亡时触发的事件
•onDie:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent</a>](%5BGameDieEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y))
•nextDie:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent</a>](%5BGameDieEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y))</p>
<p>entity.hurt
可用这个函数来定义对实体的伤害。输入对实体的伤害值。
函数声明:
▸hurt(amount: number,options?:Partial[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dvgk7szaqicsyb4q">GameHurtOptions</a>](%5BGameHurtOptions%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dvgk7szaqicsyb4q))):void
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>amount</td>
<td>number</td>
<td>伤害值</td>
</tr>
<tr>
<td>options?</td>
<td>Partial[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dvgk7szaqicsyb4q">GameHurtOptions</a><br />&gt;](%5BGameHurtOptions%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dvgk7szaqicsyb4q)%3Cbr/)</td>
<td>伤害的相关配置，选填</td>
</tr>
</tbody>
</table>
<p>代码示例</p>
<p>控制实体产生粒子的属性</p>
<p>entity.particleRate
•particleRate:number= 0
实体平均每秒产生粒子的数量。如果希望实体停止释放粒子，可以将该属性改为0
示例代码</p>
<p>entity.particleRateSpread
•particleRateSpread:number= 0
如果设定了该属性的值，实体每一秒产生粒子的数量将不再是个固定值，而是从区间 [particleRate,particleRate+particleRateSpread) 里随机选取的一个整数。例如，假设particleRate=0，particleRateSpread=3，每秒产生的粒子数量是[0, 0+3) ，即[0, 3)区间里的一个随机整数，也就是可能为0，1，或2
示例代码</p>
<p>entity.particleLimit
•particleLimit:number= 100
实体可产生的粒子总数的上限</p>
<p>entity.particleLifetime
•particleLifetime:number= 10
粒子的存活时间，以秒为单位
示例代码</p>
<p>entity.particleLifetimeSpread
•particleLifetimeSpread:number= 0
如果设定了该属性的值，粒子的存活时间将不再是固定值，而是区间 [particleLifetime,particleLifetime+particleLifetimeSpread) 里的一个随机数，可能为小数
示例代码</p>
<p>entity.particleSize
•particleSize:number[]= [1, 1, 1, 1, 1]
该属性的值可以是一个长度为0至5的数组。每个粒子的存活时间被平均分为五个阶段，对于长度为5的数组，数组里的每个值分别指定粒子在各个阶段的大小，其中，第一个值为粒子刚产生是的大小，第五个值为粒子消失时的大小。举几个例子，假设粒子的存活时间被设定为5秒，如果particleSize的值为
●[25, 25, 25, 25, 25]，在粒子存活的5秒内大小不会发生变化，产生时是25，消失时也是25
●[0, 25, 0, 25, 15]，粒子产生时大小为0，然后逐渐变为25，之后又逐渐变为0，再逐渐变为25，最后变为15，可以让该实体所产生的粒子具有逐渐放大缩小的效果
●[15， 25], 粒子产生时大小为15，1秒后逐渐变大至25，之后又逐渐缩小至最小值
示例代码</p>
<p>entity.particleSizeSpread
•particleSizeSpread:number= 0
●如果设定了该属性，但没设定particleSize的值，每产生一个粒子，会从区间[0，particleSizeSpread)里选取的一个随机数作为它的大小
●如果同时设定了particleSize和particleSizeSpread两个属性，每产生一个粒子，从区间[0，particleSizeSpread)里选取一个随机数x，这个粒子第i个阶段的大小将为particleSize[i]+x</p>
<p>entity.particleColor
•particleColor:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>[]= [ new GameRGBColor(1,1,1), new GameRGBColor(1,1,1), new GameRGBColor(1,1,1), new GameRGBColor(1,1,1), new GameRGBColor(1,1,1) ]
类似particleSize，该属性的值可以是一个长度为0至5的数组，数组里的每个值分别指定了粒子在各个阶段的颜色。类似地，可以通过该属性使粒子具有颜色渐变的效果
示例代码</p>
<p>entity.particleVelocity
•particleVelocity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>= new GameVector3(0, 0, 0)
该实体产生的所有粒子的初始速度，如果将该属性设为new GameVector3(x, y, z)，x，y，z三个值分别指定粒子在对应三个方向上的速率
示例代码</p>
<p>entity.particleVelocitySpread
•particleVelocitySpread:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>= new GameVector3(0, 0, 0)
增加该实体产生的所有粒子初始速度的不确定性，如果将该属性设为new GameVector3(sx, sy, sz)，每产生一个粒子，会基于这三个值分别产生一个随机值加到 x/y/z 三个方向所对应的速率上。通过设定这个属性，可以使粒子具有向随机方向运动的效果
示例代码</p>
<p>entity.particleDamping
•particleDamping:number= 0
●如果该属性的值为正数，会短暂减少该实体所产生粒子的初始速度，数值越大，减少初始速度的效果持续得越久
●如果为负值，会短暂增加粒子的初始速度，数值越小，增加初始速度的效果越明显
示例代码</p>
<p>entity.particleAcceleration
•particleAcceleration:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>= new GameVector3(0, 0, 0)
该实体所产生粒子的加速度</p>
<p>entity.particleNoise
•particleNoise:number= 0
指定粒子相对于之前运动方向的最大偏离值，数值越大，各个粒子的运动相对原有方向的偏离越明显</p>
<p>entity.particleNoiseFrequency
•particleNoiseFrequency:number= 1
指定粒子改变运动方向的频率，数值越大，各个粒子的运动方向越没有规律
示例代码</p>
<p>控制音效
上传音效
编辑器目前内置了34款音效，可以在菜单-[文件管理]的搜索.mp3查看。点击文件后，会弹出声音文件的详情属性。点击位置即可复制文件路径，在脚本中使用对应的方法播放。
如需上传自定义声音，可以在[文件管理]窗口，点击右下角浮动的加号按钮-[上传音频]。
属性</p>
<p>entity.chatSound
•chatSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当实体说话时，播放聊天音效。默认为'audio/chat.mp3'。通过entity.say()触发。</p>
<p>entity.hurtSound
•hurtSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当实体触发受伤事件时，播放受伤音效。默认为'audio/hurt.mp3'。通过entity.onTakeDamage()触发</p>
<p>entity.dieSound
•dieSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当实体触发死亡事件时，播放死亡音效。默认为'audio/die.mp3'。通过entity.onDie()触发</p>
<p>entity.interactSound
•interactSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当实体进行互动时，播放互动音效。此音效仅互动的玩家可听见。通过entity.onInteract()触发。</p>
<p>方法</p>
<p>entity.sound
•sound:function
在实体的位置播放声音。
参数
spec:{sample, radius, gain, pitch} | string
●sample:string 必填，声音文件路径。可在文件管理器中上传自定义声音。如'audio/chat.mp3'
●radius?:number 可选，声音范围。默认为32。距离实体越近，声音听的越清晰。超出范围的玩家则听不到声音。
●gain?:number 可选，音量增益。正常为1，数值越大，声音越响。
●pitch?:number 可选，音高增益。正常为1，大于1，声音播放越快，小于1，声音播放越慢。
示例1</p>
<p>示例2</p>
<p>示例3</p>
<p>动画</p>
<p>entity.animate
可用这个函数来设定实体的动画轨迹
函数声明:
▸animate(keyframes:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/re5g6gz99r48fzi9">GameEntityKeyframe</a>[],playbackInfo:Partial[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk">GameAnimationPlaybackConfig</a>](%5BGameAnimationPlaybackConfig%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk))):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ritpgy64d053qg64">GameAnimation</a>
代码示例</p>
<pre class='hljs'><code><div><span class="hljs-comment">//需要提前在编辑器中添加&#x27;单元方块&#x27;的模型。</span>

<span class="hljs-keyword">const</span> vox = world.querySelector(<span class="hljs-string">&#x27;#单元方块-1&#x27;</span>) <span class="hljs-comment">//获取实体</span>

vox.meshScale = vox.meshScale.scale(<span class="hljs-number">4</span>) <span class="hljs-comment">//让实体变大4倍</span>

<span class="hljs-keyword">const</span> ani = vox.animate([

  { <span class="hljs-attr">position</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">meshColor</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>] },

  { <span class="hljs-attr">position</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">127</span>], <span class="hljs-attr">meshColor</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>] },

  { <span class="hljs-attr">position</span>: [<span class="hljs-number">127</span>, <span class="hljs-number">12</span>, <span class="hljs-number">127</span>], <span class="hljs-attr">meshColor</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>] },

  { <span class="hljs-attr">position</span>: [<span class="hljs-number">127</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">meshColor</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>] },

], {

  <span class="hljs-attr">iterations</span>: <span class="hljs-number">3</span>,<span class="hljs-comment">//兜3圈</span>

  <span class="hljs-attr">direction</span>: GameAnimationDirection.WRAP,<span class="hljs-comment">//从终点回到起点</span>

  <span class="hljs-attr">duration</span>: <span class="hljs-number">16</span> * <span class="hljs-number">5</span>, <span class="hljs-comment">//兜一圈5秒(每秒16帧)</span>

})

ani.onReady(<span class="hljs-function">() =&gt;</span> {<span class="hljs-comment">//当动画开始播放时</span>

  world.say(<span class="hljs-string">&#x27;开始兜圈&#x27;</span>)

})

ani.onFinish(<span class="hljs-function">() =&gt;</span> {<span class="hljs-comment">//当动画结束播放时</span>

  world.say(<span class="hljs-string">&#x27;兜圈结束&#x27;</span>)

})
</div></code></pre>
<p>动作</p>
<p>entity.motion
• motion: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dikrnsd8s0c3zuoc">GameMotionController</a>&lt;&gt; = new <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dikrnsd8s0c3zuoc">GameMotionController</a>()
实体动作控制器
代码示例</p>
<pre class='hljs'><code><div><span class="hljs-keyword">const</span> entity = world.querySelector(<span class="hljs-string">&#x27;#npc&#x27;</span>)

<span class="hljs-keyword">const</span> entityMotionControl = entity.motion; <span class="hljs-comment">// MotionController</span>

<span class="hljs-keyword">const</span> motion = entityMotionControl.loadByName(<span class="hljs-string">&#x27;hello&#x27;</span>); <span class="hljs-comment">// MotionHandler &#x27;hello&#x27;指代&#x27;npc&#x27;实体上的其中一个motion动作名称</span>

motion.onFinish(<span class="hljs-function">() =&gt;</span> {

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Motion End&#x27;</span>);

});

motion.play()
</div></code></pre>
<h2 id="gameentitycontact-%E5%AE%9E%E4%BD%93%E7%A2%B0%E6%92%9E%E5%8F%82%E6%95%B0" tabindex="-1">GameEntityContact 实体碰撞参数</h2>
<p>类 - GameEntityContact
正在发生碰撞的实体</p>
<p>other
•other:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
与此实体碰撞的另一个实体</p>
<p>axis
•axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
碰撞的分离轴，也就是碰撞后物体弹飞的方向</p>
<p>force
•force:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
碰撞所产生的力</p>
<h2 id="gameentitycontactevent-%E5%AE%9E%E4%BD%93%E7%A2%B0%E6%92%9E%E4%BA%8B%E4%BB%B6" tabindex="-1">GameEntityContactEvent 实体碰撞事件</h2>
<p>类 - GameEntityContactEvent
当两个实体碰撞时触发的事件。
由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#pI6Y2">GameWorld.onEntityContact</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#gPBFQ">GameWorld.onEntitySeparate</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#EM0Fn">GameEntity.onEntityContact</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#VbAUD">GameEntity.onEntitySeparate</a>触发</p>
<p>axis
•axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
碰撞的分离轴，也就是碰撞后物体弹飞的方向</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
碰撞中的第一个实体</p>
<p>force
•force:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
碰撞所产生的力</p>
<p>other
•other:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
碰撞中的第二个实体</p>
<p>tick
•tick:number
两个实体碰撞的时间</p>
<h2 id="gameentityevent-%E5%AE%9E%E4%BD%93%E5%88%9B%E5%BB%BA%E9%94%80%E6%AF%81%E4%BA%8B%E4%BB%B6" tabindex="-1">GameEntityEvent 实体创建销毁事件</h2>
<p>类 - GameEntityEvent
当创建或销毁实体时触发的事件。
由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#P6gUg">GameWorld.onPlayerJoin</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#mUHUB">GameWorld.onPlayerLeave</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#VHyc3">GameWorld.onEntityCreate</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#NIBv8">GameWorld.onEntityDestroy</a> 和 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#gRhnq">GameEntity.onDestroy</a> 触发</p>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">entityEvent</span>) =&gt;</span> {

    <span class="hljs-comment">// entityEvent.entity</span>

    <span class="hljs-comment">// entityEvent.tick</span>

});
</div></code></pre>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
创建/销毁的实体</p>
<p>tick
•tick:number
事件发生时间</p>
<h2 id="gameeventhandlertoken-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8" tabindex="-1">GameEventHandlerToken 事件处理器</h2>
<p>类 - GameEventHandlerToken
当事件监听被触发时，由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a></p>
<p>返回的token，可用于取消事件监听。</p>
<p>cancel
取消事件监听</p>
<p>函数声明:
▸cancel():void</p>
<p>resume
恢复事件监听</p>
<p>函数声明:
▸ resume(): void</p>
<p>事件列表:
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl">GameTickEvent 时钟</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/mtb7dirtqv6g83o4">GameClickEvent 点击</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent 输入</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2">GameChatEvent 聊天</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/go3it5p7im5tonnk">GameInteractEvent 互动</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/dcqt2gzgkxnxqt2d">GameEntityEvent 实体创建/销毁</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent 实体触碰</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent 触碰方块</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent 触碰液体</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent 实体伤害</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent 实体死亡</a>
●<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent 区域触碰</a></p>
<h2 id="gamefluidcontact-%E6%B6%B2%E4%BD%93%E7%A2%B0%E6%92%9E%E6%95%B0%E6%8D%AE" tabindex="-1">GameFluidContact 液体碰撞数据</h2>
<p>类 - GameFluidContact
被实体/玩家触碰的液体方块。</p>
<p>voxel
•voxel:number
液体方块id</p>
<p>volume
•volume:number
液体方块中，被玩家或实体进入的体积比例，大小为(0,1]</p>
<h2 id="gamefluidcontactevent-%E6%B6%B2%E4%BD%93%E7%A2%B0%E6%92%9E%E4%BA%8B%E4%BB%B6" tabindex="-1">GameFluidContactEvent 液体碰撞事件</h2>
<p>当实体进入或离开液体时触发的事件。
由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#ZxpSh">GameWorld.onFluidEnter</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#mPt0K">GameWorld.onFluidLeave</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#xFbGB">GameEntity.onFluidEnter</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#qkPb7">GameEntity.onFluidLeave</a> 触发</p>
<pre class='hljs'><code><div>world.onFluidEnter(<span class="hljs-function">(<span class="hljs-params">{entity, tick, voxel}</span>) =&gt;</span> {

})
</div></code></pre>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
触碰液体的实体</p>
<p>tick
•tick:number
实体进入或离开液体的时间</p>
<p>voxel
•voxel:number
液体方块id</p>
<h2 id="gameinputevent-%E7%8E%A9%E5%AE%B6%E8%BE%93%E5%85%A5%E4%BA%8B%E4%BB%B6" tabindex="-1">GameInputEvent 玩家输入事件</h2>
<p>类 - GameInputEvent
输入事件，在玩家按下或松开按钮时触发。
事件发生的时刻，即为玩家按下/松开按钮的同一刻。
由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#icj8F">GameWorld.onPress</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#dRB7i">GameWorld.onRelease</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#O5SsB">GamePlayer.onPress</a>,<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#CenKW">GamePlayer.onRelease</a>触发。
示例代码</p>
<p>点击左键，将鼠标指针位置的方块替换为石头。点击右键，销毁方块。</p>
<p>button
•button:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">GameButtonType</a>
玩家输入的按钮</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>&amp; object
指向按下/松开按钮的玩家</p>
<p>position
•position:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
玩家按下/松开按钮的瞬间所在位置</p>
<p>pressed
•pressed:boolean
如果为真，则事件为按下按钮，否则，为松开按钮。</p>
<p>raycast
•raycast:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult</a>
按下/松开按钮的瞬间，从玩家视角投射的射线检测结果。</p>
<p>tick
•tick:number
按下/松开按钮的时间</p>
<h2 id="gameinteractevent-%E5%AE%9E%E4%BD%93%E4%BA%92%E5%8A%A8%E4%BA%8B%E4%BB%B6" tabindex="-1">GameInteractEvent 实体互动事件</h2>
<p>类 - GameInteractEvent</p>
<p>参数
●entity
●targetEntity
●tick</p>
<p>参数</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
发起互动的实体</p>
<p>targetEntity
•targetEntity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
收到互动请求的实体</p>
<p>tick
•tick:number
事件发生时间</p>
<h2 id="gamemotioncontroller-%E5%8A%A8%E4%BD%9C%E6%8E%A7%E5%88%B6%E5%99%A8" tabindex="-1">GameMotionController 动作控制器</h2>
<p>类 - GameMotionController
Motion 动作，可对Entity实体带有的动作进行操作，包括加载特定动作，暂停动作，重播动作和设置默认动作等。</p>
<p>示例代码
播放动作</p>
<p>加载特定动作</p>
<p>loadByName
•  loadByName : function
加载特定动作或动作序列，并返回对应的动作对象</p>
<p>函数声明:
▸ ( configs : &quot;string&quot; | <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/docs/pqaedvg6kom5g2g7">MotionConfig</a>[] | <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/docs/rsefcstdog725s5p">MotionClipConfig</a>): <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/czupdql58ligote4">GameMotionHandler</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>configs</td>
<td>string</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/czupdql58ligote4">GameMotionHandler </a></p>
<p>控制动作播放</p>
<p>pause
• pause  : function
暂停实体上的动作播放</p>
<p>函数声明：
▸ (): void</p>
<p>resume
• resume   : function
恢复实体上的动作播放</p>
<p>函数声明：
▸ (): void</p>
<p>设置默认动作</p>
<p>setDefaultMotionByName
• setDefaultMotionByName : function
设置默认动作
●没有其他动作在播放的情况下，默认动作会在游戏运行时自动循环播放
●调用此函数时，如当前处于默认动作执行状态，则将打断旧默认动作，播放新的默认动作
●动作名不存在时，此方法不产生任何效果，并抛出包含实体、模型与动作信息的错误</p>
<p>函数声明：
▸ ( motionName : undefined | string):  void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>motionName</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<p>返回值: void</p>
<p>示例代码</p>
<pre class='hljs'><code><div><span class="hljs-keyword">const</span> entity = world.querySelector(<span class="hljs-string">&#x27;#npc&#x27;</span>)

entity.motion.setDefaultMotionByName(<span class="hljs-string">&#x27;FirstMotion&#x27;</span>);

entity.motion.setDefaultMotionByName(<span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// 报错，不存在对应动作</span>

entity.motion.setDefaultMotionByName(); <span class="hljs-comment">// 设置默认动作为空，即不播放默认动作</span>
</div></code></pre>
<h2 id="gamemotionevent-%E5%8A%A8%E4%BD%9C%E4%BA%8B%E4%BB%B6" tabindex="-1">GameMotionEvent 动作事件</h2>
<p>类 - GameMotionEvent
动作事件，通过GameMotionHandler.onFinish触发</p>
<p>cancelled
•cancelled: bool
动画是否被取消</p>
<h2 id="gamemotionhandler-%E5%8A%A8%E4%BD%9C%E5%A4%84%E7%90%86%E5%99%A8" tabindex="-1">GameMotionHandler 动作处理器</h2>
<p>类 - GameMotionHandler
动作播放的 Handler，用于处理动作中断等行为</p>
<p>示例代码
播放动作</p>
<p>基本</p>
<p>target
• target : GameEntity
当前motion的entity对象</p>
<p>控制动作播放</p>
<p>play
• play  : function
播放当前实体动作
●会打断当前动作，开始对应动作/序列动作的播放
●当配置中包含的动作播放结束时，触发 MotionPlayHandler 的 Finish 事件。</p>
<p>函数声明：
▸ (): void</p>
<p>返回值: void</p>
<p>示例代码</p>
<pre class='hljs'><code><div><span class="hljs-keyword">const</span> entity = world.querySelector(<span class="hljs-string">&#x27;#npc&#x27;</span>)

<span class="hljs-keyword">const</span> motion = entity.motion.loadByName(<span class="hljs-string">&#x27;FirstMotion&#x27;</span>);

motion.play()
</div></code></pre>
<p>cancel
• cancel  : function
中断此动作播放，并触发 end 事件</p>
<p>函数声明：
▸ (): void</p>
<p>播放结束事件</p>
<p>onFinish
• onFinish : <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eplk4m6wyt4gymk6">GameMotionEvent</a>›
• nextFinish: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eplk4m6wyt4gymk6">GameMotionEvent</a>›
响应结束状态的监听函数</p>
<h2 id="gameplayer-%E7%8E%A9%E5%AE%B6" tabindex="-1">GamePlayer 玩家</h2>
<p>类 - GamePlayer
Player 玩家指的是进入游戏的用户，此接口可用定义游戏中的玩家属性、操作等等。玩家属于一种特殊的<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">实体</a>。</p>
<p>基本</p>
<p>name
•name:string= &quot;player&quot;
玩家的昵称。无法控制更改。</p>
<p>boxId
•boxId:string= &quot;&quot;
玩家的Box ID(3-15字符)。无法控制更改。 游客的boxID值为空&quot;&quot;。</p>
<p>userKey
•userKey:string= &quot;&quot;
玩家的唯一识别码(16字符)，可以用于存储玩家信息到数据库，无法控制更改。 游客的userKey值为空&quot;&quot;。</p>
<p>avatar
string
玩家头像信息。</p>
<p>spawnPoint
•spawnPoint:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(64, 140, 64)
玩家的出生点。默认出生点设置在new GameVector3(64, 140, 64)</p>
<p>movementBounds
•movementBounds:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>&lt;&gt;= new<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>(new<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>(-50, -50, -50), new<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>(178, 178, 178));
玩家的活动范围限制，如超出此范围，则传回出生点</p>
<p>向玩家发送消息</p>
<p>directMessage
▸directMessage(message: string):void
向玩家直接发送私信</p>
<p>onChat
•onChat:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2">GameChatEvent</a>](%5BGameChatEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2))
•nextChat:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2">GameChatEvent</a>](%5BGameChatEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aft5xl7q0dh6puh2))
当发起聊天时调用</p>
<p>dialog
•dialog:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/extmobyyfsaec26x">GameDialogCall</a>
在游戏中显示一个对话框。
示例代码 1</p>
<p>示例代码 2</p>
<p>cancelDialogs
•cancelDialogs:function
关闭该玩家的所有打开的对话框。</p>
<p>share
(content:string) : void;
为该玩家显示分享弹窗，并能够自定义分享内容。
●content - 分享弹窗的内容，限制长度为40个字以内，超出后截断，并在末尾添加省略号……。
自动标签
通过此 API 调用弹出的分享弹框的内容末尾，会自动新起一行添加#神奇代码岛 #地图标签，自动添加的内容不计入限制长度内。
编辑模式
编辑模式下，此API弹出的分享弹窗分享的地址是编辑模式的地址。</p>
<p>控制玩家的外观</p>
<p>color
•color:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>&lt;&gt;= new GameRGBColor(1, 1, 1)
玩家的颜色</p>
<p>emissive
•emissive:number= 0
玩家的发光度
示例代码</p>
<p>invisible
•invisible:boolean= false
玩家是否隐身
示例代码</p>
<p>skin
<a href="https://box3.yuque.com/staff-khn556/wupvz3/gwfba5hzun9bhseg">SkinDescription</a>
此玩家的皮肤配置，用于管理当前玩家皮肤的展示。通过此处修改皮肤不会影响皮肤的隐藏状态，设置前是隐藏的，设置后也还是隐藏着。</p>
<p>皮肤不存在&amp;非法参数
当皮肤名称不存在于项目皮肤库或不符合类型定义时，无事发生，并会在控制台打印警告。</p>
<p>示例</p>
<p>setSkinByName
(skinName:string) : void
将指定皮肤套装应用到此玩家上。此方法不会影响皮肤的隐藏状态，设置前是隐藏的，设置后也还是隐藏着。</p>
<p>参数
●skinName:string - 指定要设置的皮肤名称，将玩家皮肤整体替换为对应的皮肤。
皮肤不存在&amp;非法参数
当皮肤名称不存在于项目皮肤库或不为字符串时，无事发生，并在控制台打印警告。</p>
<p>resetToDefaultSkin
() : void
重置此玩家的皮肤配置为默认皮肤配置，效果同 setSkinByName传入了默认皮肤套装名称。</p>
<p>clearSkin
() : void
清除地图对此玩家应用的皮肤配置，将此玩家的皮肤配置为仅展示玩家自己的皮肤。</p>
<p>skinInvisible
•skinInvisible:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/agf4z03gzqipg9mv">GameSkinInvisible</a>
隐藏玩家模型部件接口
示例代码</p>
<p>showName
•showName:boolean= true
玩家名字是否显示</p>
<p>showIndicator
• showIndicator: boolean = false
玩家标记否显示</p>
<p>scale
•scale:number= 1
玩家的缩放比例
示例代码1</p>
<p>metalness
•metalness:number= 0
玩家的金属感</p>
<p>shininess
•shininess:number= 0
玩家的反光度</p>
<p>addWearable
•addWearable:function
在玩家某身体部位附上穿戴配件物体
函数声明:
▸ (spec: Partial‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a>›):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>spec</td>
<td>Partial‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a>›</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>removeWearable
•removeWearable:function
把玩家身体部位已附上的穿戴配件物体删除
wearableis the wearable to remove
函数声明:
▸ (wearable:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a>):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>wearable</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a></td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>wearables
•wearables:function
列举在玩家上所有的穿戴配件物体
函数声明:
• (bodyPart?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fqfcrsh8mid6ook3">GameBodyPart</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/smdhl0l2qxg5we0x">GameWearable</a>[]
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bodyPart?</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fqfcrsh8mid6ook3">GameBodyPart</a></td>
<td>某玩家身体部位，选填</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>Web相关</p>
<p>link
•link:function
在玩家弹出一个“传送门”窗口，可以跳转到其他地图或任意链接。（目前支持神奇代码岛、编程猫、微信文章、Bilibili视频等链接）
函数声明:
▸ (href: string):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>href</td>
<td>string</td>
<td>链接 URL</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>url
•url:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vvy0hopvp0bmgb1b">URL</a>
获取该玩家进入地图时所用的URL链接地址, 主要用于获取URL参数, 以便区别对待进来的玩家
示例代码</p>
<p>玩家的复活和死亡</p>
<p>forceRespawn:()
让玩家强制重生，立即返回出生点
•forceRespawn(): void</p>
<p>onRespawn
玩家复活时调用的事件
•onRespawn:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent</a>](%5BGameRespawnEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr))
•nextRespawn:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent</a>](%5BGameRespawnEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr))</p>
<p>dead
玩家是否已死亡，生命值hp低于0。若玩家死亡，则会倒在地上。
•dead: boolean = false
此属性为只读，不可修改。</p>
<p>控制玩家视角</p>
<p>cameraEntity
•cameraEntity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>| null= null
在第一人称视角(FPS)或第三人称跟随视角(FOLLOW)下，玩家视角所跟随的实体</p>
<p>cameraMode
•cameraMode:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kg0ggd71y96dlu0w">GameCameraMode</a>
视角模式
●GameCameraMode.FPS -&quot;fps&quot;- 第一人称视角
●GameCameraMode.FOLLOW -&quot;follow&quot;- 第三人称跟随视角(默认)
●GameCameraMode.FIXED -&quot;fixed&quot;- 第三人称固定视角
示例代码</p>
<p>cameraPosition
•cameraPosition:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(0, 0, 0)
固定视角(FIXED)下，镜头的眼睛位置</p>
<p>cameraTarget
•cameraTarget:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(0, 0, 0)
固定视角(FIXED)下镜头所朝向的目标点</p>
<p>cameraUp
•cameraUp:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(0, 1, 0)
固定视角(FIXED)下，镜头向上的矢量</p>
<p>cameraFovY
• cameraFovY: number  = 0.25
垂直方向的视场角</p>
<p>setCameraPitch
• setCameraPitch: function
设置玩家视角准心绕水平方向的旋转弧度
函数声明:
▸ (v: number): void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>number</td>
<td>设置弧度</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>setCameraYaw
• setCameraYaw: function
设置玩家视角准心绕垂直方向的旋转弧度
函数声明:
▸ (v: number): void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>number</td>
<td>设置弧度</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>enable3DCursor
•enable3DCursor:boolean= false
启动玩家的3D光标
示例代码</p>
<p>玩家的输入信息</p>
<p>enableAction0
●enableAction0:boolean= true
如果为false， 关闭Action0键。PC端为鼠标左键，手机端不会显示A按钮。
示例代码</p>
<p>启动鼠标左键/移动端虚拟按钮A键</p>
<p>enableAction1
●enableAction1:boolean= true
如果为false， 关闭ActionB键。PC端为鼠标右键，手机端不会显示B按钮。
启动鼠标右键/移动端虚拟按钮B键</p>
<p>action0Button
•action0Button:boolean= false
鼠标左键/移动端虚拟按钮A键</p>
<p>action1Button
•action1Button:boolean= false
鼠标右键/移动端虚拟按钮B键</p>
<p>crouchButton
•crouchButton:boolean= false
下蹲按钮</p>
<p>facingDirection
•facingDirection:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>&lt;&gt;= new GameVector3(1, 0, 0)
玩家朝向</p>
<p>cameraPitch
• cameraPitch: number= 0
玩家视角准心绕水平方向的旋转弧度 只读</p>
<p>cameraYaw
• cameraYaw: number= 0
玩家视角准心绕垂直方向的旋转弧度 只读
PITCHAXIS</p>
<p>ROLLAXIS</p>
<p>YAWAXIS</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/12895980/1694596903548-ac680c23-0a4d-4ed4-a2a6-7218836c44f3.png?x-oss-process=image/format,webp" alt="image.png"></p>
<p>jumpButton
•jumpButton:boolean= false
跳跃按钮</p>
<p>onPress
•onPress:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent</a>](%5BGameInputEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx))
•nextPress:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent</a>](%5BGameInputEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx))
当玩家按下按钮时调用</p>
<p>onRelease
•onRelease:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent</a>](%5BGameInputEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx))
•nextRelease:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx">GameInputEvent</a>](%5BGameInputEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yazeh0kkzogc71tx))
当玩家松开按钮时调用</p>
<p>walkButton
•walkButton:boolean= false
步行按钮</p>
<p>控制玩家的行动</p>
<p>canFly
•canFly:boolean= false
如果为真(true)，则允许玩家飞行
示例代码</p>
<p>spectator
•spectator:boolean= false
如果为真(true)，则玩家是一个幽灵，可以穿墙</p>
<p>enableJump
•enableJump:boolean= true
如果为假(false)，则不允许玩家跳跃
示例代码</p>
<p>enableDoubleJump
•enableDoubleJump:boolean= true
如果为假(false)，则不允许玩家二段跳跃
示例代码</p>
<p>walkSpeed
•walkSpeed:number= 0.22
最大步行速度</p>
<p>runSpeed
•runSpeed:number= 0.4
最大奔跑速度</p>
<p>runAcceleration
•runAcceleration:number= 0.35
奔跑加速度</p>
<p>jumpPower
•jumpPower:number= 0.96
跳跃力度</p>
<p>jumpSpeedFactor
•jumpSpeedFactor:number= 0.85
跳跃速度</p>
<p>jumpAccelerationFactor
•jumpAccelerationFactor:number= 0.55
跳跃加速率</p>
<p>doubleJumpPower
•doubleJumpPower:number= 0.9
二段跳力度</p>
<p>crouchSpeed
•crouchSpeed:number= 0.1
蹲着走路的速度</p>
<p>crouchAcceleration
•crouchAcceleration:number= 0.09
蹲着走路的加速度</p>
<p>flySpeed
•flySpeed:number= 2
最大飞行速度</p>
<p>flyAcceleration
•flyAcceleration:number= 2
飞行加速度</p>
<p>swimAcceleration
•swimAcceleration:number= 0.1
游泳加速度</p>
<p>swimSpeed
•swimSpeed:number= 0.4
最大游泳速度</p>
<p>walkAcceleration
•walkAcceleration:number= 0.19
步行加速度</p>
<p>disableInputDirection
<a href="https://box3.yuque.com/staff-khn556/wupvz3/glhsleip3t0eqduh">GameInputDirection</a>
禁用指定方向的摇杆输入偏移量，当横纵两个方向均被禁用时，将不显示此玩家的触屏虚拟摇杆。</p>
<p>查看玩家的状态</p>
<p>moveState
•moveState=<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zeoheeamz6dfaf60">GamePlayerMoveState</a>.FALL
玩家的运动状态，初始值为下落</p>
<p>walkState
•walkState=<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nfty4bko9nn3kyiv">GamePlayerWalkState</a>.NONE
玩家的步行状态，初始值为非步行中</p>
<p>控制音效</p>
<p>预设音效</p>
<p>action0Sound
•action0Sound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家按下'action0'按键（鼠标左键 / 虚拟按钮A）时，播放的音效。</p>
<p>action1Sound
•action1Sound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家按下'action1'按键（鼠标右键 / 虚拟按钮B）时，播放的音效。</p>
<p>crouchSound
•crouchSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家按下'crouchButton '按键进行蹲下时，播放的音效。</p>
<p>jumpSound
•jumpSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家按下'jumpButton '按键进行跳跃时，播放的音效。默认为'audio/jump.mp3'</p>
<p>doubleJumpSound
•doubleJumpSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家触发二段跳时，播放的音效。默认为'audio/double_jump.mp3'</p>
<p>landSound
•landSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
玩家落地时，播放的音效。默认为'audio/land.mp3'</p>
<p>enterWaterSound
•enterWaterSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家进入液体时，播放的音效。默认为'audio/dive.mp3'</p>
<p>leaveWaterSound
•leaveWaterSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家离开液体时，播放的音效。默认为'audio/splash.mp3'</p>
<p>swimSound
•swimSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家正在游泳时，播放的音效。默认为'audio/swim.mp3'
注：游泳的音效在前进时才会循环播放。如果在水中静止不动，不会播放音效。</p>
<p>spawnSound
•spawnSound:<a href="https://docs.box3.codemao.cn/box3soundeffect.html">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家重生时，播放的音效。默认为'audio/spawn.mp3'。通过player.onRespawn()触发</p>
<p>stepSound
•stepSound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
当玩家行走时，每迈出一步，播放的音效。默认为'audio/step.mp3'</p>
<p>startFlySound
•startFlySound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
玩家开始飞行时的音效。</p>
<p>stopFlySound
•stopFlySound:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
玩家结束飞行时播放的音效。</p>
<p>播放音效</p>
<p>sound
•sound:function
为指定的玩家播放声音，此声音仅该玩家能听见，其他玩家无法听到。
参数:
spec:{sample, gain, pitch} | string
●sample:string 必填，声音文件路径。可在文件管理器中上传自定义声音。如'audio/chat.mp3'
●gain?:number 可选，音量增益。正常为1，数值越大，声音越响。
●pitch?:number 可选，音高增益。正常为1，大于1，声音播放越快，小于1，声音播放越慢。
示例代码1</p>
<p>示例代码2</p>
<p>music
•music:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a>‹›= new GameSoundEffect()
为指定的玩家播放背景音乐（循环播放），此声音仅该玩家能听见，其他玩家无法听到。 背景音乐的音量会根据用户在[设置-声音]更改。</p>
<p>画面滤镜</p>
<p>colorLUT
•colorLUT:string= &quot;&quot;
用于渲染玩家所见游戏世界的色调
示例代码</p>
<p>动画</p>
<p>player.animate
可用这个函数来设定玩家的动画，变化颜色</p>
<p>社交</p>
<p>querySocial
(socialType: <a href="https://box3.yuque.com/staff-khn556/wupvz3/bxykxeicwinbyle1">SocialType</a>) =&gt; Promise&lt;number[]&gt;
· 查询当前玩家的社交关系，支持查询：
· 关注
· 粉丝
· 好友
· 返回玩家 ID 列表</p>
<p>openUserProfileDialog
(userId: number) =&gt; void
对当前玩家，调起指定ID玩家的个人主页。</p>
<p>商城</p>
<p>openMarketplace
●openMarketplace：function
打开游戏商店对话框，根据玩家传入的“商品ID”显示相应的产品。</p>
<p>函数声明：
▸ (productIds: number[]): void
参数：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>productIds</td>
<td>number[]</td>
<td>商品ID数组</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{ entity }</span>) =&gt;</span> {

  <span class="hljs-comment">// product ID1: 160000000000001  ID2: 160000000000002</span>

  entity.player.openMarketplace([<span class="hljs-number">160000000000001</span>, <span class="hljs-number">160000000000002</span>])

});
</div></code></pre>
<p>投喂记录</p>
<p>getMiaoShells
●getMiaoShells：function
获取此用户在当前地图下累计打赏的喵贝壳</p>
<p>函数声明：
▸ (): Promise <code>&lt;number&gt;</code>
示例代码</p>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-keyword">async</span> ({ entity }) =&gt; {

  <span class="hljs-comment">// 获取用户在当前地图下累计打赏的喵贝壳</span>

  <span class="hljs-keyword">const</span> count = <span class="hljs-keyword">await</span> entity.player.getMiaoShells()

  entity.player.directMessage(<span class="hljs-string">`我累计打赏的喵贝壳：<span class="hljs-subst">${count}</span>`</span>)

})
</div></code></pre>
<h2 id="gamepurchasesuccessevent-%E8%B4%AD%E4%B9%B0%E6%88%90%E5%8A%9F%E4%BA%8B%E4%BB%B6" tabindex="-1">GamePurchaseSuccessEvent 购买成功事件</h2>
<p>类 - GamePurchaseSuccessEvent
当玩家成功购买物品时触发的事件</p>
<p>tick
• tick: number
购买成功事件发生的时间</p>
<p>userId
• userId: string
触发购买事件的玩家userId</p>
<p>productId
• productId: number
购买商品的ID</p>
<p>orderId
• orderId: number
购买成功的订单号</p>
<h2 id="gamequaternion-%E5%9B%9B%E5%85%83%E6%95%B0" tabindex="-1">GameQuaternion 四元数</h2>
<p>类 - GameQuaternion</p>
<p>构造函数
+new GameQuaternion(w: number,x: number,y: number,z: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>number</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>属性</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td></td>
</tr>
</tbody>
</table>
<p>方法</p>
<p>add
▸add(v:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>angle
▸angle(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):number
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:number</p>
<p>clone
▸clone():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>copy
▸copy(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>q`</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>div
▸div(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>‹›
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>‹›</p>
<p>dot
▸dot(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):number
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:number</p>
<p>equals
▸equals(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>,tolerance: number):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>Default</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>tolerance</td>
<td>number</td>
<td>0.0001</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>getAxisAngle
▸getAxisAngle(q: any):object
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td>any</td>
</tr>
</tbody>
</table>
<p>返回值:object
●angle:number
●axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></p>
<p>inv
▸inv():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>mag
▸mag():number
返回值:number</p>
<p>mul
▸mul(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>normalize
▸normalize():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>rotateX
▸rotateX(_rad: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>_rad</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>rotateY
▸rotateY(_rad: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>_rad</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>rotateZ
▸rotateZ(_rad: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>_rad</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>set
▸set(w: number,x: number,y: number,z: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>number</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>slerp
▸slerp(q:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>,n: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
</tr>
<tr>
<td>n</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>sqrMag
▸sqrMag():number
返回值:number</p>
<p>sub
▸sub(v:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>toString
▸toString():string
返回值:string</p>
<p>StaticfromAxisAngle
▸fromAxisAngle(axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>,rad: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>axis</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
</tr>
<tr>
<td>rad</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>StaticfromEuler
▸fromEuler(x: number,y: number,z: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<p>StaticrotationBetween
▸rotationBetween(a:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>,b:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
</tr>
<tr>
<td>b</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></p>
<h2 id="gameraycastresult-%E5%B0%84%E7%BA%BF%E6%A3%80%E6%B5%8B%E7%BB%93%E6%9E%9C" tabindex="-1">GameRaycastResult 射线检测结果</h2>
<p>类 - GameRaycastResult
射线检测(raycast)的结果，包含射线和所击中目标的信息。</p>
<p>direction
•direction:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
射线的方向</p>
<p>distance
•distance:number
射线穿越的距离</p>
<p>hit
•hit:boolean
如果为真，则射线击中目标</p>
<p>hitEntity
•hitEntity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>| null
射线所击中的实体</p>
<p>hitPosition
•hitPosition:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
射线击中的位置</p>
<p>hitVoxel
•hitVoxel:number
射线所击中的方块id (如未击中方块，则为0)</p>
<p>normal
•normal:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
射线所击中平面的法向量</p>
<p>origin
•origin:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
射线的起点</p>
<p>voxelIndex
•voxelIndex:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
如果射线击中的是方块，则返回所击中方块的网格坐标。</p>
<h2 id="gamerespawnevent-%E5%AE%9E%E4%BD%93%E5%A4%8D%E6%B4%BB%E4%BA%8B%E4%BB%B6" tabindex="-1">GameRespawnEvent 实体复活事件</h2>
<p>类 - GameRespawnEvent
当实体复活时触发的事件</p>
<p>tick
• tick: number
事件发生的时间</p>
<p>entity
• entity: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
复活的实体</p>
<h2 id="gamergbcolor-%E8%89%B2%E5%BD%A9" tabindex="-1">GameRGBColor 色彩</h2>
<p>类 - GameRGBColor</p>
<p>GameRGBColor
+new GameRGBColor(r: number,g: number,b: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>number</td>
</tr>
<tr>
<td>g</td>
<td>number</td>
</tr>
<tr>
<td>b</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>注意，此处输入的颜色值范围在(0-1) 之间。
如果需要使用 RGB 255，可以将颜色值除于255，即可得到0-1的数值。</p>
<p>方法</p>
<p>add
▸add(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>clone
▸clone():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>copy
▸ copy(c: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>): <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>div
▸div(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>equals
▸equals(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>,tolerance: number):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>-</td>
</tr>
<tr>
<td>tolerance</td>
<td>number</td>
<td>0.0001</td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>lerp
▸lerp(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>,n: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
<tr>
<td>n</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>mul
▸mul(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>set
▸set(r: number,g: number,b: number,a: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>number</td>
</tr>
<tr>
<td>g</td>
<td>number</td>
</tr>
<tr>
<td>b</td>
<td>number</td>
</tr>
<tr>
<td>a</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>sub
▸sub(rgb:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgb</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<p>toRGBA
▸toRGBA():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>toString
▸toString():string
返回值:string</p>
<p>Staticrandom
▸random():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></p>
<h2 id="gamergbacolor-%E9%80%8F%E6%98%8E%E8%89%B2%E5%BD%A9" tabindex="-1">GameRGBAColor 透明色彩</h2>
<p>类 - GameRGBAColor</p>
<p>GameRGBAColor
new GameRGBAColor(r: number,g: number,b: number,a: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>number (0-1)</td>
</tr>
<tr>
<td>g</td>
<td>number (0-1)</td>
</tr>
<tr>
<td>b</td>
<td>number (0-1)</td>
</tr>
<tr>
<td>a</td>
<td>number (0-1)</td>
</tr>
</tbody>
</table>
<p>示例代码</p>
<p>注意，此处输入的颜色值范围在(0-1) 之间。
如果需要使用 RGB 255，可以将颜色值除于255，即可得到0-1的数值。</p>
<p>方法</p>
<p>add
▸add(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>clone
▸clone():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>copy
▸copy(c:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>div
▸div(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>equals
▸equals(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>,tolerance: number):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>-</td>
</tr>
<tr>
<td>tolerance</td>
<td>number</td>
<td>0.0001</td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>lerp
▸lerp(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>,n: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
<tr>
<td>n</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>mul
▸mul(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>set
▸set(r: number,g: number,b: number,a: number):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>number</td>
</tr>
<tr>
<td>g</td>
<td>number</td>
</tr>
<tr>
<td>b</td>
<td>number</td>
</tr>
<tr>
<td>a</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>sub
▸sub(rgba:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>):<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>rgba</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></p>
<p>toString
▸toString():string
返回值:string</p>
<h2 id="gamestorage-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%A8%A1%E5%9D%97" tabindex="-1">GameStorage 数据存储模块</h2>
<p>类 - GameStorage
数据存储模块，管理游戏中的数据。</p>
<p>storage  对象是整个 Data Storage API的入口</p>
<p>getDataStorage
• getDataStorage : function
连接指定数据存储空间，如果不存在则创建一个新的空间。</p>
<p>函数声明
▸ (key: string): <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage</a></p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>指定空间的名称，长度不超过50个字符</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage</a></p>
<p>示例代码</p>
<p>getGroupStorage
• getGroupStorage : function
连接地图组内指定数据存储空间，如果不存在则创建一个新的空间。此方法拿到的<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage</a>为主图和副图共同维护的数据存储空间。</p>
<p>函数声明
▸ (key: string): <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage</a></p>
<p>参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>string</td>
<td>指定空间的名称，长度不超过50个字符</td>
</tr>
</tbody>
</table>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yifnc28uw0e9d8hl">GameDataStorage</a></p>
<p>示例代码</p>
<p>主图获取玩家数据</p>
<pre class='hljs'><code><div><span class="hljs-comment">// 在拓展地图中，如果希望主图和副图共用玩家数据，则都用getGroupStorage获取</span>

<span class="hljs-keyword">const</span> userStorage = storage.getGroupStorage(<span class="hljs-string">&#x27;users&#x27;</span>)
</div></code></pre>
<p>副图获取玩家数据</p>
<pre class='hljs'><code><div><span class="hljs-keyword">const</span> userStorage = storage.getGroupStorage(<span class="hljs-string">&#x27;users&#x27;</span>)
</div></code></pre>
<h2 id="gametickevent-%E6%97%B6%E9%92%9F%E4%BA%8B%E4%BB%B6" tabindex="-1">GameTickEvent 时钟事件</h2>
<p>类 - GameTickEvent
每一刻(tick)触发一次的事件，由<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#mIgHE">GameWorld.onTick</a>触发。
示例代码</p>
<pre class='hljs'><code><div>world.onTick((tickEvent)
<span class="hljs-built_in">console</span>.log(tickEvent.elapsedTimeMS);

    <span class="hljs-built_in">console</span>.log(tickEvent.prevTick);

    <span class="hljs-built_in">console</span>.log(tickEvent.skip);

    <span class="hljs-built_in">console</span>.log(tickEvent.tick);

})
</div></code></pre>
<p>elapsedTimeMS
•elapsedTimeMS:number
Wall clock time between ticks 两个时刻之间的时间间隔</p>
<p>prevTick
•prevTick:number
Last tick which was handled 上一个已处理的时刻</p>
<p>skip
•skip:boolean
是否因为代码延迟而跳过了某些时刻</p>
<p>tick
•tick:number
事件触发时间</p>
<h2 id="gametriggerevent-%E5%8C%BA%E5%9F%9F%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6" tabindex="-1">GameTriggerEvent 区域触发事件</h2>
<p>类 - GameTriggerEvent
当实体/玩家触发区域的事件。
由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8#rwvcl">GameZone.onEnter</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8#kUa9I">GameZone.onLeave</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8#AWgrJ">GameZone.nextEnter</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8#pIt6d">GameZone.nextLeave</a> 触发</p>
<p>参数
●entity
●tick</p>
<p>参数</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
触发事件的实体</p>
<p>tick
•tick:number
触发事件的时间</p>
<h2 id="gamevector3-%E4%B8%89%E7%BB%B4%E5%90%91%E9%87%8F" tabindex="-1">GameVector3 三维向量</h2>
<p>类 - GameVector3</p>
<p>构造函数
new GameVector3(x: number, y: number, z: number): GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>属性</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>方法</p>
<p>add
▸ add(v: GameVector3): GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>angle
▸angle(v:GameVector3):number
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:number</p>
<p>clone
▸clone():GameVector3
返回值:GameVector3</p>
<p>copy
▸copy(v:GameVector3):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:void</p>
<p>cross
▸cross(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>distance
▸distance(v:GameVector3):number
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:number</p>
<p>div
▸div(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>dot
▸dot(v:GameVector3):number
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:number</p>
<p>equals
▸equals(v:GameVector3,tolerance: number):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
<td>-</td>
</tr>
<tr>
<td>tolerance</td>
<td>number</td>
<td>0.0001</td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>exactEquals
▸exactEquals(v:GameVector3):boolean
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:boolean</p>
<p>lerp
▸lerp(v:GameVector3,n: number):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
<tr>
<td>n</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>mag
▸mag():number
返回值:number</p>
<p>max
▸max(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>min
▸min(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>mul
▸mul(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v`</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>normalize
▸normalize():GameVector3
返回值:GameVector3</p>
<p>scale
▸scale(n: number):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>n</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>set
▸set(x: number,y: number,z: number):void
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
</tr>
</tbody>
</table>
<p>返回值:void</p>
<p>sqrMag
▸sqrMag():number
返回值:number</p>
<p>sub
▸sub(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<p>toString
▸toString():string
返回值:string</p>
<p>towards
▸towards(v:GameVector3):GameVector3
参数:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>GameVector3</td>
</tr>
</tbody>
</table>
<p>返回值:GameVector3</p>
<h2 id="gamevoxelcontact-%E6%96%B9%E5%9D%97%E7%A2%B0%E6%92%9E%E6%95%B0%E6%8D%AE" tabindex="-1">GameVoxelContact 方块碰撞数据</h2>
<p>VoxelContact方块碰撞参数
被实体触碰的方块属性</p>
<p>x
•x:number
被触碰方块的x坐标</p>
<p>y
•y:number
被触碰方块的y坐标</p>
<p>z
•z:number
被触碰方块的z坐标</p>
<p>voxel
•voxel:number
被触碰的方块id</p>
<p>force
•force:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
触碰的力</p>
<p>axis
•axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
触碰的分离轴，也就是触碰后物体弹飞的方向</p>
<h2 id="gamevoxelcontactevent-%E6%96%B9%E5%9D%97%E7%A2%B0%E6%92%9E%E4%BA%8B%E4%BB%B6" tabindex="-1">GameVoxelContactEvent 方块碰撞事件</h2>
<p>当实体触碰方块时触发的事件。
由 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#JZHtR">GameWorld.onVoxelContact</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#qtJQI">GameWorld.onVoxelSeparate</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#Lr61W">GameEntity.onVoxelContact</a>, <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#zfEFq">GameEntity.onVoxelSeparate</a> 触发</p>
<p>axis
•axis:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
触碰的分离轴，也就是触碰后物体弹飞的方向</p>
<p>entity
•entity:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
触碰到方块的实体</p>
<p>force
•force:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
碰撞力</p>
<p>tick
•tick:number
实体触碰方块的时间</p>
<p>voxel
•voxel:number
被触碰的方块id</p>
<p>x
•x:number
被触碰方块的x坐标</p>
<p>y
•y:number
被触碰方块的y坐标</p>
<p>z
•z:number
被触碰方块的z坐标</p>
<h2 id="gamevoxels-%E6%96%B9%E5%9D%97%E6%A8%A1%E5%9D%97" tabindex="-1">GameVoxels 方块模块</h2>
<p>类 - GameVoxels
GameVoxels是控制Box3所有方块的接口，你可以使用 voxels 对象控制地形变化，利用循环语法批量生成/销毁方块，获取某个方块的类型、名称、旋转角度等。</p>
<p>Basic 基础</p>
<p>voxels.shape
属性     属性值类型：GameVector3     默认值：{x: 128, y: 128, z: 128}
世界地形最大尺寸。
目前，Box3地形最大可支持128x128x128，未来将开放更大的地形，敬请期待。</p>
<p>Voxel Name 方块名称</p>
<p>voxels.id()
方法
将方块名称转换为方块id
参数 name</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>方块名称</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>方块 id</td>
</tr>
</tbody>
</table>
<p>voxels.name()
方法
将方块id转换为方块名称
参数 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>方块id</td>
</tr>
</tbody>
</table>
<p>返回值 name</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>方块名称</td>
</tr>
</tbody>
</table>
<p>setVoxel 放置方块
如果你想要地图在非运行状态，通过脚本在场景中快速建造，可以尝试以下操作：
1开启编辑器右上角的调试模式(小虫子图标)
2使用窗口底部的控制台，输入对应的代码。
即使游戏没有运行，也能使部分代码直接生效。
💡提示
使用控制台执行脚本前，请务必要小心，提前做好项目备份工作。一旦代码生效后，有可能造成无法恢复的情况。
要操作方块时，建议先使用空白地图对代码进行充分测试，效果满意后，再操作正式的地图。</p>
<p>voxels.setVoxel()
方法
在指定的坐标位置放置一个方块。
参数 x, y, z, voxel, rotation</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
<td>必填，放置位置的x坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>必填，放置位置的y坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>必填，放置位置的z坐标</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>string</td>
</tr>
<tr>
<td>rotation</td>
<td>number</td>
<td>string</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>新的方块id</td>
</tr>
</tbody>
</table>
<p>💡提示
若方块名称为'air' 或者方块id为0，则会打破
简单示例</p>
<p>将脚下的方块全部变成雪地</p>
<p>删除地面至上空的所有方块</p>
<p>方块自动往上增长</p>
<p>利用方块显示字母</p>
<p>利用方块显示文章</p>
<p>创建一个棋盘</p>
<p>voxels.setVoxelId()
方法
使用方块ID，直接在指定的坐标位置放置方块。执行效率比<a href="https://box3.yuque.com/staff-khn556/wupvz3/gkz7g1wazf5izpfy#kuAQe">voxels.setVoxel()</a>更快。
参数 x, y, z, voxel</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
<td>必填，放置的方块 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>必填，放置的方块 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>必填，放置的方块 z 坐标</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>必填，放置的方块 id</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>返回指定位置的方块id</td>
</tr>
</tbody>
</table>
<p>getVoxel 获取方块</p>
<p>voxels.getVoxel()
方法
获取某个坐标位置的方块id
参数 x, y, z</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
<td>必填，获取的方块 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>必填，获取的方块 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>必填，获取的方块 z 坐标</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>返回指定位置的方块id</td>
</tr>
</tbody>
</table>
<p>voxels.getVoxelId()
方法
直接获取指定位置的方块ID。执行效率比<a href="https://box3.yuque.com/staff-khn556/wupvz3/gkz7g1wazf5izpfy#JvOpR">voxels.getVoxel()</a>更快。
参数 x, y, z</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
<td>必填，获取的方块 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>必填，获取的方块 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>必填，获取的方块 z 坐标</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>返回指定位置的方块id</td>
</tr>
</tbody>
</table>
<p>voxels.getVoxelRotation()
方法
获取某个坐标位置的方块旋转码
参数 x, y, z</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>number</td>
<td>必填，获取的方块 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>必填，获取的方块 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>必填，获取的方块 z 坐标</td>
</tr>
</tbody>
</table>
<p>返回值 id</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>返回指定位置的方块id</td>
</tr>
</tbody>
</table>
<p>Voxels Type 方块类型</p>
<p>voxels.VoxelTypes
属性     属性值类型：Array     默认值：String[]
返回包含所有方块名称的数组。</p>
<p>Build 快速建造
此处提供一些快速建造特定几何造型的代码片段，可供参考。
实心矩形</p>
<p>空心矩形</p>
<p>实心球体</p>
<p>圆柱体</p>
<p>生成楼梯(+x)</p>
<p>生成楼梯(-x)</p>
<p>💡提示
方块id和名称对照表</p>
<table>
<thead>
<tr>
<th>方块id</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>air</td>
</tr>
<tr>
<td>3</td>
<td>add</td>
</tr>
<tr>
<td>5</td>
<td>subtract</td>
</tr>
<tr>
<td>7</td>
<td>multiply</td>
</tr>
<tr>
<td>9</td>
<td>divide</td>
</tr>
<tr>
<td>11</td>
<td>equal</td>
</tr>
<tr>
<td>13</td>
<td>exclamation_mark</td>
</tr>
<tr>
<td>15</td>
<td>question_mark</td>
</tr>
<tr>
<td>17</td>
<td>zero</td>
</tr>
<tr>
<td>19</td>
<td>one</td>
</tr>
<tr>
<td>21</td>
<td>two</td>
</tr>
<tr>
<td>23</td>
<td>three</td>
</tr>
<tr>
<td>25</td>
<td>four</td>
</tr>
<tr>
<td>27</td>
<td>five</td>
</tr>
<tr>
<td>29</td>
<td>six</td>
</tr>
<tr>
<td>31</td>
<td>seven</td>
</tr>
<tr>
<td>33</td>
<td>eight</td>
</tr>
<tr>
<td>35</td>
<td>nine</td>
</tr>
<tr>
<td>37</td>
<td>A</td>
</tr>
<tr>
<td>39</td>
<td>B</td>
</tr>
<tr>
<td>41</td>
<td>C</td>
</tr>
<tr>
<td>43</td>
<td>D</td>
</tr>
<tr>
<td>45</td>
<td>E</td>
</tr>
<tr>
<td>47</td>
<td>F</td>
</tr>
<tr>
<td>49</td>
<td>G</td>
</tr>
<tr>
<td>51</td>
<td>H</td>
</tr>
<tr>
<td>53</td>
<td>I</td>
</tr>
<tr>
<td>55</td>
<td>J</td>
</tr>
<tr>
<td>57</td>
<td>K</td>
</tr>
<tr>
<td>59</td>
<td>L</td>
</tr>
<tr>
<td>61</td>
<td>M</td>
</tr>
<tr>
<td>63</td>
<td>N</td>
</tr>
<tr>
<td>65</td>
<td>O</td>
</tr>
<tr>
<td>67</td>
<td>P</td>
</tr>
<tr>
<td>69</td>
<td>Q</td>
</tr>
<tr>
<td>71</td>
<td>R</td>
</tr>
<tr>
<td>73</td>
<td>S</td>
</tr>
<tr>
<td>75</td>
<td>T</td>
</tr>
<tr>
<td>77</td>
<td>U</td>
</tr>
<tr>
<td>79</td>
<td>V</td>
</tr>
<tr>
<td>81</td>
<td>W</td>
</tr>
<tr>
<td>83</td>
<td>X</td>
</tr>
<tr>
<td>85</td>
<td>Y</td>
</tr>
<tr>
<td>87</td>
<td>Z</td>
</tr>
<tr>
<td>89</td>
<td>cadet_blue</td>
</tr>
<tr>
<td>91</td>
<td>sky_blue</td>
</tr>
<tr>
<td>93</td>
<td>powder_blue</td>
</tr>
<tr>
<td>95</td>
<td>dark_gray</td>
</tr>
<tr>
<td>97</td>
<td>light_gray</td>
</tr>
<tr>
<td>99</td>
<td>olive_green</td>
</tr>
<tr>
<td>101</td>
<td>yellow_green</td>
</tr>
<tr>
<td>103</td>
<td>pale_green</td>
</tr>
<tr>
<td>105</td>
<td>red</td>
</tr>
<tr>
<td>107</td>
<td>dark_red</td>
</tr>
<tr>
<td>109</td>
<td>brick_red</td>
</tr>
<tr>
<td>111</td>
<td>medium_gray</td>
</tr>
<tr>
<td>113</td>
<td>dark_slate_blue</td>
</tr>
<tr>
<td>115</td>
<td>pink</td>
</tr>
<tr>
<td>117</td>
<td>sakura_pink</td>
</tr>
<tr>
<td>119</td>
<td>orange</td>
</tr>
<tr>
<td>121</td>
<td>lemon</td>
</tr>
<tr>
<td>123</td>
<td>stained_glass</td>
</tr>
<tr>
<td>125</td>
<td>dirt</td>
</tr>
<tr>
<td>127</td>
<td>grass</td>
</tr>
<tr>
<td>129</td>
<td>stone</td>
</tr>
<tr>
<td>131</td>
<td>green_leaf</td>
</tr>
<tr>
<td>133</td>
<td>acacia</td>
</tr>
<tr>
<td>135</td>
<td>sand</td>
</tr>
<tr>
<td>137</td>
<td>plank_01</td>
</tr>
<tr>
<td>139</td>
<td>plank_02</td>
</tr>
<tr>
<td>141</td>
<td>plank_03</td>
</tr>
<tr>
<td>143</td>
<td>plank_04</td>
</tr>
<tr>
<td>145</td>
<td>ice_brick</td>
</tr>
<tr>
<td>147</td>
<td>light_grey_stone_brick</td>
</tr>
<tr>
<td>149</td>
<td>grey_stone_brick</td>
</tr>
<tr>
<td>151</td>
<td>gold_trim_brick</td>
</tr>
<tr>
<td>153</td>
<td>red_brick</td>
</tr>
<tr>
<td>155</td>
<td>quartz_brick</td>
</tr>
<tr>
<td>157</td>
<td>lantern_01</td>
</tr>
<tr>
<td>159</td>
<td>lantern_02</td>
</tr>
<tr>
<td>160</td>
<td>window</td>
</tr>
<tr>
<td>162</td>
<td>cross_window</td>
</tr>
<tr>
<td>164</td>
<td>geometric_window_01</td>
</tr>
<tr>
<td>166</td>
<td>geometric_window_02</td>
</tr>
<tr>
<td>169</td>
<td>snow</td>
</tr>
<tr>
<td>170</td>
<td>glass</td>
</tr>
<tr>
<td>172</td>
<td>color_glass</td>
</tr>
<tr>
<td>175</td>
<td>black</td>
</tr>
<tr>
<td>177</td>
<td>white</td>
</tr>
<tr>
<td>179</td>
<td>wooden_box</td>
</tr>
<tr>
<td>181</td>
<td>board_01</td>
</tr>
<tr>
<td>183</td>
<td>board_02</td>
</tr>
<tr>
<td>185</td>
<td>stripe_01</td>
</tr>
<tr>
<td>187</td>
<td>stripe_02</td>
</tr>
<tr>
<td>189</td>
<td>stripe_03</td>
</tr>
<tr>
<td>191</td>
<td>stripe_04</td>
</tr>
<tr>
<td>193</td>
<td>stripe_05</td>
</tr>
<tr>
<td>195</td>
<td>carpet_01</td>
</tr>
<tr>
<td>197</td>
<td>carpet_02</td>
</tr>
<tr>
<td>199</td>
<td>carpet_03</td>
</tr>
<tr>
<td>201</td>
<td>carpet_04</td>
</tr>
<tr>
<td>203</td>
<td>carpet_05</td>
</tr>
<tr>
<td>205</td>
<td>carpet_06</td>
</tr>
<tr>
<td>207</td>
<td>carpet_07</td>
</tr>
<tr>
<td>209</td>
<td>palace_eaves_01</td>
</tr>
<tr>
<td>211</td>
<td>palace_eaves_02</td>
</tr>
<tr>
<td>213</td>
<td>palace_eaves_03</td>
</tr>
<tr>
<td>215</td>
<td>palace_eaves_04</td>
</tr>
<tr>
<td>217</td>
<td>palace_eaves_05</td>
</tr>
<tr>
<td>219</td>
<td>palace_eaves_06</td>
</tr>
<tr>
<td>221</td>
<td>palace_eaves_07</td>
</tr>
<tr>
<td>223</td>
<td>palace_eaves_08</td>
</tr>
<tr>
<td>225</td>
<td>roof_red</td>
</tr>
<tr>
<td>227</td>
<td>roof_purple</td>
</tr>
<tr>
<td>229</td>
<td>roof_green</td>
</tr>
<tr>
<td>231</td>
<td>roof_blue_04</td>
</tr>
<tr>
<td>233</td>
<td>roof_yellow</td>
</tr>
<tr>
<td>235</td>
<td>carpet_08</td>
</tr>
<tr>
<td>237</td>
<td>carpet_09</td>
</tr>
<tr>
<td>239</td>
<td>carpet_10</td>
</tr>
<tr>
<td>241</td>
<td>carpet_11</td>
</tr>
<tr>
<td>243</td>
<td>carpet_12</td>
</tr>
<tr>
<td>245</td>
<td>carpet_13</td>
</tr>
<tr>
<td>247</td>
<td>stainless_steel</td>
</tr>
<tr>
<td>249</td>
<td>ice_wall</td>
</tr>
<tr>
<td>251</td>
<td>leaf_01</td>
</tr>
<tr>
<td>253</td>
<td>leaf_02</td>
</tr>
<tr>
<td>255</td>
<td>palace_roof</td>
</tr>
<tr>
<td>257</td>
<td>wood</td>
</tr>
<tr>
<td>259</td>
<td>red_brick_floor</td>
</tr>
<tr>
<td>261</td>
<td>red_brick_wall</td>
</tr>
<tr>
<td>263</td>
<td>palace_floor</td>
</tr>
<tr>
<td>264</td>
<td>palace_carving</td>
</tr>
<tr>
<td>267</td>
<td>stone_pillar_03</td>
</tr>
<tr>
<td>269</td>
<td>stone_pillar_04</td>
</tr>
<tr>
<td>271</td>
<td>stone_pillar_05</td>
</tr>
<tr>
<td>273</td>
<td>stone_pillar_06</td>
</tr>
<tr>
<td>275</td>
<td>stone_wall</td>
</tr>
<tr>
<td>276</td>
<td>blue_glass</td>
</tr>
<tr>
<td>278</td>
<td>green_glass</td>
</tr>
<tr>
<td>281</td>
<td>red_light</td>
</tr>
<tr>
<td>283</td>
<td>orange_light</td>
</tr>
<tr>
<td>285</td>
<td>yellow_light</td>
</tr>
<tr>
<td>287</td>
<td>green_light</td>
</tr>
<tr>
<td>289</td>
<td>indigo_light</td>
</tr>
<tr>
<td>291</td>
<td>blue_light</td>
</tr>
<tr>
<td>293</td>
<td>purple</td>
</tr>
<tr>
<td>295</td>
<td>pink_light</td>
</tr>
<tr>
<td>297</td>
<td>mint_green_light</td>
</tr>
<tr>
<td>299</td>
<td>white_light</td>
</tr>
<tr>
<td>301</td>
<td>warm_yellow_light</td>
</tr>
<tr>
<td>302</td>
<td>black_glass</td>
</tr>
<tr>
<td>304</td>
<td>red_glass</td>
</tr>
<tr>
<td>307</td>
<td>palace_lamp</td>
</tr>
<tr>
<td>309</td>
<td>board_03</td>
</tr>
<tr>
<td>311</td>
<td>board_04</td>
</tr>
<tr>
<td>313</td>
<td>board_05</td>
</tr>
<tr>
<td>315</td>
<td>board_06</td>
</tr>
<tr>
<td>317</td>
<td>dark_grass</td>
</tr>
<tr>
<td>319</td>
<td>greenbelt_L</td>
</tr>
<tr>
<td>321</td>
<td>greenbelt_L1</td>
</tr>
<tr>
<td>323</td>
<td>stone_brick_01</td>
</tr>
<tr>
<td>325</td>
<td>stone_brick_02</td>
</tr>
<tr>
<td>327</td>
<td>dark_stone</td>
</tr>
<tr>
<td>329</td>
<td>dark_brick_00</td>
</tr>
<tr>
<td>331</td>
<td>dark_brick_01</td>
</tr>
<tr>
<td>333</td>
<td>dark_brick_02</td>
</tr>
<tr>
<td>335</td>
<td>stone_wall_01</td>
</tr>
<tr>
<td>337</td>
<td>pink_cake</td>
</tr>
<tr>
<td>339</td>
<td>macaroon</td>
</tr>
<tr>
<td>341</td>
<td>biscuit</td>
</tr>
<tr>
<td>343</td>
<td>snowland</td>
</tr>
<tr>
<td>345</td>
<td>polar_region</td>
</tr>
<tr>
<td>347</td>
<td>polar_ice</td>
</tr>
<tr>
<td>349</td>
<td>blue_surface_01</td>
</tr>
<tr>
<td>351</td>
<td>blue_surface_02</td>
</tr>
<tr>
<td>353</td>
<td>purple_surface_01</td>
</tr>
<tr>
<td>355</td>
<td>purple_surface_02</td>
</tr>
<tr>
<td>357</td>
<td>dark_surface</td>
</tr>
<tr>
<td>359</td>
<td>rock</td>
</tr>
<tr>
<td>361</td>
<td>palace_cloud</td>
</tr>
<tr>
<td>363</td>
<td>blue</td>
</tr>
<tr>
<td>364</td>
<td>water</td>
</tr>
<tr>
<td>367</td>
<td>turquoise</td>
</tr>
<tr>
<td>369</td>
<td>dark_orchid</td>
</tr>
<tr>
<td>371</td>
<td>medium_orchid</td>
</tr>
<tr>
<td>373</td>
<td>medium_purple</td>
</tr>
<tr>
<td>375</td>
<td>medium_violet_red</td>
</tr>
<tr>
<td>377</td>
<td>maroon</td>
</tr>
<tr>
<td>379</td>
<td>coffee_gray</td>
</tr>
<tr>
<td>381</td>
<td>peru</td>
</tr>
<tr>
<td>383</td>
<td>dark_salmon</td>
</tr>
<tr>
<td>385</td>
<td>navajo_white</td>
</tr>
<tr>
<td>387</td>
<td>orange_red</td>
</tr>
<tr>
<td>389</td>
<td>medium_yellow</td>
</tr>
<tr>
<td>391</td>
<td>medium_green</td>
</tr>
<tr>
<td>393</td>
<td>sienna</td>
</tr>
<tr>
<td>395</td>
<td>mint_green</td>
</tr>
<tr>
<td>397</td>
<td>medium_spring_green</td>
</tr>
<tr>
<td>398</td>
<td>ice</td>
</tr>
<tr>
<td>401</td>
<td>crane_roof_01</td>
</tr>
<tr>
<td>403</td>
<td>crane_roof_02</td>
</tr>
<tr>
<td>405</td>
<td>crane_lantern</td>
</tr>
<tr>
<td>407</td>
<td>roof_grey</td>
</tr>
<tr>
<td>408</td>
<td>palace_window</td>
</tr>
<tr>
<td>411</td>
<td>woodstone_12</td>
</tr>
<tr>
<td>412</td>
<td>strawberry_juice</td>
</tr>
<tr>
<td>414</td>
<td>lime_juice</td>
</tr>
<tr>
<td>416</td>
<td>blueberry_juice</td>
</tr>
<tr>
<td>418</td>
<td>lemon_juice</td>
</tr>
<tr>
<td>420</td>
<td>grape_juice</td>
</tr>
<tr>
<td>422</td>
<td>orange_juice</td>
</tr>
<tr>
<td>424</td>
<td>milk</td>
</tr>
<tr>
<td>426</td>
<td>soy_sauce</td>
</tr>
<tr>
<td>428</td>
<td>coffee</td>
</tr>
<tr>
<td>430</td>
<td>peach_juice</td>
</tr>
<tr>
<td>433</td>
<td>board0</td>
</tr>
<tr>
<td>435</td>
<td>board1</td>
</tr>
<tr>
<td>437</td>
<td>board2</td>
</tr>
<tr>
<td>439</td>
<td>board3</td>
</tr>
<tr>
<td>441</td>
<td>board4</td>
</tr>
<tr>
<td>443</td>
<td>board5</td>
</tr>
<tr>
<td>445</td>
<td>board6</td>
</tr>
<tr>
<td>447</td>
<td>board7</td>
</tr>
<tr>
<td>449</td>
<td>board8</td>
</tr>
<tr>
<td>451</td>
<td>board9</td>
</tr>
<tr>
<td>453</td>
<td>board10</td>
</tr>
<tr>
<td>455</td>
<td>board11</td>
</tr>
<tr>
<td>457</td>
<td>board12</td>
</tr>
<tr>
<td>459</td>
<td>board13</td>
</tr>
<tr>
<td>461</td>
<td>board14</td>
</tr>
<tr>
<td>463</td>
<td>board15</td>
</tr>
<tr>
<td>465</td>
<td>lava01</td>
</tr>
<tr>
<td>467</td>
<td>lava02</td>
</tr>
<tr>
<td>469</td>
<td>windygrass</td>
</tr>
<tr>
<td>471</td>
<td>conveyor</td>
</tr>
<tr>
<td>473</td>
<td>ledfloor01</td>
</tr>
<tr>
<td>475</td>
<td>ledfloor02</td>
</tr>
<tr>
<td>477</td>
<td>yellow_grass</td>
</tr>
<tr>
<td>479</td>
<td>express_box</td>
</tr>
<tr>
<td>481</td>
<td>television</td>
</tr>
<tr>
<td>483</td>
<td>bookshelf</td>
</tr>
<tr>
<td>485</td>
<td>ampersand</td>
</tr>
<tr>
<td>487</td>
<td>asterisk</td>
</tr>
<tr>
<td>489</td>
<td>at</td>
</tr>
<tr>
<td>491</td>
<td>backslash</td>
</tr>
<tr>
<td>493</td>
<td>bracket_close</td>
</tr>
<tr>
<td>495</td>
<td>bracket_open</td>
</tr>
<tr>
<td>497</td>
<td>caret</td>
</tr>
<tr>
<td>499</td>
<td>colon</td>
</tr>
<tr>
<td>501</td>
<td>comma</td>
</tr>
<tr>
<td>503</td>
<td>dollar</td>
</tr>
<tr>
<td>505</td>
<td>greater_than</td>
</tr>
<tr>
<td>507</td>
<td>less_than</td>
</tr>
<tr>
<td>509</td>
<td>paren_open</td>
</tr>
<tr>
<td>511</td>
<td>paren_close</td>
</tr>
<tr>
<td>513</td>
<td>percent</td>
</tr>
<tr>
<td>515</td>
<td>period</td>
</tr>
<tr>
<td>517</td>
<td>pound</td>
</tr>
<tr>
<td>519</td>
<td>quotation_mark</td>
</tr>
<tr>
<td>521</td>
<td>semicolon</td>
</tr>
<tr>
<td>523</td>
<td>slash</td>
</tr>
<tr>
<td>525</td>
<td>tilde</td>
</tr>
<tr>
<td>527</td>
<td>winter_leaf</td>
</tr>
<tr>
<td>529</td>
<td>leaf_03</td>
</tr>
<tr>
<td>531</td>
<td>leaf_04</td>
</tr>
<tr>
<td>533</td>
<td>leaf_05</td>
</tr>
<tr>
<td>535</td>
<td>honeycomb_01</td>
</tr>
<tr>
<td>537</td>
<td>honeycomb_02</td>
</tr>
<tr>
<td>539</td>
<td>white_grass</td>
</tr>
<tr>
<td>541</td>
<td>palm</td>
</tr>
</tbody>
</table>
<h2 id="gamewearable-%E7%A9%BF%E6%88%B4%E9%85%8D%E4%BB%B6" tabindex="-1">GameWearable 穿戴配件</h2>
<p>类 - GameWearable
用于在玩家身体部位可穿戴配件物体的参数与函数</p>
<p>参数
●bodyPart
●color
●emissive
●mesh
●metalness
●offset
●orientation
●player
●scale
●shininess</p>
<p>函数
●remove</p>
<p>控制穿戴配件的参数</p>
<p>bodyPart
•bodyPart:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fqfcrsh8mid6ook3">GameBodyPart</a>= GameBodyPart.HEAD
穿戴配件在玩家上的部位</p>
<p>color
•color:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(1, 1, 1)
穿戴配件的颜色</p>
<p>emissive
•emissive:number= 0
穿戴配件的发光度</p>
<p>mesh
•mesh:string= &quot;&quot;
穿戴配件的形状数据
e.g.mesh = 'mesh/my-mesh.vb'
注意:'mesh/my-mesh.vb'必须在文件列表中（Tips: 先将模型加到地图上，再删掉即可。）</p>
<p>metalness
•metalness:number= 0
穿戴配件的金属感</p>
<p>offset
•offset:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>‹›= new GameVector3(0, 0, 0)
穿戴配件的位移</p>
<p>orientation
•orientation:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a>‹›= new GameQuaternion(0, 1, 0, 0)
穿戴配件的旋转角度</p>
<p>player
•player:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a>| null= null
穿戴配件的玩家</p>
<p>scale
•scale:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>‹›= new GameVector3(1, 1, 1)
穿戴配件的缩放比例</p>
<p>shininess
•shininess:number= 0
穿戴配件的反光度</p>
<p>函数</p>
<p>remove
▸remove():void
Returns:void
示例代码</p>
<pre class='hljs'><code><div><span class="hljs-comment">// 在玩家离开液体时把在玩家身上所有的穿戴配件删除</span>

world.onFluidLeave(<span class="hljs-function">(<span class="hljs-params">{ entity }</span>) =&gt;</span> {

  <span class="hljs-keyword">if</span> (entity.isPlayer) {

    <span class="hljs-keyword">const</span> allWearables = entity.player.wearables();

    allWearables.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {

    item.remove();

    });

  }

});
</div></code></pre>
<h2 id="gameworld-%E4%B8%96%E7%95%8C%E6%A8%A1%E5%9D%97" tabindex="-1">GameWorld 世界模块</h2>
<p>类 - GameWorld
GameWorld这个类在当前地图是有全局唯一的实例 world，你可以使用world对象控制环境天气、物理重力、画面滤镜等全局场景属性，还可以在世界中创建、搜索实体，或监听世界中实体和玩家的碰撞、伤害、互动等事件。</p>
<p>Basics 基础</p>
<p>world.projectName
属性      属性值类型：string     默认值：无
本张地图名称，对应项目设置中的名称。
该属性是只读的，如需修改地图名称，请在编辑器菜单底部 [项目-编辑资料-地图名称] 进行修改。</p>
<p>world.onTick()
事件
这是世界的计时事件，每64毫秒触发一次，Tick计数加1。
监听此事件可以让世界以64毫秒为间隔循环执行代码。
在理想情况下，每Tick为64毫秒。若网络发生延迟，可能会有变化。
●onTick: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl">GameTickEvent</a>](%5BGameTickEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl))
●nextTick: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl">GameTickEvent</a>](%5BGameTickEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/iewkxcpddoqrt1vl))
返回值 GameTickEvent:{ tick, prevTick, elapsedTimeMS, skip }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
<tr>
<td>prevTick</td>
<td>number</td>
<td>上一个已处理的时刻</td>
</tr>
<tr>
<td>elapsedTimeMS</td>
<td>number</td>
<td>两个时刻之间的时间间隔(毫秒)</td>
</tr>
<tr>
<td>skip</td>
<td>boolean</td>
<td>是否因为延迟而跳过了某些 Tick</td>
</tr>
</tbody>
</table>
<p>示例代码1</p>
<p>示例代码2</p>
<p>world.currentTick
属性     属性值类型：number     默认值：0
世界当前的Tick计数。</p>
<p>Chat 聊天频道</p>
<p>world.say()
方法
向所有玩家广播一条消息。
参数 message</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>string</td>
<td>要广播的消息</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>循环喊话</p>
<p>高级计时器</p>
<p>world.onChat()
事件
当玩家在聊天窗口说话时触发</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>发起聊天的实体</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>聊天事件中说话的内容</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>聊天事件发生时间</td>
</tr>
</tbody>
</table>
<p>Player 玩家：加入/离开</p>
<p>world.onPlayerJoin()事件：当玩家加入地图时触发</p>
<p>返回值 GameEntityEvent:{ entity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>创建的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>所有玩家飞行</p>
<p>特定玩家进入地图提醒</p>
<p>world.onPlayerLeave()事件：
当玩家离开地图时触发
返回值 GameEntityEvent:{ entity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>离开地图的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>Input 点击/互动</p>
<p>world.onInteract()事件：
若实体开启了互动功能<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">enableInteract = true</a>，则玩家与实体进行互动时触发。
当玩家走进实体的互动范围，实体身上就会出现按键提示，玩家按下互动按钮(默认为键盘E按键)与该实体进行互动。
触发onInteract事件同时还会触发实体默认的互动音效
返回值 GameInteractEvent{ entity, targetEntity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>发起互动的实体</td>
</tr>
<tr>
<td>targetEntity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>收到互动请求的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>💡提示
想要和实体进行互动，需要先在编辑器中放置一个模型，并给他取一个名字。
这里的示范，将名字改为了'NPC'。</p>
<p>💡提示
通过通过监听onInteract事件，可以自定义互动时发生的行为。
比如，让<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#hurzg">实体说话</a>，或让玩家<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#soRHv">显示一个对话框</a></p>
<p>world.onClick()事件：
当玩家用鼠标点击实体时触发
返回值 GameInputEvent:{ entity, clicker, button, distance, clickerPosition, raycast, tick}</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>被点击的实体</td>
</tr>
<tr>
<td>clicker</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>&amp; {isPlayer:true,player:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a>}</td>
<td>发起点击事件的玩家</td>
</tr>
<tr>
<td>button</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">GameButtonType</a></td>
<td>点击的按钮，ACTION0 = 左键，ACTION1 = 右键</td>
</tr>
<tr>
<td>distance</td>
<td>number</td>
<td>玩家到被点击实体的距离</td>
</tr>
<tr>
<td>clickerPosition</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>点击鼠标的瞬间玩家所在位置</td>
</tr>
<tr>
<td>raycast</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult</a></td>
<td>按下按钮瞬间，从玩家视角投射的射线检测结果</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onPress()事件：
当玩家按下按钮时触发
返回值 GameInputEvent:{ button, entity, position, pressed, raycast, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>button</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">GameButtonType</a></td>
<td>玩家输入的按钮</td>
</tr>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>&amp; {isPlayer:true, player:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a>}</td>
<td>按下按钮的玩家</td>
</tr>
<tr>
<td>position</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>按下按钮瞬间，玩家的位置</td>
</tr>
<tr>
<td>pressed</td>
<td>boolean</td>
<td>是否按下了按钮。若为 true，则为按下了按钮。</td>
</tr>
<tr>
<td>raycast</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult</a></td>
<td>按下按钮瞬间，从玩家视角投射的射线检测结果</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onRelease()事件：
当玩家松开按钮时触发
返回值 GameInputEvent:{ button, entity, position, pressed, raycast, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>button</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/xlg3k99cmtgyc37d">GameButtonType</a></td>
<td>玩家输入的按钮</td>
</tr>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>&amp; {isPlayer:true, player:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a>}</td>
<td>按下按钮的玩家</td>
</tr>
<tr>
<td>position</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>按下按钮瞬间，玩家的位置</td>
</tr>
<tr>
<td>pressed</td>
<td>boolean</td>
<td>是否按下了按钮。若为 false，则为松开按钮。</td>
</tr>
<tr>
<td>raycast</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/eoawgqo7sl2cuz6a">GameRaycastResult</a></td>
<td>按下按钮瞬间，从玩家视角向前投射的射线检测结果</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>💡提示
提示：GameWorld 和 GamePlayer 都有触发点击/按下按钮的事件。他们的区别就是：
●GameWorld会监听世界所有实体的事件
●GamePlayer 只监听玩家本身的事件
通常 GamePlayer.onPress() 会放在 GameWorld.onPlayerJoin() 事件中使用。
详情请阅读 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">GamePlayer</a></p>
<p>Entity 实体：创建/销毁</p>
<p>world.createEntity()
方法
创建一个新实体<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>或复制一个现有的实体，若实体数量(<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#V3nLM">entityQuota</a>)达到上限，则返回 null。
参数 GameEntityConfig</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td>Partial[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vim7evgezkmnvhxk">GameEntityConfig</a>](%5BGameEntityConfig%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vim7evgezkmnvhxk))</td>
<td>指定实体的一组初始值</td>
</tr>
</tbody>
</table>
<p>返回值 GameEntity</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>根据指定参数创建的一个新实体</td>
</tr>
</tbody>
</table>
<p>💡提示
需要提前在编辑器中添加'花'的模型。
添加后可以在地图中删除 (只需确保 设置-文件 页面中已加载 花.vb 模型文件)。</p>
<p>world.entityQuota()
方法
返回脚本当前仍可创建的实体数量
返回值 number</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>number</td>
<td>当前仍可创建的实体数量</td>
</tr>
</tbody>
</table>
<p>world.onEntityCreate()事件：当实体被创建时触发</p>
<p>返回值 GameEntityEvent:{ entity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>被创建的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onEntityDestroy()事件：当实体被销毁时触发</p>
<p>返回值 GameEntityEvent:{ entity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>销毁的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>Battle &amp; Health 战斗及生命值
若实体开启了允许伤害的属性<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">(enableDamage = true)</a>，可以通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#mECcB">hurt()</a>方法对该实体造成生命值伤害。
伤害: 实体受到伤害，会触发<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#MSnaO">onTakeDamage()</a>事件。
死亡: 实体生命值<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#vqUwj">HP</a>降为0以下时，实体将触发死亡事件<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#fO5zM">onDie()</a>, 倒地不起。
复活: 实体死亡后，可通过增加生命值<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#vqUwj">HP</a>，让实体进行复活，同时触发<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#EdpQj">onRespawn()</a>事件。
强制重生: 如果实体类型为玩家，还可以通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#B4nEF">forceRespawn()</a>方法，使玩家强制重生，返回<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#pvk3M">出生点</a>。</p>
<p>world.onTakeDamage()
事件
当实体受到伤害时触发。
●onTakeDamage:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent</a>](%5BGameDamageEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm))
●nextTakeDamage:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm">GameDamageEvent</a>](%5BGameDamageEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/aivo4orkcmc9m0gm))
返回值 GameDamageEvent:{ entity, attacker, damage, damageType, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>attacker</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>null</td>
</tr>
<tr>
<td>damage</td>
<td>number</td>
<td>伤害值</td>
</tr>
<tr>
<td>damageType</td>
<td>string</td>
<td>伤害类型</td>
</tr>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>受到伤害的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onDie()
事件
当实体死亡时触发。
●onDie:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent</a>](%5BGameDieEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y))
●nextDie:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y">GameDieEvent</a>](%5BGameDieEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/fsnsdr8uvuspan6y))
返回值 GameDieEvent:{ entity, attacker, damageType, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>attacker</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>null</td>
</tr>
<tr>
<td>damageType</td>
<td>string</td>
<td>伤害类型</td>
</tr>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>死亡的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>死亡5秒后重生</p>
<p>world.onRespawn()
事件
当实体复活时触发。
onRespawn:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent</a>](%5BGameRespawnEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr))
nextRespawn:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr">GameRespawnEvent</a>](%5BGameRespawnEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cshui17169guugxr))
返回值 GameRespawnEvent:{ entity, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>死亡的实体</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>提示
GameWorld 和 GameEntity 拥有相同的触发事件。 他们的区别是
●GameWorld会触发世界所有的实体事件。
●GameEntity 只触发实体本身的事件。</p>
<p>Zones 区域</p>
<p>world.addZone()
方法
创建一个区域，用于检测实体进入或离开某个区域。 也可以用来设置环境参数，如雾、雨、天、雪、风、重力等定义区域内的环境参数。
参数 GameZoneConfig</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td>Partial‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yiaupxo6r5es9wcw">GameZoneConfig</a>›</td>
<td>指定区域的一组初始参数值</td>
</tr>
</tbody>
</table>
<p>返回值 GameZone</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GameZone</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone</a></td>
<td>区域</td>
</tr>
</tbody>
</table>
<p>world.removeZone()
方法
删除区域
参数 zone</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>zone</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone</a></td>
<td>要删除的区域</td>
</tr>
</tbody>
</table>
<p>world.zones()
方法
返回所有的区域列表
返回值 GameZone[]</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GameZone[]</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone</a></td>
<td>所有的区域</td>
</tr>
</tbody>
</table>
<p>Search 搜索
Game可以用类似jQuery选择器的语法来搜索某些实体。
●搜索全部:'*'
●搜索名称:'#id'
●搜索标签:'.tag'
●搜索同时包含多个标签:'.tag1 .tag2'
●搜索玩家:'player'</p>
<p>world.querySelector()
方法
搜索满足条件的第一个实体。
参数 selector</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>一个选择器搜索模式。</td>
</tr>
</tbody>
</table>
<p>返回值 GameEntity | null</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>符合选择器的首个实体</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>示例代码2</p>
<p>world.querySelectorAll()
方法
搜索满足条件的所有实体，返回一个列表。
参数 selector</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>一个选择器搜索模式</td>
</tr>
</tbody>
</table>
<p>返回值 GameEntity[]</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entity[]</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>符合选择器的全部实体</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>搜索所有玩家</p>
<p>💡提示
querySelector 和 querySelectorAll 两者区别是
querySelector 搜索满足条件的第一个实体，如果没有搜索到，则返回 null
querySelectorAll 搜索满足条件的所有实体，返回是一个数组，如果没有搜索到实体，则返回空的数组。</p>
<p>world.searchBox()
方法
搜索指定范围中的全部实体
参数 bounds</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bounds</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td>要搜索的范围边界</td>
</tr>
</tbody>
</table>
<p>返回值 GameEntity[]</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entity[]</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>范围内的全部实体</td>
</tr>
</tbody>
</table>
<p>world.raycast()
方法
射线检测，从origin原点位置向direction方向投射一条隐形的射线，返回碰到的实体或方块。
参数 origin, direction, options</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>origin</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>必填，射线的起点</td>
</tr>
<tr>
<td>direction</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>必填，射线的方向</td>
</tr>
<tr>
<td>options</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zi57zw8to9oze8u3">GameRaycastOptions</a></td>
<td>可选，选项配置参数</td>
</tr>
</tbody>
</table>
<p>返回值 GameRaycastResult</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>origin</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>射线的起点</td>
</tr>
<tr>
<td>direction</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>射线的方向</td>
</tr>
<tr>
<td>distance</td>
<td>number</td>
<td>射线穿越的距离</td>
</tr>
<tr>
<td>hit</td>
<td>boolean</td>
<td>如果为真，则射线击中了目标</td>
</tr>
<tr>
<td>hitEntity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>null</td>
</tr>
<tr>
<td>hitPosition</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>射线击中的位置</td>
</tr>
<tr>
<td>hitVoxel</td>
<td>number</td>
<td>射线所击中的方块 id (如未击中方块，则为 0)</td>
</tr>
<tr>
<td>voxelIndex</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>如果射线击中的是方块，则返回所击中方块的网格坐标。</td>
</tr>
<tr>
<td>normal</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>射线所击中平面的法向量</td>
</tr>
</tbody>
</table>
<p>Physics 物理相关 📌</p>
<p>world.gravity
属性     属性值类型：number     默认值：-0.1
世界重力。对应编辑器菜单 [场景-物理-地心引力] 控件属性。
数值越小，行动越笨重。受重力影响最明显的属性是跳跃高度及下落速度。如果重力数值大于0，可以实现反重力。</p>
<p>world.airFriction
属性     属性值类型：number     默认值：0.001
空气阻力。对应编辑器菜单[场景-速度阻尼]控件属性。
数值在0-1之间。数值越大，行走加速度越小。可以用来模拟大风的环境。</p>
<p>world.onEntityContact()
事件
当实体与实体发生碰撞时触发。
●onEntityContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
●nextEntityContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
返回值 GameEntityContactEvent:{ entity, other, force, axis, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>碰撞中的第一个实体</td>
</tr>
<tr>
<td>other</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>碰撞中的第二个实体</td>
</tr>
<tr>
<td>force</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞所产生的力</td>
</tr>
<tr>
<td>axis</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞后物体弹飞的方向</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>碰到指定实体加血</p>
<p>碰到实体变身</p>
<p>💡提示
两个实体刚接触的第一下，触发onEntityContact 直到两个实体分开，触发onEntitySeparate</p>
<p>world.onEntitySeparate()
事件
实体与实体结束碰撞时触发。
●onEntitySeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
●nextEntitySeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng">GameEntityContactEvent</a>](%5BGameEntityContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cx43ln010fi1npng))
返回值 GameEntityContactEvent:{entity, other, force, axis, tick}</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>碰撞中的第一个实体</td>
</tr>
<tr>
<td>other</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>碰撞中的第二个实体</td>
</tr>
<tr>
<td>force</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞所产生的力</td>
</tr>
<tr>
<td>axis</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞后物体弹飞的方向</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onVoxelContact()
事件
当实体与方块发生碰撞时触发。
●onVoxelContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
●nextVoxelContact:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
返回值 GameVoxelContactEvent:{ entity, voxel, x, y, z, force, axis, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>触碰方块的实体</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>被触碰的方块 id</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>被触碰方块的 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>被触碰方块的 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>被触碰方块的 z 坐标</td>
</tr>
<tr>
<td>force</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞所产生的力</td>
</tr>
<tr>
<td>axis</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞后物体弹飞的方向</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>破坏碰到的冰块</p>
<p>检测脚下的方块</p>
<p>world.onVoxelSeparate()
事件
当实体与方块结束碰撞时触发。
●onVoxelSeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
●nextVoxelSeparate:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w">GameVoxelContactEvent</a>](%5BGameVoxelContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yq8us26l3irc2m0w))
返回值 GameVoxelContactEvent:{ entity, voxel, x, y, z, force, axis, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>触碰方块的实体</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>被触碰的方块 id</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>被触碰方块的 x 坐标</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>被触碰方块的 y 坐标</td>
</tr>
<tr>
<td>z</td>
<td>number</td>
<td>被触碰方块的 z 坐标</td>
</tr>
<tr>
<td>force</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞所产生的力</td>
</tr>
<tr>
<td>axis</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>碰撞后物体弹飞的方向</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onFluidEnter()
事件
当实体进入水里/液体时触发。
●onFluidEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
●nextFluidEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
返回值 GameFluidContactEvent:{ entity, voxel, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>触碰液体的实体</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>触碰的液体方块</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.onFluidLeave()
事件
当实体离开水里/液体时触发。
●onFluidLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">GameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
●nextFluidLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10">ameFluidContactEvent</a>](%5BGameFluidContactEvent%5D(https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yqghak2c6vyayb10))
返回值 GameFluidContactEvent:{ entity, voxel, tick }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>触碰液体的实体</td>
</tr>
<tr>
<td>voxel</td>
<td>number</td>
<td>触碰的液体方块</td>
</tr>
<tr>
<td>tick</td>
<td>number</td>
<td>事件发生时间</td>
</tr>
</tbody>
</table>
<p>world.addCollisionFilter()
方法
添加碰撞过滤器，关闭两个实体组之间的碰撞。其中两个实体组分别用<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">选择器</a>aSelector、bSelector来定义，可按实体名称、标签、以及是否玩家等条件来筛选。
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>aSelector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>用于定义第一组实体的选择器</td>
</tr>
<tr>
<td>bSelector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>用于定义第二组实体的选择器</td>
</tr>
</tbody>
</table>
<p>返回值 void</p>
<p>world.removeCollisionFilter()
方法
移除碰撞过滤器，不再关闭两个实体组aSelector、bSelector之间的碰撞。
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>aSelector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>用于定义第一组实体的选择器</td>
</tr>
<tr>
<td>bSelector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>用于定义第二组实体的选择器</td>
</tr>
</tbody>
</table>
<p>返回值 void</p>
<p>world.clearCollisionFilters()
方法
清除全部碰撞过滤器。
返回值 void</p>
<p>world.collisionFilters()
方法
返回当前有效的全部碰撞过滤器。 Returns a list of all currently active collision filters
返回值 string[][]</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>string[][]</td>
<td>当前有效的全部碰撞过滤器</td>
</tr>
</tbody>
</table>
<p>world.testSelector()
方法
测试实体是否符合某个<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">选择器(Selector)</a>的条件。 Test a selector on an entity.
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>要测试的选择器</td>
</tr>
<tr>
<td>entity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>要测试的实体</td>
</tr>
</tbody>
</table>
<p>返回值 boolean</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td>true: 实体符合选择器的条件;false: 实体不符合选择器的条件</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>示例代码2</p>
<p>Sound 音乐音效</p>
<p>world.sound()
方法
播放一段声音，所有玩家都能听到。在[文件管理]窗口右下角[上传音频]，通过.sound()方法传入声音文件的路径。
参数 spec | string</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sample</td>
<td>string</td>
<td>必填，声音文件路径。可在文件管理器中上传自定义声音。如'audio/chat.mp3'</td>
</tr>
<tr>
<td>gain</td>
<td>number</td>
<td>可选，音量增益。正常为 1，数值越大，声音越响。</td>
</tr>
<tr>
<td>position</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>可选，声音播放的位置。可以指定在某个实体身上发出声音。</td>
</tr>
<tr>
<td>radius</td>
<td>number</td>
<td>可选，声音范围。默认为 32，即 2 格方块距离。超出范围的玩家则听不到声音。</td>
</tr>
<tr>
<td>pitch</td>
<td>number</td>
<td>可选，音高增益。正常为 1，大于 1，声音播放越快，小于 1，声音播放越慢。</td>
</tr>
</tbody>
</table>
<p>简单示例</p>
<p>示例代码2</p>
<p>💡提示
除了world.sound()，<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">Entity</a>和<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0">Player</a>也拥有类似播放声音的功能。
使用 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#V6C4l">entity.sound()</a> 可以在实体的位置播放声音，设置radius范围后，周围的玩家都可以听见声音。
使用 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#YFchP">player.sound()</a> 仅某个玩家自己可以听到声音，其他玩家都听不到。
Game世界预设了一些声音属性，在对应的事件触发时播放音效： 当地图开始运行时循环播放的<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#Yn7CB">背景音乐</a>，
当任意<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#PojOY">玩家进入/离开地图时</a>时播放的音效，
当任意<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#EBTEk">方块被放置/破坏</a>时播放的音效。</p>
<p>world.ambientSound
属性     属性值类型：new GameSoundEffect()     默认值：''
改变地图背景音乐，从地图运行开始循环播放。
背景音乐的音量会根据用户在[设置-声音]更改。</p>
<p>world.playerJoinSound</p>
<p>属性    属性值类型：new GameSoundEffect()    默认值：''
当玩家进入地图时，播放的音效。通过<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#P6gUg">world.onPlayerJoin()</a>触发。</p>
<p>world.playerLeaveSound</p>
<p>属性    属性值类型：new GameSoundEffect()    默认值：''
当玩家离开地图时，播放的音效。通过<a href="https://box3.yuque.com/staff-khn556/wupvz3/gqdnaany8xlb0q0s#mUHUB">world.onPlayerLeave()</a>触发。</p>
<p>world.placeVoxelSound</p>
<p>属性    属性值类型：new GameSoundEffect()    默认值：'audio/place_block.mp3'
方块被放置时，播放的音效。通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gkz7g1wazf5izpfy#kuAQe">GameVoxels.setVoxel()</a>触发。默认音效为'audio/place_block.mp3'</p>
<p>world.breakVoxelSound</p>
<p>属性    属性值类型：new GameSoundEffect()    默认值：'audio/break_block.mp3'
方块被销毁时，播放的音效。通过<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gkz7g1wazf5izpfy#kuAQe">GameVoxels.setVoxel()</a>触发。默认音效为'audio/break_block.mp3'</p>
<p>Weather 天气：雾</p>
<p>world.maxFog
属性     属性值类型：number     默认值：1
最大雾量。对应编辑器菜单[场景-全局特效-雾气-最大雾量]控件属性。</p>
<p>world.fogColor
属性     属性值类型：number     默认值：new GameRGBColor(1, 1, 1)
雾的颜色。对应编辑器菜单[场景-全局特效-雾气-颜色]控件属性。</p>
<p>world.fogStartDistance
属性     属性值类型：number     默认值：0
●fogStartDistance: number = 0
雾起始距离。对应编辑器菜单[场景-全局特效-雾气-起始距离]控件属性。</p>
<p>world.fogHeightOffset
属性     属性值类型：number     默认值：0
雾起始高度。对应编辑器菜单[场景-全局特效-雾气-高度]控件属性。</p>
<p>world.fogUniformDensity
属性     属性值类型：number     默认值：0
雾均匀密度，对应编辑器菜单[场景-全局特效-雾气-均匀雾量]控件属性。
若值大于0，越难看到天空。</p>
<p>world.fogHeightFalloff
属性     属性值类型：number     默认值：0.8
雾衰减的速率。对应编辑器菜单 [场景-全局特效-雾气-高度衰减系数] 控件属性。
数值在0-1之间。值越小，雾越浓。</p>
<p>Weather 天气：雨</p>
<p>world.rainSpeed
属性     属性值类型：number     默认值：1
雨的速度。对应编辑器菜单[场景-全局特效-雨-速度]控件属性。</p>
<p>world.rainColor
属性     属性值类型：GameRGBAColor     默认值：new GameRGBAColor(1, 1, 1, 1)
雨的颜色。对应编辑器菜单[场景-全局特效-雨-颜色]控件属性。</p>
<p>world.rainDirection
属性     属性值类型：GameVector3     默认值：new GameVector3(0, 1, 0)
雨的方向。对应编辑器菜单[场景-全局特效-雨-方向]控件属性。</p>
<p>world.rainDensity
属性     属性值类型：number     默认值：0
雨的密度。对应编辑器菜单[场景-全局特效-雨-密度]控件属性。
密度越大，雨滴越多。</p>
<p>world.rainInterference
属性     属性值类型：number     默认值：0
雨的扰动幅度。对应编辑器菜单[场景-全局特效-雨-不规则性]控件属性。</p>
<p>world.rainSizeLo
属性     属性值类型：number     默认值：0
雨滴的最小直径。</p>
<p>world.rainSizeHi
属性     属性值类型：number     默认值：1
雨滴的最大直径。</p>
<p>Weather 天气：雪</p>
<p>world.snowColor
属性     属性值类型：GameRGBAColor     默认值：new GameRGBAColor(1, 1, 1, 1)
雪花颜色。</p>
<p>world.snowTexture
属性     属性值类型：string     默认值：''
雪花纹理。此处填写文件管理器中的纹理资源名称。如 'snow/heart.part'</p>
<p>world.snowDensity
属性     属性值类型：number     默认值：0
雪的密度。密度越大，雪花越多。</p>
<p>world.snowFallSpeed
属性     属性值类型：number     默认值：1
雪花下落速度。如果小于0，则反向运动。</p>
<p>world.snowSpinSpeed
属性     属性值类型：GameVector3     默认值：new GameVector3(0, 0, 0)
雪花自旋速度。</p>
<p>world.snowSizeLo
属性     属性值类型：number     默认值：0
雪花最小直径。</p>
<p>world.snowSizeHi
属性     属性值类型：number     默认值：1
雪花最大半径。</p>
<p>Weather 天气: 光照</p>
<p>world.lightMode
属性     属性值类型：string     默认值：'natural'
作用于天空和环境光的照明类型。对应编辑器设置 [场景-日光-日光规律] 控件属性。
目前有提供2种光照模式，'manual'(自定义)或'natural'(动态)。默认为 'natural'。</p>
<p>world.sunFrequency
属性     属性值类型：number     默认值：0
太阳运动的频率，数值越大，昼夜交替越快。
昼夜时间计算公式:timeOfDay = (sunPhase + sunFrequency * tick) % 1</p>
<p>world.sunPhase
属性     属性值类型：number     默认值：0     范围：0-1
太阳从升起至落下，在天空的初始位置。对应编辑器菜单 [场景-日光] 控件属性。
数值在0-1之间。大于0.5时，世界进入黑夜。 仅在日光规律为 natural 状态时生效。
💡提示
关于太阳位置和世界时间的关系：
太阳位置 sunPhase = 0 世界时间为 06:00
太阳位置 sunPhase = 0.25 世界时间为 12:00
太阳位置 sunPhase = 0.5 世界时间为 18:00
太阳位置 sunPhase = 0.75 世界时间为第二天 00:00
太阳位置 sunPhase = 1 世界时间为第二天 06:00</p>
<p>world.sunDirection
属性     属性值类型：GameVector3     默认值：new GameVector3(0, -1, 0)
太阳光照明方向。仅在光照模式为manual自定义模式时生效。</p>
<p>world.sunLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(1000, 1000, 1000)
太阳光颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyLeftLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在-X轴方向的亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyRightLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在+X轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyBottomLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在-Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyTopLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在+Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyFrontLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在-Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>world.skyBackLight
属性     属性值类型：GameRGBColor     默认值：new GameRGBColor(0, 0, 0)
环境光在+Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。
颜色值大于0时，颜色越亮。</p>
<p>动画</p>
<p>world.animate()
方法
创建一个关键帧动画<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ritpgy64d053qg64">GameAnimation</a>。
参数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyframes</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gz8i9v7feiuz8cm6">GameWorldKeyframe</a>[]</td>
<td>关键帧的数据</td>
</tr>
<tr>
<td>playbackInfo</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/yccnow4dplv1lldk">GameAnimationPlaybackConfig</a></td>
<td>动画播放参数</td>
</tr>
</tbody>
</table>
<p>返回值</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Animation</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ritpgy64d053qg64">GameAnimation</a></td>
<td>创建出来的动画对象</td>
</tr>
</tbody>
</table>
<p>Web相关</p>
<p>world.url
属性     属性值类型：<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/vvy0hopvp0bmgb1b">URL</a>
获取当前地图所在的URL链接地址。</p>
<p>商城</p>
<p>world.onPlayerPurchaseSuccess()
事件
当玩家成功购买物品时触发
●onPlayerPurchaseSuccess : <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>&lt; <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oue67nqv8mfga7av">GamePurchaseSuccessEvent</a> &gt;
●nextPlayerPurchaseSuccess : <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a> &lt; <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/oue67nqv8mfga7av">GamePurchaseSuccessEvent</a> &gt;</p>
<p>返回值 GamePurchaseSuccessEvent:{ tick, userId, ProductId, orderId }</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tick</td>
<td>number</td>
<td>购买成功事件发生的时间</td>
</tr>
<tr>
<td>userId</td>
<td>string</td>
<td>触发购买事件的玩家userId</td>
</tr>
<tr>
<td>productId</td>
<td>number</td>
<td>购买商品的ID</td>
</tr>
<tr>
<td>orderId</td>
<td>number</td>
<td>购买成功的订单号</td>
</tr>
</tbody>
</table>
<p>Teleport 传送</p>
<p>world.teleport()
方法
地图组内传送能力，能够令 Player 被传送到其他地图中。此能力受权限影响，无权限用户可见，但调用后直接报错。
参数 mapId, players</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mapId</td>
<td>string</td>
<td>必填，目标地图id</td>
</tr>
<tr>
<td>players</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>[]</td>
<td>必填，被传送的玩家entity数组</td>
</tr>
</tbody>
</table>
<p>需注意：
●传送进入的地图为独立服务器，因此同一张目标地图，分批次传送不同的人，所进入的是不同服务器。
●只能在已发布地图中生效
●players的长度不能超过50
●players中不能存在游客（没有UserID）</p>
<p>简单示例</p>
<p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>7</p>
<p>8</p>
<p>9</p>
<p>10</p>
<p>11</p>
<p>12</p>
<p>while (true) {</p>
<pre><code>try {

let players = world.querySelectorAll('player').slice(0, 50)

players = players.filter(e =&gt; e.player.userId !== '' &amp;&amp; e.player.userId !== '0' &amp;&amp; e.player.userId !== 0)

world.teleport('100001157', players)

break

} catch (e) {

world.say('传送失败：' + e.stack)

}

await sleep(1000)
</code></pre>
<p>}</p>
<p>world.say('传送成功 ')</p>
<h2 id="gamezone-%E5%8C%BA%E5%9F%9F" tabindex="-1">GameZone 区域</h2>
<p>类 - GameZone
区域可用于检测实体进入某个区域或离开。 也可以用来设置环境参数，如雾、雨、天、雪、风、重力等定义区域内的环境参数。</p>
<p>参数
●bounds
●entities
●selector
●nextEnter
●nextLeave
●onEnter
●onLeave
●remove
●force
●massScale
●fogColor
●fogDensity
●fogEnabled
●fogHeightFalloff
●fogHeightOffset
●fogMax
●fogStartDistance
●rainColor
●rainDensity
●rainDirection
●rainEnabled
●rainInterference
●rainSizeHi
●rainSizeLo
●rainSpeed
●skyBackLight
●skyBottomLight
●skyEnabled
●skyFrontLight
●skyLeftLight
●skyLunarPhase
●skyMode
●skyRightLight
●skySunDirection
●skySunFrequency
●skySunLight
●skySunPhase
●skyTopLight
●snowColor
●snowDensity
●snowEnabled
●snowFallSpeed
●snowSizeHi
●snowSizeLo
●snowSpinSpeed
●snowTexture</p>
<p>bounds
•bounds:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a>‹›= new GameBounds3( new GameVector3(0, 0, 0), new GameVector3(0, 0, 0))
该区域的所指定的检测区域</p>
<p>entities
•entities:function
在区域内的全部实体<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></p>
<p>函数声明:
▸ ():<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>[]</p>
<p>fogColor
•fogColor:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(1, 1, 1)
区域内雾的颜色</p>
<p>fogDensity
•fogDensity:number= 0
区域内雾均匀密度</p>
<p>fogEnabled
•fogEnabled:boolean= false
区域内雾是否开启
示例代码</p>
<p>fogHeightFalloff
•fogHeightFalloff:number= 0.8
区域内雾衰减的速率</p>
<p>fogHeightOffset
•fogHeightOffset:number= -8
区域内雾起始高度</p>
<p>fogMax
•fogMax:number= 1
区域内最大雾量</p>
<p>fogStartDistance
•fogStartDistance:number= 0
区域内雾起始距离</p>
<p>force
•force:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>‹›= new GameVector3(0, 0, 0)
对物体施加的力的大小
示例代码</p>
<p>massScale
•massScale:number= 0
控制物体的质量对力的影响程度。 0 = 像重力一样 1 = 像风一样</p>
<p>onEnter</p>
<p>nextEnter
•onEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent</a>›
•nextEnter:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent</a>›
有实体进入指定区域时，触发事件</p>
<p>onLeave</p>
<p>NextLeave
•onLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent</a>›
•nextLeave:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/azxgcc43ibscl5z1">GameEventFuture</a>‹<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/onor4cnp3rhr4060">GameTriggerEvent</a>›
有实体离开区域时触发事件
示例代码</p>
<p>rainColor
•rainColor:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>‹›= new GameRGBAColor(1, 1, 1, 1)
区域内雨的颜色</p>
<p>rainDensity
•rainDensity:number= 0
区域内雨的密度 密度越大，雨滴越多。</p>
<p>rainDirection
•rainDirection:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>‹›= new GameVector3(0, 1, 0)
区域内雨的方向</p>
<p>rainEnabled
•rainEnabled:boolean= false
区域内雨是否开启
示例代码</p>
<p>rainInterference
•rainInterference:number= 0
区域内雨的扰动幅度</p>
<p>rainSizeHi
•rainSizeHi:number= 1
区域内雨滴的最大直径</p>
<p>rainSizeLo
•rainSizeLo:number= 0
区域内雨滴的最小直径</p>
<p>rainSpeed
•rainSpeed:number= 1
区域内雨的速度</p>
<p>remove
•remove:function
把该区域删除</p>
<p>函数声明:
▸ ():void</p>
<p>selector
•selector:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a>= &quot;&quot;
触发区域事件的物体搜索条件</p>
<p>skyBackLight
•skyBackLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内环境光在+Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skyBottomLight
•skyBottomLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内境光在-Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skyEnabled
•skyEnabled:boolean= false
区域内环境参数是否有效
示例代码</p>
<p>skyFrontLight
•skyFrontLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内环境光在-Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skyLeftLight
•skyLeftLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内环境光在-X轴方向的亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skyLunarPhase
•skyLunarPhase:number= 0
区域内月亮的相位，数值在0和1之间。若大于0.5时，为上弦月。</p>
<p>skyMode
•skyMode:&quot;natural&quot; | &quot;manual&quot;= &quot;natural&quot;
区域内作用于天空和环境光的照明类型。目前有提供2种光照模式，'manual'(自定义)或'natural'(动态)。默认为 'natural'。示例代码</p>
<p>skyRightLight
•skyRightLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内环境光在+X轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skySunDirection
•skySunDirection:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>‹›= new GameVector3(0, -1, 0)
区域内太阳光照明方向。仅在光照模式为manual自定义模式时生效。</p>
<p>skySunFrequency
•skySunFrequency:number= 0
区域内太阳运动的频率，数值越大，昼夜交替越快。</p>
<p>skySunLight
•skySunLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(1000, 1000, 1000)
区域内太阳光颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>skySunPhase
•skySunPhase:number= 0
区域内太阳从升起至落下，在天空的位置。</p>
<p>skyTopLight
•skyTopLight:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>‹›= new GameRGBColor(0, 0, 0)
区域内环境光在+Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</p>
<p>snowColor
•snowColor:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>‹›= new GameRGBAColor(1, 1, 1, 1)
区域内雪花颜色</p>
<p>snowDensity
•snowDensity:number= 0
区域内雪的密度。密度越大，雪花越多。</p>
<p>snowEnabled
•snowEnabled:boolean= false
区域内雪是否开启
示例代码</p>
<p>snowFallSpeed
•snowFallSpeed:number= 1
区域内雪花下落速度。如果小于0，则反向运动。</p>
<p>snowSizeHi
•snowSizeHi:number= 1
区域内雪花最大半径</p>
<p>snowSizeLo
•snowSizeLo:number= 0
区域内雪花最小直径</p>
<p>snowSpinSpeed
•snowSpinSpeed:number= 0
区域内雪花自旋速度</p>
<p>snowTexture
•snowTexture:string= &quot;&quot;
区域内雪花纹理</p>
<p>更多代码示例</p>
<<<<<<< HEAD
<pre class='hljs'><code><div><span class="hljs-comment">// 一半酸雨, 一半樱花飘落的场景效果, 跳起来场景效果消失</span>

world.addZone({

  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;player&#x27;</span>,

  <span class="hljs-attr">bounds</span>: {

    <span class="hljs-attr">lo</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">64</span>],

    <span class="hljs-attr">hi</span>: [<span class="hljs-number">128</span>, <span class="hljs-number">10</span>, <span class="hljs-number">128</span>],

  },

  <span class="hljs-attr">rainEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">rainDensity</span>: <span class="hljs-number">0.5</span>,

  <span class="hljs-attr">rainSpeed</span>: <span class="hljs-number">0.5</span>,

  <span class="hljs-attr">snowEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">snowDensity</span>: <span class="hljs-number">0.5</span>,

  <span class="hljs-attr">snowTexture</span>: <span class="hljs-string">&#x27;snow/bubble.part&#x27;</span>,

  <span class="hljs-attr">snowFallSpeed</span>: -<span class="hljs-number">0.1</span>,

  <span class="hljs-attr">fogEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">fogColor</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),

  <span class="hljs-attr">fogDensity</span>: <span class="hljs-number">0.02</span>,

})

world.addZone({

  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;player&#x27;</span>,

  <span class="hljs-attr">bounds</span>: {

    <span class="hljs-attr">lo</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],

    <span class="hljs-attr">hi</span>: [<span class="hljs-number">128</span>, <span class="hljs-number">10</span>, <span class="hljs-number">64</span>],

  },

  <span class="hljs-attr">rainEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">rainDensity</span>: <span class="hljs-number">0.5</span>,

  <span class="hljs-attr">rainSpeed</span>: -<span class="hljs-number">0.5</span>,

  <span class="hljs-attr">snowEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">snowDensity</span>: <span class="hljs-number">0.5</span>,

  <span class="hljs-attr">snowTexture</span>: <span class="hljs-string">&#x27;snow/sakura.part&#x27;</span>,

  <span class="hljs-attr">snowFallSpeed</span>: <span class="hljs-number">0.1</span>,

  <span class="hljs-attr">fogEnabled</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">fogColor</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>),

  <span class="hljs-attr">fogDensity</span>: <span class="hljs-number">0.02</span>,

})
</div></code></pre>
=======
<p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>7</p>
<p>8</p>
<p>9</p>
<p>10</p>
<p>11</p>
<p>12</p>
<p>13</p>
<p>14</p>
<p>15</p>
<p>16</p>
<p>17</p>
<p>18</p>
<p>19</p>
<p>20</p>
<p>21</p>
<p>22</p>
<p>23</p>
<p>24</p>
<p>25</p>
<p>26</p>
<p>27</p>
<p>28</p>
<p>29</p>
<p>30</p>
<p>31</p>
<p>32</p>
<p>33</p>
<p>34</p>
<p>35</p>
<p>36</p>
<p>// 一半酸雨, 一半樱花飘落的场景效果, 跳起来场景效果消失</p>
<p>world.addZone({</p>
<p>selector: 'player',</p>
<p>bounds: {</p>
<pre><code>lo: [0, 0, 64],

hi: [128, 10, 128],
</code></pre>
<p>},</p>
<p>rainEnabled: true,</p>
<p>rainDensity: 0.5,</p>
<p>rainSpeed: 0.5,</p>
<p>snowEnabled: true,</p>
<p>snowDensity: 0.5,</p>
<p>snowTexture: 'snow/bubble.part',</p>
<p>snowFallSpeed: -0.1,</p>
<p>fogEnabled: true,</p>
<p>fogColor: new GameRGBColor(0.5, 1, 0),</p>
<p>fogDensity: 0.02,</p>
<p>})</p>
<p>world.addZone({</p>
<p>selector: 'player',</p>
<p>bounds: {</p>
<pre><code>lo: [0, 0, 0],

hi: [128, 10, 64],
</code></pre>
<p>},</p>
<p>rainEnabled: true,</p>
<p>rainDensity: 0.5,</p>
<p>rainSpeed: -0.5,</p>
<p>snowEnabled: true,</p>
<p>snowDensity: 0.5,</p>
<p>snowTexture: 'snow/sakura.part',</p>
<p>snowFallSpeed: 0.1,</p>
<p>fogEnabled: true,</p>
<p>fogColor: new GameRGBColor(1, 0, 0.5),</p>
<p>fogDensity: 0.02,</p>
<p>})</p>
>>>>>>> 9d407ff9fa37673dc2906501a380cf67ec57f121
<h2 id="serverevent" tabindex="-1">ServerEvent</h2>
<p>类 - ServerEvent
从客户端发往服务器的自定义事件。</p>
<p>属性</p>
<p>tick
number
事件产生时的客户端 Tick。</p>
<p>entity
<a href="https://box3.yuque.com/staff-khn556/wupvz3/kgrabhf749axn65y">GamePlayerEntity</a>
事件产生的来源用户。</p>
<p>args
any
客户端通过该事件发送的数据。</p>
<h2 id="serverremotechannel" tabindex="-1">ServerRemoteChannel</h2>
<p>类 - ServerRemoteChannel
管理客户端与服务端通信的系统， 与客户端脚本中的 <a href="https://box3.yuque.com/staff-khn556/wupvz3/te1en17qs6c5cont">ClientRemoteChannel</a></p>
<p>配合使用。</p>
<p>方法</p>
<p>sendClientEvent
(entities:<a href="https://box3.yuque.com/staff-khn556/wupvz3/kgrabhf749axn65y">GamePlayerEntity</a>|<a href="https://box3.yuque.com/staff-khn556/wupvz3/kgrabhf749axn65y">GamePlayerEntity</a>[], clientEvent:any) : void
向指定玩家发送客户端事件。</p>
<p>参数
●entities:<a href="https://box3.yuque.com/staff-khn556/wupvz3/kgrabhf749axn65y">GamePlayerEntity</a>|<a href="https://box3.yuque.com/staff-khn556/wupvz3/kgrabhf749axn65y">GamePlayerEntity</a>[] - 玩家实体列表，代表发送对象，传入空数组时不会产生任何效果
●clientEvent:any - 自定义事件，在客户端接收到时，传入监听器的参数，仅允许可序列化的值</p>
<p>broadcastClientEvent
(clientEvent:any) : void
向所有玩家广播客户端事件。</p>
<p>参数
●clientEvent:any - 自定义事件对象，在客户端接收到时，传入监听器的参数，仅允许可序列化的值</p>
<p>onServerEvent
<a href="https://box3.yuque.com/staff-khn556/wupvz3/wkgxqor9a2i34oet">GameEventChannel</a>[<a href="https://box3.yuque.com/staff-khn556/wupvz3/du8np88uv0scn51v">ServerEvent</a>](%5BServerEvent%5D(https://box3.yuque.com/staff-khn556/wupvz3/du8np88uv0scn51v))
监听客户端发来的服务端事件。</p>
<h2 id="querylist-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%88%97%E8%A1%A8" tabindex="-1">QueryList 数据查询列表</h2>
<p>Class: QueryList
键值对查询列表，用于批量获取键值对，通过 {GameDataStorage.list} 方法返回。
列表根据配置项被划分为一个或多个分页，每个分页最多包含 { <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ugyg698kg8940k4d">ListPageOptions</a> | pageSize} 个键值对。</p>
<p>基本</p>
<p>isLastPage
• isLastPage: boolean
是否为最后一页，如果翻过头了，也会为 true</p>
<p>getCurrentPage
• getCurrentPage: function
按 {<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ugyg698kg8940k4d">ListPageOptions</a> | pageSize} 获取当前页的键值对</p>
<p>函数声明:
▸ (): <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>[]</p>
<p>返回值:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ofrqlqsh7eq81xw7">ReturnValue</a>[]
返回当前页的键值对内容</p>
<p>nextPage
• nextPage : function
翻到下一页，执行后 {getCurrentPage} 将返回下一页的键值对内容</p>
<p>函数声明:
▸ (): Promise <code>&lt;void&gt;</code></p>
<p>返回值:Promise <code>&lt;void&gt;</code>
返回 Promise 对象，resolve表示翻页成功，reject 后表示翻页失败</p>
<h1 id="types-%E7%B1%BB%E5%9E%8B" tabindex="-1">Types-类型</h1>
<h2 id="jsonvalue-%E7%B1%BBjson%E6%A0%BC%E5%BC%8F" tabindex="-1">JSONValue 类JSON格式</h2>
<p>类型别名 - JSONValue
允许存储的值，类型可以是如下类型之一：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串</td>
</tr>
<tr>
<td>number</td>
<td>数字</td>
</tr>
<tr>
<td>boolean</td>
<td>布尔值</td>
</tr>
<tr>
<td>{ [x: string]:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zz3qof7bfzaxst46#JSONValue">JSONValue</a>}</td>
<td>键值对</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zz3qof7bfzaxst46#JSONValue">JSONValue</a>[]</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zz3qof7bfzaxst46#JSONValue">JSONValue</a>数组</td>
</tr>
</tbody>
</table>
<p>定义</p>
<<<<<<< HEAD
<pre class='hljs'><code><div><span class="hljs-keyword">export</span> type JSONValue =

  string

  | number

  | boolean

  |{ [x: string]: JSONValue }

  | JSONValue[];
</div></code></pre>
=======
<p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>export type JSONValue =</p>
<p>string</p>
<p>| number</p>
<p>| boolean</p>
<p>|{ [x: string]: JSONValue }</p>
<p>| JSONValue[];</p>
>>>>>>> 9d407ff9fa37673dc2906501a380cf67ec57f121
<h2 id="listpageoption-%E5%88%97%E8%A1%A8%E7%BF%BB%E9%A1%B5%E9%85%8D%E7%BD%AE" tabindex="-1">ListPageOption 列表翻页配置</h2>
<p>类型别名 - ListPageOptions
批量获取键值对的配置项。</p>
<p>定义</p>
<p>●cursor:number
○分页指针，用于指定本次获取的分页起点页码。
●pageSize?:number
○可选项，分页大小，一页内的数据量，默认100。
●constraintTarget?:string
○约束目标值的路径，当值是JSON格式时，指定用作排序的值的路径。例如传入 score时，会取值上score属性的值作为排序、最大最小值的限制目标；
○可以级联最多5级，例如a.b.c.d.e，超出视作非法参数，按下一条方式处理；
○当路径不存在或传入非法参数时，以值本身作为目标进行排序，并打印一条警告；
●ascending?:boolean - 是否升序，设置为 true 时为升序，false为降序，不传或传入undefined时不排序；
●max?:number - 最大值，过滤返回对应值的最大值，超出或非数字则不返回该Key，默认不过滤；
●min?:number - 最小值，同max类似。</p>
<h2 id="gameanimationplaybackconfig-%E5%8A%A8%E7%94%BB%E6%92%AD%E6%94%BE%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0" tabindex="-1">GameAnimationPlaybackConfig 动画播放配置参数</h2>
<p>接口 - GameAnimationPlaybackConfig
用于动画播放配置的参数组</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>delay</td>
<td>number</td>
<td>播放延迟</td>
</tr>
<tr>
<td>direction</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/cgylgydyg35npvup">GameAnimationDirection</a></td>
<td>播放方向</td>
</tr>
<tr>
<td>duration</td>
<td>number</td>
<td>播放时长</td>
</tr>
<tr>
<td>endDelay</td>
<td>number</td>
<td>结束延迟</td>
</tr>
<tr>
<td>iterationStart</td>
<td>number</td>
<td>反复播放开始时间</td>
</tr>
<tr>
<td>iterations</td>
<td>number</td>
<td>反复播放次数</td>
</tr>
<tr>
<td>startTick</td>
<td>number</td>
<td>开始时间</td>
</tr>
</tbody>
</table>
<h2 id="gamedialogcall-%E6%98%BE%E7%A4%BA%E5%AF%B9%E8%AF%9D%E6%A1%86" tabindex="-1">GameDialogCall 显示对话框</h2>
<p>类型别名 - GameDialogCall
GameDialogCall:function
在游戏中显示一个对话框。
目前支持3种对话框样式：<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wc7bX">文本框 Text</a>/<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#c8eCh">选项框 Select</a>/<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Rj3dZ">输入框 Input</a>
GameDialogCall =
((params:<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wc7bX">GameTextDialogParams</a>) =&gt; Promise&lt;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#ZhwoF">GameDialogResponse</a>| null&gt; &amp;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wy4Sc">GameDialogCancelOption</a>) |
((params:<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#c8eCh">GameSelectDialogParams</a>) =&gt; Promise&lt;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#BxeyE">DialogSelectResponse</a>| null&gt; &amp;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wy4Sc">GameDialogCancelOption</a>) |
((params:<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Rj3dZ">GameInputDialogParams</a>) =&gt; Promise&lt;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#ZhwoF">GameDialogResponse</a>| null&gt; &amp;<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wy4Sc">GameDialogCancelOption</a>) |</p>
<p><a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#i6mSU">GameDialogParams</a>
对话框类型
●文本对话框<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Wc7bX">GameTextDialogParams</a>
●选项对话框<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#c8eCh">GameSelectDialogParams</a>
●输入对话框<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#Rj3dZ">GameInputDialogParams</a></p>
<p><a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#ok30Y">GameDialogResponse</a>
对话框输入响应
●<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#BxeyE">DialogSelectResponse</a></p>
<p>GameDialogParams
对话框属性列表
GameDialogParams:object</p>
<p>类型声明:
●type:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType</a>
对话框的类型。目前有三种对话框类型，具体可查看<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType</a>
●content: string
对话框显示的正文内容。支持使用'\n' 换行。
●contentBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
对话框正文窗口的背景颜色。
●contentTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
对话框正文字体的颜色。
●title:string
对话框显示的标题名称。
●titleBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
对话框显示的标题窗口背景颜色。
●titleTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
对话框显示的标题字体颜色。
●hasArrow? :undefined | false | true
可选: 如果接下来还有新的对话，在当前对话框中是否显示箭头提示。
仅在文本对话框<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.TEXT</a>中使用。
●confirmText? :undefined | string
可选: 仅在输入对话框<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.INPUT</a>使用。
确认按钮显示的文本。如果为空，按钮文本默认显示为 '确认 | Confirm'.
●options? :string[]
可选: 仅在选项对话框<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.SELECT</a>中使用。
在对话框中提供一些可供玩家选择的对话选项。
●placeholder? :undefined | string
可选: 仅在输入对话框<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.INPUT</a>中使用。
在输入框背景显示的提示文字。
●lookTarget?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
可选: 使相机镜头朝向指定实体或坐标的位置。
●lookTargetOffset?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
可选: 如果相机指定了注视目标，可以设置基于目标位置的偏移。
●lookUp?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
可选: 调整相机抬头向量。使画面上下左右颠倒。
●lookEye?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
可选: 调整相机的位置。
●lookEyeOffset?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
可选: 如果相机位置指定了实体，可以设置基于目标位置的偏移。</p>
<p>GameTextDialogParams
文本对话框参数
GameTextDialogParams:object</p>
<p>类型声明:
●type:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.TEXT</a>
对话框类型。文本对话框的类型是GameDialogType.TEXT
●hasArrow? :undefined | false | true
是否显示箭头提示
●content: string
对话框显示的正文内容。支持使用'\n' 换行。
●contentBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文背景颜色
●contentTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文字体颜色
●title:string
对话框标题
●titleBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题背景颜色
●titleTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题正文颜色
●lookTarget? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机注视的实体
●lookTargetOffset? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机注视的位置偏移
●lookUp? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
相机抬头向量
●lookEye?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机镜头的位置
●lookEyeOffset ?: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机位置的偏移</p>
<p>GameSelectDialogParams
选项对话框参数
GameSelectDialogParams:object</p>
<p>类型声明:
●type:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.SELECT</a>
对话框类型。选项对话框的类型是GameDialogType.SELECT
●options? :string[]
选项列表
●content: string
对话框显示的正文内容。支持使用'\n' 换行。
●contentBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文背景颜色
●contentTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文字体颜色
●title:string
对话框标题
●titleBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题背景颜色
●titleTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题正文颜色
●lookTarget? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机注视的实体
●lookTargetOffset? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机注视的位置偏移
●lookUp? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
相机抬头向量
●lookEye?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机镜头的位置
●lookEyeOffset?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机位置的偏移</p>
<p>GameInputDialogParams
输入对话框参数
GameInputDialogParams:object</p>
<p>类型声明:
●type:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/nordqvgc2xoeq28p">GameDialogType.INPUT</a>
对话框类型。输入对话框的类型是GameDialogType.INPUT
●confirmText? :undefined | string
确认按钮文字
●placeholder? :undefined | string
输入框提示文字
●content: string
对话框显示的正文内容。支持使用'\n' 换行。
●contentBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文背景颜色
●contentTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
正文字体颜色
●title:string
对话框标题
●titleBackgroundColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题背景颜色
●titleTextColor? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a>
标题正文颜色
●lookTarget? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机注视的实体
●lookTargetOffset? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机注视的位置偏移
●lookUp? :<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
相机抬头向量
●lookEye?:<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>|<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a>
相机镜头的位置
●lookEyeOffset ?: <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a>
基于相机位置的偏移</p>
<p>GameDialogResponse
对话框回应
如果没有完成对话而点击了其他地方，使对话框被取消，则返回null
如果是文本对话框，回应'success'
如果是选项对话框，回应输入框填写的内容字符串
如果是选项对话框，回应<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#BxeyE">DialogSelectResponse</a>
GameDialogResponse:<a href="https://box3.yuque.com/staff-khn556/wupvz3/extmobyyfsaec26x#BxeyE">DialogSelectResponse</a>| string = 'success' | null</p>
<p>DialogSelectResponse
选项对话框回应
在选项对话框中，玩家点击了按钮，会得到对话框的回应事件。返回被玩家按下的选项信息。
DialogSelectResponse:object</p>
<p>类型声明:
●选项编号index:number（zero-based 从0开始计数）
●选项内容value:string</p>
<p>GameDialogCancelOption
GameDialogCancelOption:object</p>
<p>函数声明:
●cancel():function
关闭对话框。</p>
<p>综合示例 1</p>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-keyword">async</span> ({ entity }) =&gt; {

  <span class="hljs-comment">// 玩家进入游戏时，弹出一个欢迎对话框</span>

  <span class="hljs-keyword">const</span> dialog = entity.player.dialog({

    <span class="hljs-attr">type</span>: GameDialogType.TEXT,

    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;吉吉喵&quot;</span>,

    <span class="hljs-attr">content</span>:<span class="hljs-string">`你好，<span class="hljs-subst">${entity.player.name}</span>，很高兴认识你。`</span>,

  });

  <span class="hljs-comment">// 等待任何一个 [玩家点击或关闭对话框， 3秒后自动把对话框关闭]</span>

  <span class="hljs-built_in">Promise</span>.race([

    dialog,

    (<span class="hljs-keyword">async</span>() =&gt; {

    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">3000</span>);

    dialog.cancel();

    })()

  ]).then( <span class="hljs-comment">/* 任何一个函数返回 */</span> );

})
</div></code></pre>
<p>综合示例 2</p>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-keyword">async</span> ({ entity }) =&gt; {

  <span class="hljs-comment">// 玩家进入游戏时，弹出一个欢迎对话框</span>

  <span class="hljs-keyword">const</span> dialog = entity.player.dialog({

    <span class="hljs-attr">type</span>: GameDialogType.TEXT,

    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;吉吉喵&quot;</span>,

    <span class="hljs-attr">content</span>: <span class="hljs-string">`你好，<span class="hljs-subst">${entity.player.name}</span>，很高兴认识你。`</span>,

  });

  <span class="hljs-comment">// 3秒后自动关闭</span>

  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{

    dialog.cancel();

  },<span class="hljs-number">3000</span>);

})
</div></code></pre>
<h2 id="gameentityconfig-%E5%AE%9E%E4%BD%93%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0" tabindex="-1">GameEntityConfig 实体配置参数</h2>
<p>接口 - GameEntityConfig
用于控制实体的参数组</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>position</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体的位置</td>
</tr>
<tr>
<td>velocity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体朝向某个方向运动的作用力</td>
</tr>
<tr>
<td>collides</td>
<td>boolean</td>
<td>实体是否可碰撞</td>
</tr>
<tr>
<td>mesh</td>
<td>string</td>
<td>mesh决定了实体的外形。'mesh/*.vb'</td>
</tr>
<tr>
<td>meshColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>实体的颜色</td>
</tr>
<tr>
<td>meshScale</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体的缩放比例</td>
</tr>
<tr>
<td>meshOrientation</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ci4biyw0qruafkf2">GameQuaternion</a></td>
<td>实体的旋转角度</td>
</tr>
<tr>
<td>meshMetalness</td>
<td>number</td>
<td>实体的金属感</td>
</tr>
<tr>
<td>meshEmissive</td>
<td>number</td>
<td>实体的发光度</td>
</tr>
<tr>
<td>meshShininess</td>
<td>number</td>
<td>实体的反光度</td>
</tr>
<tr>
<td>gravity</td>
<td>boolean</td>
<td>实体是否会下落</td>
</tr>
<tr>
<td>fixed</td>
<td>boolean</td>
<td>实体的位置是否固定不动</td>
</tr>
<tr>
<td>mass</td>
<td>number</td>
<td>实体质量</td>
</tr>
<tr>
<td>friction</td>
<td>number</td>
<td>实体的粘性(0 = 滑，1 = 粘)</td>
</tr>
<tr>
<td>restitution</td>
<td>number</td>
<td>实体的弹性(0 = 软, 1 = 弹)</td>
</tr>
<tr>
<td>enableInteract</td>
<td>boolean</td>
<td>允许实体进行互动</td>
</tr>
<tr>
<td>interactRadius</td>
<td>number</td>
<td>进入实体互动的范围。范围越小，需更靠近。</td>
</tr>
<tr>
<td>interactHint</td>
<td>string</td>
<td>进入实体互动范围时，实体身上出现的提示文本</td>
</tr>
<tr>
<td>interactColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>进入实体互动范围时，提示文本的字体颜色</td>
</tr>
<tr>
<td>particleRate</td>
<td>number</td>
<td>实体每秒产生粒子的数量</td>
</tr>
<tr>
<td>particleRateSpread</td>
<td>number</td>
<td>增加实体每秒产生粒子数量的随机性</td>
</tr>
<tr>
<td>particleLimit</td>
<td>number</td>
<td>实体可产生粒子总数的上限</td>
</tr>
<tr>
<td>particleLifetime</td>
<td>number</td>
<td>实体所产生粒子能存活的秒数</td>
</tr>
<tr>
<td>particleLifetimeSpread</td>
<td>number</td>
<td>增加实体所产生粒子存活时间的随机性</td>
</tr>
<tr>
<td>particleSize</td>
<td>number[]</td>
<td>实体所产生粒子的大小变化</td>
</tr>
<tr>
<td>particleSizeSpread</td>
<td>number</td>
<td>增加实体所产生粒子大小的随机性</td>
</tr>
<tr>
<td>particleColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>[]</td>
<td>实体所产生粒子的颜色变化</td>
</tr>
<tr>
<td>particleVelocity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体所产生粒子的初始速度</td>
</tr>
<tr>
<td>particleVelocitySpread</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>增加实体所产生粒子初始速度的随机性</td>
</tr>
<tr>
<td>particleDamping</td>
<td>number</td>
<td>实体所产生粒子的阻尼系数</td>
</tr>
<tr>
<td>particleAcceleration</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体所产生粒子的加速度</td>
</tr>
<tr>
<td>particleNoise</td>
<td>number</td>
<td>实体所产生粒子摆动的最大幅度</td>
</tr>
<tr>
<td>particleNoiseFrequency</td>
<td>number</td>
<td>实体所产生粒子摆动的频率</td>
</tr>
<tr>
<td>chatSound</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a></td>
<td>实体触发说话事件时播放的音效</td>
</tr>
<tr>
<td>interactSound</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a></td>
<td>实体触发互动事件时播放的音效</td>
</tr>
<tr>
<td>hurtSound</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a></td>
<td>实体触发受伤事件时播放的音效</td>
</tr>
<tr>
<td>dieSound</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ucndfavnw4hpxiu2">GameSoundEffect</a></td>
<td>实体触发死亡事件时播放的音效</td>
</tr>
</tbody>
</table>
<h2 id="gameentitykeyframe-%E5%AE%9E%E4%BD%93%E5%8A%A8%E7%94%BB%E5%85%B3%E9%94%AE%E5%B8%A7" tabindex="-1">GameEntityKeyframe 实体动画关键帧</h2>
<p>接口 - GameEntityKeyframe
Entity实体动画关键帧参数，可对Entity除音效外的大部分属性做动画效果，例如位移、大小、模型、颜色等等</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration</td>
<td>number</td>
<td>播放时长</td>
</tr>
<tr>
<td>easeIn</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓入效果</td>
</tr>
<tr>
<td>easeOut</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓出效果</td>
</tr>
<tr>
<td>velocity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体朝向某个方向运动的作用力</td>
</tr>
<tr>
<td>collides</td>
<td>boolean</td>
<td>实体是否可碰撞</td>
</tr>
<tr>
<td>mesh</td>
<td>string</td>
<td>mesh决定了实体的外形。'mesh/*.vb'</td>
</tr>
<tr>
<td>meshColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>实体的颜色</td>
</tr>
<tr>
<td>meshScale</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体的缩放比例</td>
</tr>
<tr>
<td>meshOrientation</td>
<td>GameQuaternion</td>
<td>实体的旋转角度</td>
</tr>
<tr>
<td>meshMetalness</td>
<td>number</td>
<td>实体的金属感</td>
</tr>
<tr>
<td>meshEmissive</td>
<td>number</td>
<td>实体的发光度</td>
</tr>
<tr>
<td>meshShininess</td>
<td>number</td>
<td>实体的反光度</td>
</tr>
<tr>
<td>gravity</td>
<td>boolean</td>
<td>实体是否会下落</td>
</tr>
<tr>
<td>fixed</td>
<td>boolean</td>
<td>实体的位置是否固定不动</td>
</tr>
<tr>
<td>mass</td>
<td>number</td>
<td>实体质量</td>
</tr>
<tr>
<td>friction</td>
<td>number</td>
<td>实体的粘性(0 = 滑，1 = 粘)</td>
</tr>
<tr>
<td>restitution</td>
<td>number</td>
<td>实体的弹性(0 = 软, 1 = 弹)</td>
</tr>
<tr>
<td>enableInteract</td>
<td>boolean</td>
<td>允许实体进行互动</td>
</tr>
<tr>
<td>interactRadius</td>
<td>number</td>
<td>进入实体互动的范围。范围越小，需更靠近。</td>
</tr>
<tr>
<td>interactHint</td>
<td>string</td>
<td>进入实体互动范围时，实体身上出现的提示文本</td>
</tr>
<tr>
<td>interactColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>进入实体互动范围时，提示文本的字体颜色</td>
</tr>
<tr>
<td>particleRate</td>
<td>number</td>
<td>实体每秒产生粒子的数量</td>
</tr>
<tr>
<td>particleRateSpread</td>
<td>number</td>
<td>增加实体每秒产生粒子数量的随机性</td>
</tr>
<tr>
<td>particleLimit</td>
<td>number</td>
<td>实体可产生粒子总数的上限</td>
</tr>
<tr>
<td>particleLifetime</td>
<td>number</td>
<td>实体所产生粒子能存活的秒数</td>
</tr>
<tr>
<td>particleLifetimeSpread</td>
<td>number</td>
<td>增加实体所产生粒子存活时间的随机性</td>
</tr>
<tr>
<td>particleSize</td>
<td>number[]</td>
<td>实体所产生粒子的大小变化</td>
</tr>
<tr>
<td>particleSizeSpread</td>
<td>number</td>
<td>增加实体所产生粒子大小的随机性</td>
</tr>
<tr>
<td>particleColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a>[]</td>
<td>实体所产生粒子的颜色变化</td>
</tr>
<tr>
<td>particleVelocity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体所产生粒子的初始速度</td>
</tr>
<tr>
<td>particleVelocitySpread</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>增加实体所产生粒子初始速度的随机性</td>
</tr>
<tr>
<td>particleDamping</td>
<td>number</td>
<td>实体所产生粒子的阻尼系数</td>
</tr>
<tr>
<td>particleAcceleration</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>实体所产生粒子的加速度</td>
</tr>
<tr>
<td>particleNoise</td>
<td>number</td>
<td>实体所产生粒子摆动的最大幅度</td>
</tr>
<tr>
<td>particleNoiseFrequency</td>
<td>number</td>
<td>实体所产生粒子摆动的频率</td>
</tr>
</tbody>
</table>
<h2 id="gameeventchannel-%E4%BA%8B%E4%BB%B6%E9%A2%91%E9%81%93%E7%9B%91%E5%90%AC" tabindex="-1">GameEventChannel 事件频道监听</h2>
<p>类型别名 - GameEventChannel</p>
<p>描述
EventChannel 可用于监听指定对象的事件。输入事件处理器handler，即得取消此事件处理器的<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/su72pndir0p5c7hh">GameEventHandlerToken</a></p>
<p>，各类用于监听事件的onXXX方法均为此类型的实现。</p>
<p>定义</p>
<p>GameEventChannel</p>
<pre class='hljs'><code><div><span class="hljs-keyword">export</span> type GameEventChannel <span class="hljs-string">`&lt;EventType&gt;`</span> = <span class="hljs-function">(<span class="hljs-params">

  handler: (event: EventType) =&gt; <span class="hljs-keyword">void</span>,

</span>) =&gt;</span> GameEventHandlerToken;
</div></code></pre>
<p>●EventType- 泛型参数，用于指定事件类型
●handler:(event: EventType) =&gt; void-  事件发生时调用的处理器</p>
<p>示例</p>
<p>1秒后停止监听onTick</p>
<pre class='hljs'><code><div><span class="hljs-comment">// 1000毫秒后停止报时</span>

<span class="hljs-keyword">const</span> token = world.onTick(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;tick !&quot;</span>));

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;cancel tick handler&#x27;</span>);

  token.cancel();<span class="hljs-comment">// 取消记录tick事件</span>

}, <span class="hljs-number">1000</span>);
</div></code></pre>
<h2 id="gameeventfuture-%E4%BA%8B%E4%BB%B6%E5%8D%95%E6%AC%A1%E7%9B%91%E5%90%AC" tabindex="-1">GameEventFuture 事件单次监听</h2>
<p>类型别名 - GameEventFuture</p>
<p>描述
此类型为<a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/wkgxqor9a2i34oet">GameEventChannel 事件频道监听</a></p>
<p>的单次、Promise版本。
Promise（承诺）提供了另一种处理事件的方式。您可以使用Promise来组织长序列的事件，从而实现结构化编程。
配合 async/await语法使用，可以以类似同步代码的方式组织异步代码。在某些情况下，这可以使代码更简单和更清晰，但必须谨慎使用。
尽管看起来与同步代码十分相似，但异步代码在等待时可以被中断，这意味着世界中的事物可能会在您的代码之外发生变化。
此外，异步代码生成的错误不会显示堆栈跟踪，这可能会加大调试的难度。
请考虑这些因素，并谨慎使用Promise、async/await。</p>
<p>定义</p>
<p>GameEventFuture</p>
<pre class='hljs'><code><div><span class="hljs-keyword">export</span> type GameEventFuture <span class="hljs-string">`&lt;EventType&gt;`</span> = <span class="hljs-function">(<span class="hljs-params">

  filter?: (event: EventType) =&gt; boolean,

</span>) =&gt;</span> <span class="hljs-built_in">Promise</span> <span class="hljs-string">`&lt;EventType&gt;`</span>;
</div></code></pre>
<p>●EventType- 触发的事件对象的类型
●filter?:(event: EventType) =&gt; boolean - 一个可选的函数，用于检查事件的类型。触发事件前执行该函数并传入事件对象，如果返回false，则不会触发该事件</p>
<p>示例</p>
<p>以 async/await 方式使用</p>
<pre class='hljs'><code><div><span class="hljs-comment">// Wait for 2 players to enter the world</span>

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waitForPlayers</span> (<span class="hljs-params">count</span>) </span>{

    <span class="hljs-keyword">while</span> (world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).length &lt; <span class="hljs-number">2</span>) {

    <span class="hljs-keyword">const</span> { entity } = <span class="hljs-keyword">await</span> world.nextPlayerJoin();

    world.say(entity.player.name + <span class="hljs-string">&#x27; joined&#x27;</span>);

    }

}

waitForPlayers.then(<span class="hljs-function">() =&gt;</span> world.say(<span class="hljs-string">&#x27;game ready&#x27;</span>));
</div></code></pre>
<h2 id="gamehurtoptions-%E5%AE%9E%E4%BD%93%E4%BC%A4%E5%AE%B3%E5%8F%82%E6%95%B0" tabindex="-1">GameHurtOptions 实体伤害参数</h2>
<p>接口: GameHurtOptions
攻击/伤害的相关参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>attacker</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>发出攻击的实体</td>
</tr>
<tr>
<td>damageType</td>
<td>string</td>
<td>伤害类型，可自行定义</td>
</tr>
</tbody>
</table>
<h2 id="gameplayerkeyframe-%E7%8E%A9%E5%AE%B6%E5%8A%A8%E7%94%BB%E5%85%B3%E9%94%AE%E5%B8%A7" tabindex="-1">GamePlayerKeyframe 玩家动画关键帧</h2>
<p>接口 - GamePlayerKeyframe
Player玩家动画关键帧参数，可对Player的大部分属性做动画效果，例如尺寸、颜色、隐身等等</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration</td>
<td>number</td>
<td>播放时长</td>
</tr>
<tr>
<td>easeIn</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓入效果</td>
</tr>
<tr>
<td>easeOut</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓出效果</td>
</tr>
<tr>
<td>cameraEntity</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y">GameEntity</a></td>
<td>在第一人称视角(FPS)或第三人称跟随视角(FOLLOW)下，玩家视角所跟随的实体</td>
</tr>
<tr>
<td>cameraMode</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kg0ggd71y96dlu0w">GameCameraMode</a></td>
<td>视角模式</td>
</tr>
<tr>
<td>cameraPosition</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>固定视角(FIXED)下，镜头的眼睛位置</td>
</tr>
<tr>
<td>cameraTarget</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>固定视角(FIXED)下镜头所朝向的目标点</td>
</tr>
<tr>
<td>cameraUp</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>固定视角(FIXED)下，镜头向上的矢量</td>
</tr>
<tr>
<td>scale</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>玩家的缩放比例</td>
</tr>
<tr>
<td>color</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>玩家的颜色</td>
</tr>
<tr>
<td>colorLUT</td>
<td>string</td>
<td>用于渲染玩家所见游戏世界的色调</td>
</tr>
<tr>
<td>invisible</td>
<td>boolean</td>
<td>玩家是否隐身</td>
</tr>
<tr>
<td>emissive</td>
<td>number</td>
<td>玩家的发光度</td>
</tr>
<tr>
<td>metalness</td>
<td>number</td>
<td>玩家的金属感</td>
</tr>
<tr>
<td>shininess</td>
<td>number</td>
<td>玩家的反光度</td>
</tr>
<tr>
<td>showName</td>
<td>boolean</td>
<td>玩家名字是否显示</td>
</tr>
</tbody>
</table>
<h2 id="gameraycastoptions-%E5%B0%84%E7%BA%BF%E6%A3%80%E6%B5%8B%E9%85%8D%E7%BD%AE" tabindex="-1">GameRaycastOptions 射线检测配置</h2>
<p>接口 - GameRaycastOptions
进行射线检测的参数配置</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>maxDistance</td>
<td>number</td>
<td>允许射线穿越的最大距离</td>
</tr>
<tr>
<td>ignoreFluid</td>
<td>boolean</td>
<td>如果为真，则射线无视液体</td>
</tr>
<tr>
<td>ignoreVoxel</td>
<td>boolean</td>
<td>如果为真，则射线无视方块</td>
</tr>
<tr>
<td>ignoreEntities</td>
<td>boolean</td>
<td>如果为真，则射线无视实体</td>
</tr>
<tr>
<td>ignoreSelector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>被射线检测忽略的实体选择器</td>
</tr>
</tbody>
</table>
<h2 id="gameselectorstring-%E9%80%89%E6%8B%A9%E5%99%A8%E5%8F%82%E6%95%B0" tabindex="-1">GameSelectorString 选择器参数</h2>
<p>类型别名 - GameSelectorString
typeGameSelectorString= string;
选择器(Selectors)可以方便搜索游戏内的全部对象。Game的选择器接口是参照 DOM APIs 而设。</p>
<pre class='hljs'><code><div><span class="hljs-keyword">const</span> entities = world.querySelector(<span class="hljs-string">&#x27;*&#x27;</span>); <span class="hljs-comment">// 世界中的全部实体</span>

<span class="hljs-keyword">const</span> theChair = world.querySelector(<span class="hljs-string">&#x27;#chair&#x27;</span>); <span class="hljs-comment">// 模型名称为&quot;chair&quot;的首个实体</span>

<span class="hljs-keyword">const</span> players = world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>); <span class="hljs-comment">// 游戏中的全部玩家</span>

<span class="hljs-keyword">const</span> boxes = world.querySelectorAll(<span class="hljs-string">&#x27;.box&#x27;</span>); <span class="hljs-comment">// 标签带有&quot;box&quot;的全部实体</span>

<span class="hljs-keyword">const</span> redBox = world.querySelector(<span class="hljs-string">&#x27;.box .red&#x27;</span>);<span class="hljs-comment">// 标签同时带有&quot;box&quot;和“red”的首个实体</span>
</div></code></pre>
<h2 id="gameskininvisible-%E9%9A%90%E8%97%8F%E8%BA%AB%E4%BD%93%E9%83%A8%E4%BD%8D%E5%8F%82%E6%95%B0" tabindex="-1">GameSkinInvisible 隐藏身体部位参数</h2>
<p>类型别名 - GameSkinInvisible
玩家身体可隐藏的部位</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>hips</td>
<td>boolean</td>
<td>臀部</td>
</tr>
<tr>
<td>torso</td>
<td>boolean</td>
<td>躯干</td>
</tr>
<tr>
<td>neck</td>
<td>boolean</td>
<td>颈部</td>
</tr>
<tr>
<td>head</td>
<td>boolean</td>
<td>头</td>
</tr>
<tr>
<td>leftShoulder</td>
<td>boolean</td>
<td>左肩</td>
</tr>
<tr>
<td>leftUpperArm</td>
<td>boolean</td>
<td>左上臂</td>
</tr>
<tr>
<td>leftLowerArm</td>
<td>boolean</td>
<td>左下臂</td>
</tr>
<tr>
<td>leftHand</td>
<td>boolean</td>
<td>左手</td>
</tr>
<tr>
<td>leftUpperLeg</td>
<td>boolean</td>
<td>左上腿</td>
</tr>
<tr>
<td>leftLowerLeg</td>
<td>boolean</td>
<td>左下腿</td>
</tr>
<tr>
<td>leftFoot</td>
<td>boolean</td>
<td>左脚</td>
</tr>
<tr>
<td>rightShoulder</td>
<td>boolean</td>
<td>右肩膀</td>
</tr>
<tr>
<td>rightUpperArm</td>
<td>boolean</td>
<td>右上臂</td>
</tr>
<tr>
<td>rightLowerArm</td>
<td>boolean</td>
<td>右下臂</td>
</tr>
<tr>
<td>rightHand</td>
<td>boolean</td>
<td>右手</td>
</tr>
<tr>
<td>rightUpperLeg</td>
<td>boolean</td>
<td>右上腿</td>
</tr>
<tr>
<td>rightLowerLeg</td>
<td>boolean</td>
<td>右下腿</td>
</tr>
<tr>
<td>rightFoot</td>
<td>boolean</td>
<td>右脚</td>
</tr>
</tbody>
</table>
<h2 id="gamesoundeffect-%E9%9F%B3%E6%95%88" tabindex="-1">GameSoundEffect 音效</h2>
<p>接口 - GameSoundEffect
使用Sound()方法播放声音时，传入的参数。
●sample
●gain
●gainRange
●pitch
●pitchRange
●radius</p>
<p>属性</p>
<p>sample
•sample:string= &quot;&quot;
声音文件路径。可在文件管理器中上传自定义声音。如'audio/chat.mp3'
在指定声音文件路径时，必须确保文件已经上传在文件管理器中。</p>
<p>radius
•radius:number= 32
声音范围。默认为32。距离实体越近，声音听的越清晰。</p>
<p>gain
•gain:number= 1
音量增益。正常为1，数值越大，声音越响。</p>
<p>gainRange
•gainRange:number= 0
音量增益方差。计算公式为：effect.gain + (Math.random() - 0.5) * effect.gainRange</p>
<p>pitch
•pitch:number= 1
音高增益。正常为1。大于1，声音播放越快。小于1，声音播放越慢。</p>
<p>pitchRange
•pitchRange:number= 0
音高增益方差。计算公式为：effect.pitch + (Math.random() - 0.5) * effect.pitchRange</p>
<p>音效列表</p>
<p><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#IyalY">World Sound 世界音效</a></p>
<table>
<thead>
<tr>
<th>声音</th>
<th>默认音频文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#Yn7CB">ambientSound</a></td>
<td></td>
<td>循环播放的背景音乐。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#PojOY">playerJoinSound</a></td>
<td></td>
<td>有玩家进入游戏。通过world.onPlayerJoin()触发</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/gqdnaany8xlb0q0s#Ugwy4">playerLeaveSound</a></td>
<td></td>
<td>有玩家离开游戏。通过world.onPlayerLeave()触发</td>
</tr>
<tr>
<td><a href="https://docs.box3.codemao.cn/box3world.html#placevoxelsound">placeVoxelSound</a></td>
<td>'audio/place_block.mp3'</td>
<td>方块被放置。通过world.setVoxel()触发</td>
</tr>
<tr>
<td><a href="https://docs.box3.codemao.cn/box3world.html#breavoxelsound">breakVoxelSound</a></td>
<td>'audio/break_block.mp3'</td>
<td>方块被破坏。通过world.setVoxel()触发</td>
</tr>
</tbody>
</table>
<p><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#JoZIC">Entity Sound 实体音效</a></p>
<table>
<thead>
<tr>
<th>声音</th>
<th>默认音频文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#dmgxA">chatSound</a></td>
<td></td>
<td>实体说话时。通过entity.say()触发</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#Zqgk4">hurtSound</a></td>
<td></td>
<td>实体受伤时。通过entity.onTakeDamage()触发</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#okad9">dieSound</a></td>
<td></td>
<td>实体死亡时。通过entity.onDie()触发</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kgrabhf749axn65y#VdXns">interactSound</a></td>
<td></td>
<td>实体被互动时。通过entity.onInteract()触发</td>
</tr>
</tbody>
</table>
<p><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#gBHmE">Player Sound 玩家音效</a></p>
<table>
<thead>
<tr>
<th>声音</th>
<th>默认音频文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#MjXRW">spawnSound</a></td>
<td>'audio/spawn.mp3'</td>
<td>玩家复活时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#GDLnL">jumpSound</a></td>
<td>'audio/jump.mp3'</td>
<td>玩家跳跃时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#Mbd5R">doubleJumpSound</a></td>
<td>'audio/double_jump.mp3'</td>
<td>玩家二段跳时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#Gb76c">landSound</a></td>
<td>'audio/land.mp3'</td>
<td>玩家落地时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#kkEKW">enterWaterSound</a></td>
<td>'audio/dive.mp3'</td>
<td>玩家进入液体时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#BZOka">leaveWaterSound</a></td>
<td>'audio/splash.mp3'</td>
<td>玩家离开液体时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#shkLw">stepSound</a></td>
<td>'audio/step.mp3'</td>
<td>玩家正在行走，迈出一步时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#sTVFS">swimSound</a></td>
<td>'audio/swim.mp3'</td>
<td>玩家正在游泳，向前划动时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#SaRMV">crouchSound</a></td>
<td></td>
<td>玩家下蹲时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#U6bte">startFlySound</a></td>
<td></td>
<td>玩家开始飞行时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#Dbryq">stopFlySound</a></td>
<td></td>
<td>玩家结束飞行时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#XVfGj">action0Sound</a></td>
<td></td>
<td>玩家按下鼠标左键/虚拟按钮A时。</td>
</tr>
<tr>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ddctd6h29w3myth0#SMvH1">action1Sound</a></td>
<td></td>
<td>玩家按下鼠标右键/虚拟按钮B时。</td>
</tr>
</tbody>
</table>
<p>上传音效
编辑器目前内置了34款音效，可以在菜单-[文件管理]的搜索.mp3查看。点击文件后，会弹出声音文件的详情属性。点击位置即可复制文件路径，在脚本中使用对应的方法播放。
如需上传自定义声音，可以在[文件管理]窗口，点击右下角浮动的加号按钮-[上传音频]。</p>
<p>在哪里下载优质的音效
在互联网中搜索音效时，希望能注重版权意识。使用了某个作者的作品，请务必在作品详情页注明来源。
这里推荐一些授权素材网站，只要遵守网站的使用协议，你便可以将它们免费用在你的作品中。大部分网站非中文站点，但可以借助浏览器翻译工具，进行阅读。
●<a href="https://www.zapsplat.com/">zapsplat</a>
●<a href="http://soundbible.com/">soundbible</a>
●<a href="https://opengameart.org/art-search-advanced?keys=&amp;field_art_type_tid%5B%5D=13&amp;sort_by=count&amp;sort_order=DESC">OpenGameArt</a>
●<a href="https://taira-komori.jpn.org/freesoundtw.html">小森平的免费音效</a>
●<a href="https://www.freesfx.co.uk/">Free SFX</a>
●<a href="https://freesound.org/">FreeSound</a>
●<a href="https://www.soundjay.com/">SoundJay</a></p>
<h2 id="gameworldkeyframe-%E4%B8%96%E7%95%8C%E5%8A%A8%E7%94%BB%E5%85%B3%E9%94%AE%E5%B8%A7" tabindex="-1">GameWorldKeyframe 世界动画关键帧</h2>
<p>接口 - GameWorldKeyframe
World世界动画关键帧参数，可对World的大部分属性做动画效果，例如重力、雨、雾、雪、光照等等</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration</td>
<td>number</td>
<td>播放时长</td>
</tr>
<tr>
<td>easeIn</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓入效果</td>
</tr>
<tr>
<td>easeOut</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/ufkohwwiumbubphm">GameEasing</a></td>
<td>缓出效果</td>
</tr>
<tr>
<td>gravity</td>
<td>number</td>
<td>世界重力</td>
</tr>
<tr>
<td>airFriction</td>
<td>number</td>
<td>空气阻力</td>
</tr>
<tr>
<td>maxFog</td>
<td>number</td>
<td>最大雾量</td>
</tr>
<tr>
<td>fogColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>雾的颜色</td>
</tr>
<tr>
<td>fogHeightFalloff</td>
<td>number</td>
<td>雾衰减的速率</td>
</tr>
<tr>
<td>fogHeightOffset</td>
<td>number</td>
<td>雾起始高度</td>
</tr>
<tr>
<td>fogStartDistance</td>
<td>number</td>
<td>雾起始距离</td>
</tr>
<tr>
<td>fogUniformDensity</td>
<td>number</td>
<td>雾均匀密度</td>
</tr>
<tr>
<td>rainColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>雨的颜色</td>
</tr>
<tr>
<td>rainDensity</td>
<td>number</td>
<td>雨的密度</td>
</tr>
<tr>
<td>rainDirection</td>
<td>number</td>
<td>雨的方向</td>
</tr>
<tr>
<td>rainInterference</td>
<td>number</td>
<td>雨的扰动幅度</td>
</tr>
<tr>
<td>rainSizeHi</td>
<td>number</td>
<td>雨滴的最大直径</td>
</tr>
<tr>
<td>rainSizeLo</td>
<td>number</td>
<td>雨滴的最小直径</td>
</tr>
<tr>
<td>rainSpeed</td>
<td>number</td>
<td>雨的速度</td>
</tr>
<tr>
<td>snowColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>雪花颜色</td>
</tr>
<tr>
<td>snowDensity</td>
<td>number</td>
<td>雪花密度</td>
</tr>
<tr>
<td>snowFallSpeed</td>
<td>number</td>
<td>雪花速度</td>
</tr>
<tr>
<td>snowSizeHi</td>
<td>number</td>
<td>雪花最大直径</td>
</tr>
<tr>
<td>snowSizeLo</td>
<td>number</td>
<td>雪花最小直径</td>
</tr>
<tr>
<td>snowSpinSpeed</td>
<td>number</td>
<td>雪花自旋速度</td>
</tr>
<tr>
<td>snowTexture</td>
<td>string</td>
<td>雪花纹理</td>
</tr>
<tr>
<td>lightMode</td>
<td>string</td>
<td>作用于天空和环境光的照明类型</td>
</tr>
<tr>
<td>sunFrequency</td>
<td>number</td>
<td>太阳运动的频率</td>
</tr>
<tr>
<td>sunDirection</td>
<td>number</td>
<td>太阳光照明方向</td>
</tr>
<tr>
<td>sunLight</td>
<td>number</td>
<td>太阳光颜色亮度</td>
</tr>
<tr>
<td>sunPhase</td>
<td>number</td>
<td>太阳从升起至落下，在天空的位置</td>
</tr>
<tr>
<td>lunarPhase</td>
<td>number</td>
<td>月亮的相位</td>
</tr>
<tr>
<td>skyLeftLight</td>
<td>number</td>
<td>环境光在-X轴方向的颜色亮度</td>
</tr>
<tr>
<td>skyRightLight</td>
<td>number</td>
<td>环境光在+X轴方向的颜色亮度</td>
</tr>
<tr>
<td>skyBottomLight</td>
<td>number</td>
<td>环境光在-Y轴方向的颜色亮度</td>
</tr>
<tr>
<td>skyTopLight</td>
<td>number</td>
<td>环境光在+Y轴方向的颜色亮度</td>
</tr>
<tr>
<td>skyFrontLight</td>
<td>number</td>
<td>环境光在+Z轴方向的颜色亮度</td>
</tr>
<tr>
<td>skyBackLight</td>
<td>number</td>
<td>环境光在-Z轴方向的颜色亮度</td>
</tr>
</tbody>
</table>
<h2 id="gamezoneconfig-%E5%8C%BA%E5%9F%9F%E9%85%8D%E7%BD%AE" tabindex="-1">GameZoneConfig 区域配置</h2>
<p>接口 - GameZoneConfig
用于区域的参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bounds</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/zpmrz60ybosiiabb">GameBounds3</a></td>
<td>区域的所指定的检测区域</td>
</tr>
<tr>
<td>selector</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/twfeqqs5gfb8b6k9">GameSelectorString</a></td>
<td>触发区域事件的物体搜索条件</td>
</tr>
<tr>
<td>force</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>对物体施加的力的大小</td>
</tr>
<tr>
<td>massScale</td>
<td>number</td>
<td>控制物体的质量对力的影响程度。 0 = 像重力一样; 1 = 像风一样</td>
</tr>
<tr>
<td>fogColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>雾的颜色</td>
</tr>
<tr>
<td>fogDensity</td>
<td>number</td>
<td>雾均匀密度</td>
</tr>
<tr>
<td>fogEnabled</td>
<td>boolean</td>
<td>雾是否开启</td>
</tr>
<tr>
<td>fogHeightFalloff</td>
<td>number</td>
<td>雾起始高度</td>
</tr>
<tr>
<td>fogHeightOffset</td>
<td>number</td>
<td>雾衰减的速率</td>
</tr>
<tr>
<td>fogMax</td>
<td>number</td>
<td>最大雾量</td>
</tr>
<tr>
<td>fogStartDistance</td>
<td>number</td>
<td>雾起始距离</td>
</tr>
<tr>
<td>rainColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>雨的颜色</td>
</tr>
<tr>
<td>rainDensity</td>
<td>number</td>
<td>雨的密度。密度越大，雨滴越多。</td>
</tr>
<tr>
<td>rainDirection</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>雨的方向</td>
</tr>
<tr>
<td>rainEnabled</td>
<td>boolean</td>
<td>雨是否开启</td>
</tr>
<tr>
<td>rainInterference</td>
<td>number</td>
<td>雨的扰动幅度</td>
</tr>
<tr>
<td>rainSizeHi</td>
<td>number</td>
<td>雨滴的最大直径</td>
</tr>
<tr>
<td>rainSizeLo</td>
<td>number</td>
<td>雨滴的最小直径</td>
</tr>
<tr>
<td>rainSpeed</td>
<td>number</td>
<td>雨的速度</td>
</tr>
<tr>
<td>skyBackLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在+Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skyBottomLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在-Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skyEnabled</td>
<td>boolean</td>
<td>环境参数是否有效</td>
</tr>
<tr>
<td>skyFrontLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在-Z轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skyLeftLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在-X轴方向的亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skyLunarPhase</td>
<td>number</td>
<td>月亮的相位，数值在0和1之间。若大于0.5时，为上弦月。</td>
</tr>
<tr>
<td>skyMode</td>
<td>&quot;natural&quot; or &quot;manual&quot;</td>
<td>作用于天空和环境光的照明类型。目前有提供2种光照模式，'manual'(自定义)或'natural'(动态)。默认为 'natural'。</td>
</tr>
<tr>
<td>skyRightLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在+X轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skySunDirection</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/lqqc61nd3gud9omc">GameVector3</a></td>
<td>太阳光照明方向。仅在光照模式为manual自定义模式时生效。</td>
</tr>
<tr>
<td>skySunFrequency</td>
<td>number</td>
<td>太阳运动的频率，数值越大，昼夜交替越快。</td>
</tr>
<tr>
<td>skySunLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>太阳光颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>skySunPhase</td>
<td>number</td>
<td>太阳从升起至落下，在天空的位置。</td>
</tr>
<tr>
<td>skyTopLight</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/kxqf3awgo7oc95eg">GameRGBColor</a></td>
<td>环境光在+Y轴方向的颜色亮度。仅在光照模式为manual自定义模式时生效。颜色值大于0时，颜色越亮。</td>
</tr>
<tr>
<td>snowColor</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/he0l2ds1y29p5376">GameRGBAColor</a></td>
<td>雪花颜色</td>
</tr>
<tr>
<td>snowDensity</td>
<td>number</td>
<td>雪的密度。密度越大，雪花越多。</td>
</tr>
<tr>
<td>snowEnabled</td>
<td>boolean</td>
<td>雪是否开启</td>
</tr>
<tr>
<td>snowFallSpeed</td>
<td>number</td>
<td>雪花下落速度。如果小于0，则反向运动。</td>
</tr>
<tr>
<td>snowSizeHi</td>
<td>number</td>
<td>雪花最大半径</td>
</tr>
<tr>
<td>snowSizeLo</td>
<td>number</td>
<td>雪花最小直径</td>
</tr>
<tr>
<td>snowSpinSpeed</td>
<td>number</td>
<td>雪花自旋速度</td>
</tr>
<tr>
<td>snowTexture</td>
<td>string</td>
<td>雪花纹理</td>
</tr>
</tbody>
</table>
<p>默认值参考 <a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/puh5iyu2e8s1lar8">GameZone</a></p>
<pre class='hljs'><code><div>{

  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;&#x27;</span>,

    <span class="hljs-attr">bounds</span>: {

    <span class="hljs-attr">lo</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],

    <span class="hljs-attr">hi</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],

    },

  <span class="hljs-attr">force</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],

    <span class="hljs-attr">massScale</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">fogEnabled</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-attr">fogColor</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),

    <span class="hljs-attr">fogDensity</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">fogHeightFalloff</span>: <span class="hljs-number">0.8</span>,

    <span class="hljs-attr">fogHeightOffset</span>: -<span class="hljs-number">8</span>,

    <span class="hljs-attr">fogMax</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">fogStartDistance</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">rainEnabled</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-attr">rainColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),

    <span class="hljs-attr">rainDensity</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">rainSpeed</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">rainDirection</span>: <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">rainInterference</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">rainSizeHi</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">rainSizeLo</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">rainSpeed</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">skyEnabled</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-attr">skyMode</span>: <span class="hljs-string">&#x27;natural&#x27;</span>,

    <span class="hljs-attr">skyBottomLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyTopLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyBackLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyFrontLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyLeftLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyRightLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skySunDirection</span>: <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>),

    <span class="hljs-attr">skyLunarPhase</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">skySunFrequency</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">skySunPhase</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">skySunLight</span>: <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>),

    <span class="hljs-attr">snowEnabled</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-attr">snowColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),

    <span class="hljs-attr">snowDensity</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">snowTexture</span>: <span class="hljs-string">&#x27;&#x27;</span>,

    <span class="hljs-attr">snowFallSpeed</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">snowSizeHi</span>: <span class="hljs-number">1</span>,

    <span class="hljs-attr">snowSizeLo</span>: <span class="hljs-number">0</span>,

    <span class="hljs-attr">snowSpinSpeed</span>: <span class="hljs-number">0</span>,

    }
</div></code></pre>
<h2 id="motionclipconfig-%E5%8A%A8%E4%BD%9C%E5%BA%8F%E5%88%97%E9%85%8D%E7%BD%AE" tabindex="-1">MotionClipConfig 动作序列配置</h2>
<p>类 - MotionClipConfig
动作序列配置</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>iterations</td>
<td>number</td>
<td>输入Infinity就是无限循环，此时会覆盖掉默认动作 能cancel或者播放新的动作覆盖可选项，默认 1 次</td>
</tr>
<tr>
<td>motions</td>
<td>(string</td>
<td><a href="https://box3.yuque.com/org-wiki-box3-ev7rl4/wupvz3/grhrvh4gh1s1t7ni">MotionConfig</a>)[]</td>
</tr>
</tbody>
</table>
<h2 id="motionconfig-%E5%8A%A8%E4%BD%9C%E9%85%8D%E7%BD%AE" tabindex="-1">MotionConfig 动作配置</h2>
<p>接口 - MotionConfig</p>
<p>动作配置</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>iterations</td>
<td>number</td>
<td>输入Infinity就是无限循环，此时会覆盖掉默认动作 能cancel或者播放新的动作覆盖可选项，默认 1 次</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>动作名字</td>
</tr>
</tbody>
</table>
<h2 id="returnvalue-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E" tabindex="-1">ReturnValue 数据查询返回</h2>
<p>类型别名 - ReturnValue</p>
<p>描述
ReturnValue 表示一个键值对的内容。它可以是一个对象或者 undefined。</p>
<p>定义</p>
<p>定义</p>
<pre class='hljs'><code><div><span class="hljs-keyword">export</span> type ReturnValue =

  | {

    <span class="hljs-attr">key</span>: string;

    value: JSONValue;

    updateTime: number;

    createTime: number;

  }

  | <span class="hljs-literal">undefined</span>;
</div></code></pre>
<p>●key: string: 键名称
●value: JSONValue: 值内容
●updateTime: number: key最近更新时间
●createTime: number: key创建时间</p>
<h1 id="enums-%E6%9E%9A%E4%B8%BE" tabindex="-1">Enums-枚举</h1>
<h2 id="gameanimationdirection-%E5%8A%A8%E7%94%BB%E6%92%AD%E6%94%BE%E6%96%B9%E5%90%91" tabindex="-1">GameAnimationDirection 动画播放方向</h2>
<p>枚举 - GameAnimationDirection
动画的播放方向</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALTERNATE</td>
<td>'alternate'</td>
<td>交替</td>
</tr>
<tr>
<td>ALTERNATE_REVERSE</td>
<td>'alternate-reverse'</td>
<td>交替倒放</td>
</tr>
<tr>
<td>NORMAL</td>
<td>'normal'</td>
<td>普通</td>
</tr>
<tr>
<td>REVERSE</td>
<td>'reverse'</td>
<td>倒放</td>
</tr>
<tr>
<td>WRAP</td>
<td>'wrap'</td>
<td>循环</td>
</tr>
<tr>
<td>WRAP_REVERSE</td>
<td>'wrap-reverse'</td>
<td>循环倒放</td>
</tr>
</tbody>
</table>
<h2 id="gameanimationplaybackstate-%E5%8A%A8%E7%94%BB%E6%92%AD%E6%94%BE%E7%8A%B6%E6%80%81" tabindex="-1">GameAnimationPlaybackState 动画播放状态</h2>
<p>枚举 - GameAnimationPlaybackState
动画播放状态</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>FINISHED</td>
<td>'finished'</td>
<td>已完成</td>
</tr>
<tr>
<td>PENDING</td>
<td>'pending'</td>
<td>挂起等待</td>
</tr>
<tr>
<td>RUNNING</td>
<td>'running'</td>
<td>播放中</td>
</tr>
</tbody>
</table>
<h2 id="gamebodypart-%E8%BA%AB%E4%BD%93%E9%83%A8%E4%BD%8D" tabindex="-1">GameBodyPart 身体部位</h2>
<p>枚举 - GameBodyPart
玩家身体部位的类型</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>HIPS</td>
<td>'hips'</td>
<td>臀部</td>
</tr>
<tr>
<td>TORSO</td>
<td>'torso'</td>
<td>躯干</td>
</tr>
<tr>
<td>NECK</td>
<td>'neck'</td>
<td>颈部</td>
</tr>
<tr>
<td>HEAD</td>
<td>'head'</td>
<td>头</td>
</tr>
<tr>
<td>LEFT_SHOULDER</td>
<td>'leftShoulder'</td>
<td>左肩</td>
</tr>
<tr>
<td>LEFT_UPPER_ARM</td>
<td>'leftUpperArm'</td>
<td>左上臂</td>
</tr>
<tr>
<td>LEFT_LOWER_ARM</td>
<td>'leftLowerArm'</td>
<td>左下臂</td>
</tr>
<tr>
<td>LEFT_HAND</td>
<td>'leftHand'</td>
<td>左手</td>
</tr>
<tr>
<td>LEFT_UPPER_LEG</td>
<td>'leftUpperLeg'</td>
<td>左上腿</td>
</tr>
<tr>
<td>LEFT_LOWER_LEG</td>
<td>'leftLowerLeg'</td>
<td>左下腿</td>
</tr>
<tr>
<td>LEFT_FOOT</td>
<td>'leftFoot'</td>
<td>左脚</td>
</tr>
<tr>
<td>RIGHT_SHOULDER</td>
<td>'rightShoulder'</td>
<td>右肩膀</td>
</tr>
<tr>
<td>RIGHT_UPPER_ARM</td>
<td>'rightUpperArm'</td>
<td>右上臂</td>
</tr>
<tr>
<td>RIGHT_LOWER_ARM</td>
<td>'rightLowerArm'</td>
<td>右下臂</td>
</tr>
<tr>
<td>RIGHT_HAND</td>
<td>'rightHand'</td>
<td>右手</td>
</tr>
<tr>
<td>RIGHT_UPPER_LEG</td>
<td>'rightUpperLeg'</td>
<td>右上腿</td>
</tr>
<tr>
<td>RIGHT_LOWER_LEG</td>
<td>'rightLowerLeg'</td>
<td>右下腿</td>
</tr>
<tr>
<td>RIGHT_FOOT</td>
<td>'rightFoot'</td>
<td>右脚</td>
</tr>
</tbody>
</table>
<h2 id="gamebuttontype---%E6%8C%89%E9%92%AE%E7%B1%BB%E5%9E%8B" tabindex="-1">GameButtonType - 按钮类型</h2>
<p>枚举 - GameButtonType
玩家按下的按钮类型</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>WALK</td>
<td>'walk'</td>
<td>步行按钮</td>
</tr>
<tr>
<td>RUN</td>
<td>'run'</td>
<td>奔跑按钮</td>
</tr>
<tr>
<td>CROUCH</td>
<td>'crouch'</td>
<td>下蹲按钮</td>
</tr>
<tr>
<td>JUMP</td>
<td>'jump'</td>
<td>跳跃按钮</td>
</tr>
<tr>
<td>DOUBLE_JUMP</td>
<td>'jump2</td>
<td>二段跳按钮</td>
</tr>
<tr>
<td>FLY</td>
<td>'fly'</td>
<td>飞行按钮</td>
</tr>
<tr>
<td>ACTION0</td>
<td>'action0'</td>
<td>鼠标左键 / 虚拟按钮A</td>
</tr>
<tr>
<td>ACTION1</td>
<td>'action1'</td>
<td>鼠标右键 / 虚拟按钮B</td>
</tr>
</tbody>
</table>
<h2 id="gamecameramode-%E8%A7%86%E8%A7%92%E6%A8%A1%E5%BC%8F" tabindex="-1">GameCameraMode 视角模式</h2>
<p>枚举 - GameCameraMode
玩家的相机视角模式</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>FIXED</td>
<td>'fixed'</td>
<td>第三人称固定视角</td>
</tr>
<tr>
<td>FOLLOW</td>
<td>'follow'</td>
<td>第三人称跟随视角(默认)</td>
</tr>
<tr>
<td>FPS</td>
<td>'fps'</td>
<td>第一人称视角</td>
</tr>
</tbody>
</table>
<h2 id="gamedialogtype-%E5%AF%B9%E8%AF%9D%E6%A1%86%E7%B1%BB%E5%9E%8B" tabindex="-1">GameDialogType 对话框类型</h2>
<p>枚举 - GameDialogType
对话框样式类型</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>TEXT</td>
<td>'text'</td>
<td>文本样式对话框</td>
</tr>
<tr>
<td>INPUT</td>
<td>'input'</td>
<td>输入样式对话框</td>
</tr>
<tr>
<td>SELECT</td>
<td>'select'</td>
<td>选择样式对话框</td>
</tr>
</tbody>
</table>
<h2 id="gameeasing-%E7%BC%93%E5%8A%A8%E6%95%88%E6%9E%9C" tabindex="-1">GameEasing 缓动效果</h2>
<p>枚举 - GameEasing
动画的缓动效果，EaseIn缓入，EaseOut缓出</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>BACK</td>
<td>'back'</td>
<td>反向</td>
</tr>
<tr>
<td>BOUNCE</td>
<td>'bounce'</td>
<td>弹性</td>
</tr>
<tr>
<td>CIRCLE</td>
<td>'circle'</td>
<td>圆</td>
</tr>
<tr>
<td>ELASTIC</td>
<td>'elastic'</td>
<td>橡皮筋</td>
</tr>
<tr>
<td>EXP</td>
<td>'exp'</td>
<td>指数</td>
</tr>
<tr>
<td>LINEAR</td>
<td>'linear'</td>
<td>线性</td>
</tr>
<tr>
<td>NONE</td>
<td>'none'</td>
<td>无</td>
</tr>
<tr>
<td>QUADRATIC</td>
<td>'quadratic'</td>
<td>二次方</td>
</tr>
<tr>
<td>SINE</td>
<td>'sine'</td>
<td>正弦波</td>
</tr>
</tbody>
</table>
<h2 id="gameinputdirection-%E7%8E%A9%E5%AE%B6%E8%BE%93%E5%85%A5%E6%96%B9%E5%90%91" tabindex="-1">GameInputDirection 玩家输入方向</h2>
<p>枚举 - GameInputDirection
玩家通过输入设备控制移动时的方向，可用于 <a href="https://box3.yuque.com/staff-khn556/wupvz3/ddctd6h29w3myth0#aahNx">GamePlayer.disableInputDirection</a> 禁用对应方向的输入，以控制玩家移动的表现。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NONE</td>
<td>'none'</td>
<td>无，代表不禁用</td>
</tr>
<tr>
<td>VERTICAL</td>
<td>'vertical'</td>
<td>垂直方向</td>
</tr>
<tr>
<td>HORIZONTAL</td>
<td>'horizontal'</td>
<td>水平方向</td>
</tr>
<tr>
<td>BOTH</td>
<td>'both'</td>
<td>所有方向</td>
</tr>
</tbody>
</table>
<h2 id="gameplayermovestate-%E7%8E%A9%E5%AE%B6%E8%BF%90%E5%8A%A8%E7%8A%B6%E6%80%81" tabindex="-1">GamePlayerMoveState 玩家运动状态</h2>
<p>PlayerMoveState运动状态
玩家的运动状态</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLYING</td>
<td>'fly'</td>
<td>飞行中</td>
</tr>
<tr>
<td>GROUND</td>
<td>'ground'</td>
<td>在地上</td>
</tr>
<tr>
<td>SWIM</td>
<td>'swim'</td>
<td>游泳中</td>
</tr>
<tr>
<td>FALL</td>
<td>'fall'</td>
<td>下落中</td>
</tr>
<tr>
<td>JUMP</td>
<td>'jump'</td>
<td>跳跃中</td>
</tr>
<tr>
<td>DOUBLE_JUMP</td>
<td>'jump2'</td>
<td>二段跳中</td>
</tr>
</tbody>
</table>
<h2 id="gameplayerwalkstate-%E7%8E%A9%E5%AE%B6%E8%A1%8C%E8%B5%B0%E7%8A%B6%E6%80%81" tabindex="-1">GamePlayerWalkState 玩家行走状态</h2>
<p>枚举 - GamePlayerWalkState
玩家的行走状态</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NONE</td>
<td>''</td>
<td>非行走中</td>
</tr>
<tr>
<td>CROUCH</td>
<td>'crouch'</td>
<td>下蹲行走</td>
</tr>
<tr>
<td>WALK</td>
<td>'walk'</td>
<td>正常步行</td>
</tr>
<tr>
<td>RUN</td>
<td>'run'</td>
<td>奔跑</td>
</tr>
</tbody>
</table>
<h2 id="socialtype-%E7%8E%A9%E5%AE%B6%E7%A4%BE%E4%BA%A4%E5%85%B3%E7%B3%BB" tabindex="-1">SocialType 玩家社交关系</h2>
<p>枚举 - SocialType交关系类型，用于在 <a href="https://box3.yuque.com/staff-khn556/wupvz3/ddctd6h29w3myth0#V8jWi">GamePlayer 玩家</a></p>
<p>中查询玩家的社交关系。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>FOLLOWING</td>
<td>0</td>
<td>关注</td>
</tr>
<tr>
<td>FOLLOWERS</td>
<td>1</td>
<td>粉丝</td>
</tr>
<tr>
<td>FRIENDS</td>
<td>2</td>
<td>好友</td>
</tr>
</tbody>
</table>
<h1 id="%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD" tabindex="-1">高级功能</h1>
<h2 id="%E4%BB%A3%E7%A0%81%E9%80%9F%E5%BB%BA" tabindex="-1">代码速建</h2>
<h3 id="%E6%96%87%E6%A1%A3%E8%AF%B4%E6%98%8E" tabindex="-1">文档说明</h3>
<p>本文档中的代码，如果出现“-snip-”表示省略了上文中重复的代码</p>
<h3 id="%E5%BB%BA%E7%AD%91%E4%BB%A3%E7%A0%81" tabindex="-1">建筑代码</h3>
<h4 id="%E5%B2%9B%E4%B8%89%E7%9A%84%E5%BB%BA%E7%AD%91%E4%BB%A3%E7%A0%81" tabindex="-1">岛三的建筑代码</h4>
<p>voxels.setVoxel()可以指定最多5个参数：X, Y, Z, voxel, rotation</p>
<h5 id="%E9%99%90%E5%88%B6" tabindex="-1">限制</h5>
<p>参数X, Y, Z必须是string；voxel, rotation可以是string或者number类型</p>
<pre class='hljs'><code><div>voxels.setVoxel(X, Y, Z, voxel, rotation)
<span class="hljs-comment">/*
(x: number, y: number, Z: number, voxel: string | number, rotation?: string | number) : number
*/</span>
</div></code></pre>
<h4 id="%E4%B8%BE%E4%BE%8B" tabindex="-1">举例</h4>
<p>如 <code>voxels.setVoxel(1, 1, 1, 'grass', 0)</code>，可以在x、y、z为1的位置放置一个草方块，旋转（rotation）为0即方块旋转0*90=0度</p>
<p>如 <code>voxels.setVoxel(1, 1, 1, 'grass', 1)</code>，可以在x、y、z为1的位置放置一个草方块，旋转（rotation）为1即将方块逆时针旋转1*90=90度</p>
<p>又如 <code>voxels.setVoxel(1, 2, 3, 'stone', 2)</code>，可以在x=1,y=2,z=3的位置放置一个石头，因为旋转（rotation）的值为2，所以会将原始的方块逆时针旋转2*90=180度</p>
<p><code>voxels.setVoxel(12, 3, 45, 'glass', 3)</code>，在x=12,y=3,z=45的位置放置一个玻璃方块，逆时针旋转3*90=270度</p>
<p><code>voxels.setVoxel(12, 3, 45, 'dirt', 4)</code>，在x=12,y=3,z=45的位置放置一个土方块，逆时针旋转了4*90=360度，所以相当于不旋转，作用效果等于 <code>voxels.setVoxel(12, 3, 45, 'dirt', 0)</code></p>
<p>说明：rotation值可以不加，默认为0</p>
<h4 id="%E8%BF%94%E5%9B%9E%E5%80%BC" tabindex="-1">返回值</h4>
<h5 id="%E6%96%B9%E5%9D%97%E5%AD%98%E5%9C%A8%E6%97%B6" tabindex="-1">方块存在时</h5>
<p>如果传入的方块存在，使用此方法的返回值会返回第四个参数即voxel对应的方块ID</p>
<p>例如 <code>voxels.setVoxel(1, 2, 3, 'stone')</code>会返回名为“stone”的方块对应的id</p>
<h5 id="%E6%96%B9%E5%9D%97%E4%B8%8D%E5%AD%98%E5%9C%A8%E6%97%B6" tabindex="-1">方块不存在时</h5>
<p>如果方块不存在，会返回0</p>
<p>例如 <code>voxels.setVoxel(1, 2, 3, 'this_is_not_a_block_name')</code>会返回0</p>
<h3 id="%E5%BF%AB%E9%80%9F%E5%BB%BA%E9%80%A0" tabindex="-1">快速建造</h3>
<p>快速建造可以更高效地批量化建筑方块</p>
<h4 id="%E5%BB%BA%E9%80%A0%E4%B8%80%E4%B8%AA%E9%95%BF%E6%96%B9%E4%BD%93" tabindex="-1">建造一个长方体</h4>
<pre class='hljs'><code><div><span class="hljs-comment">/**
 * 快速建造一个长方体
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">voxel</span></span> - 方块名称或者id
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">xmin</span></span> - x的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">ymin</span></span> - y的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">zmin</span></span> - z的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">xmax</span></span> - x的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">ymax</span></span> - y的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">zmax</span></span> - z的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">rotation</span></span> - 方块旋转
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick_build</span>(<span class="hljs-params">voxel, xmin, ymin, zmin, xmax, ymax, zmax, rotation=<span class="hljs-number">0</span></span>)</span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> x=xmin;x&lt;=xmax;x++){
		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=ymin;y&lt;=ymax;y++){
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z=zmin;z&lt;=zmax;z++){
				voxels.setVoxel(x, y, z, voxel, rotation)
			}
		}
	}
}
</div></code></pre>
<h5 id="%E4%B8%BE%E4%BE%8B-1" tabindex="-1">举例</h5>
<pre class='hljs'><code><div><span class="hljs-comment">// 定义函数</span>
<span class="hljs-comment">/**
 * 快速建造一个长方体
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">voxel</span></span> - 方块名称或者id
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">xmin</span></span> - x的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">ymin</span></span> - y的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">zmin</span></span> - z的最小值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">xmax</span></span> - x的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">ymax</span></span> - y的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">zmax</span></span> - z的最大值
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">rotation</span></span> - 方块旋转
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick_build</span>(<span class="hljs-params">voxel, xmin, ymin, zmin, xmax, ymax, zmax, rotation=<span class="hljs-number">0</span></span>)</span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> x=xmin;x&lt;=xmax;x++){
		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=ymin;y&lt;=ymax;y++){
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z=zmin;z&lt;=zmax;z++){
				voxels.setVoxel(x, y, z, voxel, rotation)
			}
		}
	}
}

<span class="hljs-comment">// 调用函数</span>
<span class="hljs-comment">// 调用快速建造函数用“grass”（草方块）建造一个起于{x=1,y=1,z=1}，止于{x=100,y=64,z=101}，所有方块都旋转3*90=270度的长方体</span>
quick_build(<span class="hljs-string">&#x27;grass&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>, <span class="hljs-number">64</span>, <span class="hljs-number">101</span>, <span class="hljs-number">3</span>)
<span class="hljs-comment">// 调用快速建造函数用“stone”（草方块）建造一个起于{x=2,y=3,z=4}，止于{x=100,y=64,z=101}，此时不传入参数rotation，方块默认不旋转</span>
quick_build(<span class="hljs-string">&#x27;stone&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">100</span>, <span class="hljs-number">64</span>, <span class="hljs-number">101</span>, <span class="hljs-number">3</span>)
</div></code></pre>
<h5 id="%E8%A7%A3%E5%86%B3%E5%88%86%E4%B8%8D%E6%B8%85x%2Cy%2Cz%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E6%9C%80%E5%B0%8F%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98" tabindex="-1">解决分不清x,y,z的最大值和最小值的问题</h5>
<p>有时候并不知道xmin,ymin,zmin,xmax,ymax,zmax到底该传入什么值，以下两种方法可以解决：</p>
<h6 id="%E5%A6%82%E6%9E%9C%E5%B7%B2%E7%BB%8F%E7%9F%A5%E9%81%93%E5%AE%9A%E5%80%BC%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%87%AA%E8%A1%8C%E5%88%A4%E6%96%AD" tabindex="-1">如果已经知道定值，可以自行判断</h6>
<p>例如：</p>
<pre class='hljs'><code><div><span class="hljs-keyword">var</span> pos1 = <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
<span class="hljs-keyword">var</span> pos2 = <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>)
</div></code></pre>
<p>因为pos1的x、y、z值都小于pos2的x、y、z值，所以此时应如此传入：</p>
<pre class='hljs'><code><div>quick_build(<span class="hljs-string">&#x27;方块名&#x27;</span>, pos1.x, pos1.y, pos1.z, pos2.x, pos2.y, pos3.z)
</div></code></pre>
<h6 id="%E5%A6%82%E6%9E%9C%E4%B8%A4%E5%9D%90%E6%A0%87%E5%AE%8C%E5%85%A8%E9%9A%8F%E6%9C%BA%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%88%A4%E6%96%AD" tabindex="-1">如果两坐标完全随机，可以使用函数判断</h6>
<pre class='hljs'><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick_build</span>(<span class="hljs-params">voxel, xmin, ymin, zmin, xmax, ymax, zmax, rotation=<span class="hljs-number">0</span></span>)</span>{
	-snip-
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick_build_pro</span>(<span class="hljs-params">voxel, pos1, pos2, rotation=<span class="hljs-number">0</span></span>)</span>{
	<span class="hljs-comment">// 判断pos1和pos2的位置关系并正确传入</span>
	<span class="hljs-keyword">if</span>(pos1.x&lt;=pos2.x&amp;&amp;pos1.y&lt;=pos2.y&amp;&amp;pos1.z&lt;=pos2.z){ <span class="hljs-comment">// 当pos1的xyz坐标均小于等于pos2的xyz坐标时的调用方式</span>
		quick_build(voxel, pos1.x, pos1.y, pos1.z, pos2.x, pos2.y, pos2.z, rotation)
	}
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(pos1.x&gt;pos2.x&amp;&amp;pos1.y&gt;pos2.y&amp;&amp;pos1.z&gt;pos2.z){ <span class="hljs-comment">// 当pos2的xyz坐标均小于pos1的xyz坐标时的调用方式</span>
		quick_build(voxel, pos2.x, pos2.y, pos2.z, pos1.x, pos1.y, pos1.z, rotation)
	}
	<span class="hljs-keyword">else</span>{ <span class="hljs-comment">// 否则输出错误</span>
		<span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;不支持的判断类型&#x27;</span>)
	}
}
</div></code></pre>
<h4 id="%E4%BB%A5%E6%9F%90%E4%B8%80%E4%BD%8D%E7%BD%AE%E4%B8%BA%E4%B8%AD%E5%BF%83%E5%BB%BA%E9%80%A0%E7%90%83%E4%BD%93" tabindex="-1">以某一位置为中心建造球体</h4>
<pre class='hljs'><code><div><span class="hljs-comment">/**
 * 快速建造一个球体
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameVector3}</span> <span class="hljs-variable">centerPos</span></span> - 球体中心位置
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">voxel</span></span> - 方块id或名称
 * <span class="hljs-doctag">@param <span class="hljs-type">{number}</span> <span class="hljs-variable">r</span></span> - 球体半径
 * <span class="hljs-doctag">@param <span class="hljs-type">{number | string}</span> <span class="hljs-variable">rotation</span></span> - 方块旋转
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ball</span>(<span class="hljs-params">centerPos, r, voxel, rotation=<span class="hljs-number">0</span></span>)</span>{
	<span class="hljs-comment">// 创建嵌套循环，这样创建的妙处在于不必遍历地图每个方块，如果遍历地图每个方块的话地图会崩溃</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> x=centerPos.x-r;x&lt;=centerPos.x+r;x++){
		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=centerPos.y-r;y&lt;=centerPos.y+r;y++){
		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z=centerPos.z-r;z&lt;=centerPos.z+r;z++){
        	<span class="hljs-keyword">const</span> position2 = <span class="hljs-keyword">new</span> GameVector3(x, y, z);

                <span class="hljs-comment">// 计算两个位置之间的距离</span>
                <span class="hljs-keyword">const</span> distance1 = <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-built_in">Math</span>.pow(position2.x - centerPos.x, <span class="hljs-number">2</span>) + <span class="hljs-built_in">Math</span>.pow(position2.y - centerPos.y, <span class="hljs-number">2</span>) + <span class="hljs-built_in">Math</span>.pow(position2.z - centerPos.z, <span class="hljs-number">2</span>));
          	<span class="hljs-keyword">if</span>(distance1&lt;=r){<span class="hljs-comment">// 如果距离小于传入的r的值，则放置方块</span>
                     	voxels.setVoxel(x,y,z,voxel,rotation)
            	}
                }
            	}
     	}
}
</div></code></pre>
<h5 id="%E9%99%90%E5%88%B6-1" tabindex="-1">限制</h5>
<p>因为神奇代码岛的服务器能力问题，当r过大时可能会导致服务器崩溃，所以不要传入一个较大的值</p>
<h5 id="%E4%B8%BE%E4%BE%8B-2" tabindex="-1">举例</h5>
<pre class='hljs'><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ball</span>(<span class="hljs-params">centerPos, r, voxel, rotation=<span class="hljs-number">0</span></span>)</span>{
	-snip-
}

<span class="hljs-keyword">var</span> center = <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)
ball(center, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;dirt&#x27;</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// 以{x=50,y=50,z=50}为球体中心、填充旋转了2*90=180度的“dirt”（草方块），半径为10，快速建造一个球体</span>
</div></code></pre>
<h4 id="%E5%9C%A8%E6%9F%90%E4%B8%80%E4%BD%8D%E7%BD%AE%E5%88%9B%E5%BB%BA%E5%BA%95%E9%9D%A2%E4%B8%BAl%EF%BC%8C%E9%AB%98%E4%B8%BAl%E7%9A%84%E4%B8%89%E6%A3%B1%E9%94%A5" tabindex="-1">在某一位置创建底面为l，高为l的三棱锥</h4>
<pre class='hljs'><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pyramid</span>(<span class="hljs-params">l, pos, voxel, rotation</span>)</span>{
	<span class="hljs-keyword">let</span> cx = pos.x;
	<span class="hljs-keyword">let</span> cy = pos.y;
	<span class="hljs-keyword">let</span> cz = pos.z;
	<span class="hljs-keyword">let</span> height = l;
	<span class="hljs-keyword">let</span> xend = cx + l;
	<span class="hljs-keyword">let</span> zend = cz + l;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y = cy; y &lt; cy + height; y++){
	  	<span class="hljs-keyword">let</span> ylevel = y - cy;
	  	<span class="hljs-keyword">let</span> xstart = cx + ylevel;
	  	<span class="hljs-keyword">let</span> xend = cx + l - ylevel;
	  	<span class="hljs-keyword">let</span> zstart = cz + ylevel;
	  	<span class="hljs-keyword">let</span> zend = cz + l - ylevel;
	  	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> x = xstart; x &lt; xend; x++){
	    	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z = zstart; z &lt; zend; z++){
	      		voxels.setVoxel(x, y, z, voxel, rotation);
	    	}
	  	}
	}
}
</div></code></pre>
<h5 id="%E4%B8%BE%E4%BE%8B-3" tabindex="-1">举例</h5>
<pre class='hljs'><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pyramid</span>(<span class="hljs-params">l, pos, voxel, rotation</span>)</span>{
	-snip-
}
<span class="hljs-keyword">var</span> pos = <span class="hljs-keyword">new</span> GameVector3(<span class="hljs-number">60</span>,<span class="hljs-number">10</span>,<span class="hljs-number">60</span>)
pyramid(<span class="hljs-number">5</span>, pos, <span class="hljs-string">&#x27;stone&#x27;</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 在{x:60,y:10,z:60}使用“stone”（石头）建造一个底面为5*5，高度为5的三棱锥，所有方块逆时针旋转3*90=270度</span>
</div></code></pre>
<h1 id="%E7%A8%8B%E5%BA%8F%E5%AE%9E%E4%BE%8B" tabindex="-1">程序实例</h1>
<h2 id="%E6%9F%90%E8%B7%91%E9%85%B7%E5%9C%B0%E5%9B%BE%E6%BA%90%E7%A0%81" tabindex="-1">某跑酷地图源码</h2>
<h3 id="index.js" tabindex="-1">index.js</h3>
<pre class='hljs'><code><div><span class="hljs-keyword">var</span> admin = [<span class="hljs-string">&#x27;tangyuan儿&#x27;</span>,<span class="hljs-string">&#x27;爱肝作品的小诚吖_赤炎宗&#x27;</span>,<span class="hljs-string">&#x27;意柳&#x27;</span>,<span class="hljs-string">&#x27;芸游XY&#x27;</span>,<span class="hljs-string">&#x27;外向的雷电猴(巅峰队)&#x27;</span>,<span class="hljs-string">&#x27;长恨.原一颗狼星&#x27;</span>,<span class="hljs-string">&#x27;星光烈火龙&#x27;</span>,<span class="hljs-string">&#x27;KO轩&#x27;</span>,<span class="hljs-string">&#x27;唱跳rap只因&#x27;</span>]
<span class="hljs-keyword">var</span> adminpro = [<span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>,<span class="hljs-string">&#x27;羽帆&#x27;</span>,<span class="hljs-string">&#x27;SAZ&#x27;</span>,<span class="hljs-string">&#x27;KyTT&#x27;</span>,<span class="hljs-string">&#x27;执着的树毛虫&#x27;</span>,<span class="hljs-string">&#x27;奶油.&#x27;</span>,<span class="hljs-string">&#x27;奶油&#x27;</span>,<span class="hljs-string">&#x27;奶油a&#x27;</span>,<span class="hljs-string">&#x27;高冷的小魏1y&#x27;</span>,<span class="hljs-string">&#x27;谢常浩然&#x27;</span>,<span class="hljs-string">&#x27;怂怂的小彤e2&#x27;</span>,<span class="hljs-string">&#x27;耐心的大黄鸡mSos&#x27;</span>,<span class="hljs-string">&#x27;QTK.十字铁路DCB&#x27;</span>]
<span class="hljs-keyword">const</span> heimingdan = [<span class="hljs-string">&#x27;忧郁的宇宙熊&#x27;</span>,<span class="hljs-string">&#x27;一只咸鸭蛋bn&#x27;</span>,<span class="hljs-string">&#x27;SAX&#x27;</span>]<span class="hljs-comment">//黑名单</span>
<span class="hljs-comment">// var victory = false</span>
<span class="hljs-keyword">var</span> lzxglist = [<span class="hljs-string">&#x27;JB6tX5vKo/o0R0gN&#x27;</span>]
<span class="hljs-keyword">var</span> msglist = [<span class="hljs-string">&#x27;等你发言&#x27;</span>,<span class="hljs-string">&#x27;等你发言&#x27;</span>]
<span class="hljs-keyword">var</span> dmm = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> zbznc = <span class="hljs-string">&#x27;&#x27;</span>;
<span class="hljs-keyword">var</span> dcz = [];
<span class="hljs-keyword">var</span> dctime = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> zbtime = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> beizhuadao = [];
<span class="hljs-keyword">var</span> dmmrenshu=<span class="hljs-number">0</span>;
<span class="hljs-comment">// console.clear()</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">use_duihuanma</span>(<span class="hljs-params">entity</span>)</span>{
    <span class="hljs-keyword">try</span>{
        <span class="hljs-keyword">if</span>(entity.duihuanma){
            entity.player.cancelDialogs()
        }
        <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.now());
        <span class="hljs-keyword">const</span> year = date.getFullYear()
        <span class="hljs-keyword">const</span> month = date.getMonth() + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">const</span> day = date.getDate();
        <span class="hljs-keyword">const</span> hour = date.getHours();
        <span class="hljs-keyword">const</span> minute = date.getMinutes();
        <span class="hljs-keyword">if</span>(entity.duihuanma.startsWith(<span class="hljs-string">&#x27;wansheng_code&#x27;</span>)){
            <span class="hljs-keyword">if</span>(entity.duihuanma.indexOf(<span class="hljs-string">&#x27;&amp;&#x27;</span>)!=-<span class="hljs-number">1</span>){
                entity.duihuanmainlist = entity.duihuanma.split(<span class="hljs-string">&#x27;&amp;&#x27;</span>)
                <span class="hljs-built_in">console</span>.log(entity.duihuanmainlist)
                <span class="hljs-keyword">if</span>(entity.duihuanmainlist[<span class="hljs-number">1</span>]==<span class="hljs-built_in">String</span>(entity.player.userId*<span class="hljs-number">3</span>+<span class="hljs-number">2023</span>)&amp;&amp;entity.duihuanmainlist[<span class="hljs-number">2</span>]==<span class="hljs-built_in">String</span>(entity.player.name.length)&amp;&amp;entity.duihuanmainlist[<span class="hljs-number">5</span>]==<span class="hljs-built_in">String</span>(month+day)&amp;&amp;entity.duihuanmainlist[<span class="hljs-number">6</span>]==<span class="hljs-built_in">String</span>(hour)&amp;&amp;<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">8</span>])/<span class="hljs-number">3</span>%<span class="hljs-number">1</span>==<span class="hljs-number">0</span>){
                    <span class="hljs-keyword">if</span>(((<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">3</span>])-<span class="hljs-number">99</span>)/<span class="hljs-number">2</span>)%<span class="hljs-number">9</span>==<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">4</span>])){
                        <span class="hljs-keyword">if</span>(minute-<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">7</span>])&lt;=<span class="hljs-number">5</span>){
                            dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`兑换成功！\n获得<span class="hljs-subst">${(<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">3</span>])-<span class="hljs-number">99</span>)/<span class="hljs-number">4</span>}</span>经验`</span>,entity);
                            entity.exp+=(<span class="hljs-built_in">parseInt</span>(entity.duihuanmainlist[<span class="hljs-number">3</span>])-<span class="hljs-number">99</span>)/<span class="hljs-number">4</span>;
                            entity.used_duihuanma.push(entity.duihuanma);
                            savePlayer(entity);
                        }
                        <span class="hljs-keyword">else</span>{
                            dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`此兑换码已过期`</span>,entity)
                        }
                    }
                    <span class="hljs-keyword">else</span>{
                        dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`此兑换码不存在`</span>,entity)
                    }
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`此兑换码不存在`</span>,entity)
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.duihuanma==<span class="hljs-string">&#x27;示例兑换码&#x27;</span>){
            dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`兑换成功，获得10exp`</span>,entity)
            entity.exp+=<span class="hljs-number">10</span>
            savePlayer(entity)
        }
        <span class="hljs-keyword">else</span>{
            dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`兑换码不存在`</span>,entity)   
        }
    }
    <span class="hljs-keyword">catch</span>(e){
        <span class="hljs-keyword">return</span>
    }
}
<span class="hljs-keyword">var</span> Storage = storage.getGroupStorage(<span class="hljs-string">&#x27;cundang&#x27;</span>); <span class="hljs-comment">// 获取数据库，名称为 cundang</span>

<span class="hljs-keyword">const</span> CorrespondingName = { <span class="hljs-comment">// 在此添加排行榜对应的单位和名称（无名称 则表示不显示名称）</span>
    <span class="hljs-string">&#x27;exp&#x27;</span>: [<span class="hljs-string">&#x27;经验&#x27;</span>, <span class="hljs-string">&#x27;无名称&#x27;</span>]
};

<span class="hljs-keyword">const</span> unsavedData = { <span class="hljs-comment">// 玩家初始无需保存的数据，可增添或删除</span>
    <span class="hljs-attr">victory</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">ingjf</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">cankick</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">dmmzy</span>: <span class="hljs-string">&#x27;&#x27;</span>,
    <span class="hljs-attr">dmmshoudao</span>: <span class="hljs-literal">false</span>
};

<span class="hljs-keyword">const</span> savedData = { <span class="hljs-comment">// 玩家初始需要保存的数据，可增添或删除</span>
    <span class="hljs-attr">exp</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">bag</span>: [],
    <span class="hljs-attr">greenlzxg</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">zhutu_position_x</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">zhutu_position_y</span>:<span class="hljs-number">6</span>,
    <span class="hljs-attr">zhutu_position_z</span>:<span class="hljs-number">4</span>,
    <span class="hljs-attr">chun_position_x</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">chun_position_y</span>:<span class="hljs-number">6</span>,
    <span class="hljs-attr">chun_position_z</span>:<span class="hljs-number">4</span>,
    <span class="hljs-attr">xia_position_x</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">xia_position_y</span>:<span class="hljs-number">6</span>,
    <span class="hljs-attr">xia_position_z</span>:<span class="hljs-number">4</span>,
    <span class="hljs-attr">qiu_position_x</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">qiu_position_y</span>:<span class="hljs-number">6</span>,
    <span class="hljs-attr">qiu_position_z</span>:<span class="hljs-number">4</span>,
    <span class="hljs-attr">dong_position_x</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">dong_position_y</span>:<span class="hljs-number">6</span>,
    <span class="hljs-attr">dong_position_z</span>:<span class="hljs-number">4</span>,
    <span class="hljs-attr">adminlevel</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">canplay</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">used_duihuanma</span>: [],
    <span class="hljs-attr">skins</span>: [<span class="hljs-string">&#x27;原版皮肤&#x27;</span>],
    <span class="hljs-attr">usingskin</span>: <span class="hljs-string">&#x27;原版&#x27;</span>,
    <span class="hljs-attr">last_team</span>: <span class="hljs-number">0</span>
};

<span class="hljs-comment">/**
 * 初始化玩家数据
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameEntity}</span> <span class="hljs-variable">entity</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initPlayer</span>(<span class="hljs-params">entity</span>) </span>{ <span class="hljs-comment">// 初始化玩家数据</span>
    <span class="hljs-built_in">Object</span>.assign(entity, savedData);
    <span class="hljs-built_in">Object</span>.assign(entity, unsavedData);
};

<span class="hljs-comment">/**
 * 获取玩家数据
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameEntity}</span> <span class="hljs-variable">entity</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPlayerData</span>(<span class="hljs-params">entity</span>) </span>{ <span class="hljs-comment">// 获取玩家数据</span>
    <span class="hljs-keyword">var</span> data = { <span class="hljs-string">&#x27;name&#x27;</span>: entity.player.name };
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> savedData) { <span class="hljs-comment">// 遍历savedData，获取玩家当前数据</span>
        data[i] = entity[i];
    };
    <span class="hljs-keyword">return</span> data;
};

<span class="hljs-comment">/**
 * 存档
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameEntity}</span> <span class="hljs-variable">entity</span></span>
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">savePlayer</span>(<span class="hljs-params">entity</span>) </span>{ <span class="hljs-comment">// 存档</span>
    <span class="hljs-keyword">await</span> Storage.update(entity.player.userId, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 更新玩家数据存档</span>
        <span class="hljs-keyword">return</span> getPlayerData(entity);
    });
};

<span class="hljs-comment">/**
 * 删档
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameEntity}</span> <span class="hljs-variable">entity</span></span>
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deletePlayer</span>(<span class="hljs-params">entity</span>) </span>{ <span class="hljs-comment">// 删档</span>
    entity.save = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">await</span> Storage.remove(entity.player.userId); <span class="hljs-comment">// 删除玩家数据存档</span>
};
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deletePlayerById</span>(<span class="hljs-params">id</span>) </span>{ <span class="hljs-comment">// 删档</span>
    <span class="hljs-keyword">await</span> Storage.remove(id); <span class="hljs-comment">// 删除玩家数据存档</span>
};

<span class="hljs-comment">/**
 * 读档
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{GameEntity}</span> <span class="hljs-variable">entity</span></span>
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadPlayer</span>(<span class="hljs-params">entity</span>) </span>{ <span class="hljs-comment">// 读档</span>
    initPlayer(entity);
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">await</span> Storage.get(entity.player.userId); <span class="hljs-comment">// 获取数据</span>
    <span class="hljs-keyword">if</span> (data) { <span class="hljs-comment">// 如果数据存在</span>
        <span class="hljs-built_in">Object</span>.assign(entity, data.value);
        entity.player.directMessage(<span class="hljs-string">&#x27;已为您读取数据！&#x27;</span>);
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// 如果数据不存在</span>
        <span class="hljs-keyword">await</span> Storage.set(entity.player.userId, getPlayerData(entity));
        entity.player.directMessage(<span class="hljs-string">&#x27;已为您创建数据！&#x27;</span>);
    };
};

<span class="hljs-comment">/**
 * 清档
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deleteAllData</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">// 清档</span>
    <span class="hljs-keyword">var</span> sqlDataList = <span class="hljs-keyword">await</span> Storage.list({ <span class="hljs-comment">// 将数据库内的所有数据分页</span>
        <span class="hljs-attr">cursor</span>: <span class="hljs-number">0</span>
    });
    world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.save = <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> sqlData <span class="hljs-keyword">of</span> sqlDataList.getCurrentPage()) { <span class="hljs-comment">// 遍历获取数据</span>
                <span class="hljs-keyword">await</span> Storage.remove(sqlData.key)
            }
            <span class="hljs-keyword">if</span> (sqlDataList.isLastPage) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 如果已经是最后一页，退出循环</span>
            <span class="hljs-keyword">await</span> sqlDataList.nextPage(); <span class="hljs-comment">// 下一页</span>
        };
    } <span class="hljs-keyword">catch</span> (e) {}
};

<span class="hljs-comment">/**
 * 显示排行榜
 * 
 * <span class="hljs-doctag">@param <span class="hljs-type">{string}</span> <span class="hljs-variable">type</span></span>
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leaderBoard</span>(<span class="hljs-params">type</span>) </span>{ <span class="hljs-comment">// 排行榜</span>
    <span class="hljs-keyword">var</span> list = [];
    <span class="hljs-keyword">var</span> sqlDataList = <span class="hljs-keyword">await</span> Storage.list({ <span class="hljs-comment">// 将数据库内的所有数据分页</span>
        <span class="hljs-attr">cursor</span>: <span class="hljs-number">0</span>
    });
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> sqlData <span class="hljs-keyword">of</span> sqlDataList.getCurrentPage()) { <span class="hljs-comment">// 遍历获取数据</span>
            list.includes([sqlData.value[<span class="hljs-string">&#x27;name&#x27;</span>], sqlData.value[type]]) ? <span class="hljs-literal">null</span> : list.push([sqlData.value[<span class="hljs-string">&#x27;name&#x27;</span>], sqlData.value[type]]);
        }
        list = list.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>]).slice(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>);
        <span class="hljs-keyword">if</span> (sqlDataList.isLastPage) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 如果已经是最后一页，退出循环</span>
        <span class="hljs-keyword">await</span> sqlDataList.nextPage(); <span class="hljs-comment">// 下一页</span>
    };
    <span class="hljs-keyword">return</span> list.map(<span class="hljs-function">(<span class="hljs-params">value, num</span>) =&gt;</span> <span class="hljs-comment">// 将列表里的所有项依次替换成字符串</span>
        <span class="hljs-string">`第<span class="hljs-subst">${num + <span class="hljs-number">1</span>}</span>名 | <span class="hljs-subst">${value[<span class="hljs-number">0</span>]}</span> | <span class="hljs-subst">${value[<span class="hljs-number">1</span>]}</span> <span class="hljs-subst">${CorrespondingName[type][<span class="hljs-number">0</span>]}</span><span class="hljs-subst">${CorrespondingName[type][<span class="hljs-number">1</span>] != <span class="hljs-string">&#x27;无名称&#x27;</span> ? CorrespondingName[type][<span class="hljs-number">1</span>] : <span class="hljs-string">&#x27;&#x27;</span>}</span>`</span>
    ).join(<span class="hljs-string">&quot;\n&quot;</span>); <span class="hljs-comment">// 按照 换行 的间隔组合成字符串</span>
};

<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./防止想不开.js&#x27;</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./宠物.js&#x27;</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find</span>(<span class="hljs-params">name</span>)</span>{
    <span class="hljs-keyword">const</span> a = world.querySelectorAll<span class="hljs-string">`player`</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> a)<span class="hljs-keyword">if</span>(a[i].player.name == name)<span class="hljs-keyword">return</span> a[i];
}

<span class="hljs-comment">//私聊</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chats</span>(<span class="hljs-params">entity, other, text</span>) </span>{
    other.player.directMessage(<span class="hljs-string">&#x27;收到一条私信&#x27;</span>)
    <span class="hljs-keyword">const</span> has = <span class="hljs-keyword">await</span> other.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;私聊&quot;</span>,
        <span class="hljs-attr">titleTextColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">titleBackgroundColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0.968</span>, <span class="hljs-number">0.702</span>, <span class="hljs-number">0.392</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">content</span>: <span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>：\n<span class="hljs-subst">${text}</span>`</span>,
        <span class="hljs-attr">options</span>: [<span class="hljs-string">&#x27;回复&#x27;</span>, <span class="hljs-string">&#x27;取消&#x27;</span>],
    });
    <span class="hljs-keyword">if</span> (!has || has === <span class="hljs-literal">null</span>) {
        entity.player.directMessage(<span class="hljs-string">&#x27;TA阅读了消息，但没有回复&#x27;</span>);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (has.value === <span class="hljs-string">&#x27;回复&#x27;</span>) {
        entity.player.directMessage(<span class="hljs-string">&#x27;对方收到了你的私信&#x27;</span>)
        <span class="hljs-keyword">const</span> returns = <span class="hljs-keyword">await</span> other.player.dialog({
            <span class="hljs-attr">type</span>: GameDialogType.INPUT,
            <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;私聊-回复&quot;</span>,
            <span class="hljs-attr">titleTextColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
            <span class="hljs-attr">titleBackgroundColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0.968</span>, <span class="hljs-number">0.702</span>, <span class="hljs-number">0.392</span>, <span class="hljs-number">1</span>),
            <span class="hljs-attr">content</span>: <span class="hljs-string">`<span class="hljs-subst">${other.player.name}</span>，请输入回复内容`</span>,
            <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;发送&#x27;</span>,
            <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&#x27;输入回复内容&#x27;</span>,
        });
        <span class="hljs-keyword">if</span> (!returns || returns === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        chats(other, entity, returns)
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (has.value === <span class="hljs-string">&#x27;取消&#x27;</span>) {
        entity.player.directMessage(<span class="hljs-string">&#x27;对方收到了你的私信&#x27;</span>)
    }
}
world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{ entity }</span>) =&gt;</span> {
    entity.player.interactTimes = <span class="hljs-number">0</span>;
    entity.enableInteract = <span class="hljs-literal">true</span>;
    entity.interactRadius = <span class="hljs-number">1.5</span>;
    <span class="hljs-keyword">if</span>(entity.player.name==<span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;奶油.&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;SAZ&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;羽帆&#x27;</span>){
        entity.interactHint = <span class="hljs-string">`与 【作者认证】 <span class="hljs-subst">${entity.player.name}</span> 互动`</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(admin.includes(entity.player.name||entity.adminlevel==<span class="hljs-number">1</span>)){
        entity.interactHint = <span class="hljs-string">`与 【管理员认证】 <span class="hljs-subst">${entity.player.name}</span> 互动`</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(adminpro.includes(entity.player.name||entity.adminlevel&gt;<span class="hljs-number">1</span>)){
        entity.interactHint = <span class="hljs-string">`与 【高级管理员】 <span class="hljs-subst">${entity.player.name}</span> 互动`</span>;
    }
    <span class="hljs-keyword">else</span>{
        entity.interactHint = <span class="hljs-string">`与 <span class="hljs-subst">${entity.player.name}</span> 互动`</span>;
    }
    entity.onInteract(<span class="hljs-keyword">async</span> ({ entity, targetEntity }) =&gt; {
        targetEntity.player.directMessage(<span class="hljs-string">&#x27;你被 &#x27;</span> + entity.player.name + <span class="hljs-string">&#x27; 访问了&#x27;</span>)
        <span class="hljs-keyword">while</span> (!entity.destroyed) {
            <span class="hljs-keyword">const</span> others = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: targetEntity.player.name + <span class="hljs-string">&#x27;&#x27;</span>,
                <span class="hljs-attr">titleTextColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
                <span class="hljs-attr">titleBackgroundColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0.968</span>, <span class="hljs-number">0.702</span>, <span class="hljs-number">0.392</span>, <span class="hljs-number">1</span>),
                <span class="hljs-attr">content</span>: <span class="hljs-string">`你要干啥`</span>,
                <span class="hljs-attr">options</span>: [<span class="hljs-string">&#x27;和TA私聊&#x27;</span>,<span class="hljs-string">&#x27;没啥，就看看&#x27;</span>],
            })
            <span class="hljs-keyword">if</span> (!others || others === <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (others.value == <span class="hljs-string">&#x27;和TA私聊&#x27;</span>) {
                <span class="hljs-keyword">const</span> chating = <span class="hljs-keyword">await</span> entity.player.dialog({
                    <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;私聊&quot;</span>,
                    <span class="hljs-attr">titleTextColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
                    <span class="hljs-attr">titleBackgroundColor</span>: <span class="hljs-keyword">new</span> GameRGBAColor(<span class="hljs-number">0.968</span>, <span class="hljs-number">0.702</span>, <span class="hljs-number">0.392</span>, <span class="hljs-number">1</span>),
                    <span class="hljs-attr">content</span>: <span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>，请输入私聊内容`</span>,
                    <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;发送&#x27;</span>,
                    <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&#x27;输入私聊内容&#x27;</span>,
                });
                <span class="hljs-keyword">if</span> (!chating || chating === <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span>;
                }
                chats(entity, targetEntity, chating)
                <span class="hljs-keyword">return</span>;
            }
        }
    })
})


<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dialog</span>(<span class="hljs-params">title,content,entity</span>)</span>{
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.TEXT,
        <span class="hljs-attr">title</span>: title,
        <span class="hljs-attr">content</span>: content,
    });
}

world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    entity.player.jumpPower=<span class="hljs-number">0.7</span>
    entity.player.doubleJumpPower=<span class="hljs-number">0.7</span>
})

world.onPlayerJoin(<span class="hljs-keyword">async</span>({ entity }) =&gt; {
    <span class="hljs-comment">// entity.player.enableDoubleJump=false</span>
    <span class="hljs-keyword">const</span> dialog = entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.TEXT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;作者&amp;协作者们&quot;</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>，欢迎来到毕业生跑酷pro，下面是对于本地图的一些介绍：\n
         · 老版地图不再更新，但关卡与pro版不同，链接：https://box3.codemao.cn/p/bysrun
         · 地图有sql存档，妈妈再也不用担心我把存档搞丢啦！
         · 地图有一个小彩蛋，你能找到吗？
         · 如有bug请在评论区@作者！
         · 经验计算规则：第一次游玩赠送50经验，以后每碰到一个新的存档点经验+1
         · 在游戏中违规被作者看到可能会被踢出/封禁
         · 加入Q群763919859领粒子效果！
         · 与朋友一起竞速吧！
        最后，祝您在毕业生跑酷pro玩得愉快！`</span>,
    });
    <span class="hljs-keyword">const</span> resultawa = <span class="hljs-keyword">await</span> entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;注意&#x27;</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`本地图（含旧版）已经一周年，进群763919859领取1周年福利`</span>,
        <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;确定&#x27;</span>]
    });
    <span class="hljs-keyword">if</span>(!resultawa || resultawa === <span class="hljs-literal">null</span>){
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(resultawa.value==<span class="hljs-string">&#x27;确定&#x27;</span>){
        entity.player.link(<span class="hljs-string">`http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=HNz3yHNTngoeIwY6G-u_MJYeuKg9yY49&amp;authKey=JMwkO%2BkIFr5qfXArsrAu98%2BUV50d6wTeeCxejnH36Wt6UeEi4a2wjb5N38l1n6w3&amp;noverify=0&amp;group_code=763919859`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">true</span>});
    }
    <span class="hljs-keyword">const</span> result3 = <span class="hljs-keyword">await</span> entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;注意&#x27;</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`本地图的通关实况出来啦！是否进入外部网站观看？（不会覆盖当前标签页）`</span>,
        <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;确定&#x27;</span>,<span class="hljs-string">&#x27;不了&#x27;</span>]
    });
    <span class="hljs-keyword">if</span>(!result3 || result3 === <span class="hljs-literal">null</span>){
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result3.value!=<span class="hljs-string">&#x27;不了&#x27;</span>){
        entity.player.link(<span class="hljs-string">`https://www.bilibili.com/video/BV1fe411Q7kL/?share_source=copy_web&amp;vd_source=47fb8dc2c290d3efba51bb252a91c38d`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">true</span>});
    }
    <span class="hljs-keyword">if</span>(entity.player.name == <span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;羽帆&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;SAZ&#x27;</span>){
        world.say(<span class="hljs-string">`作者 <span class="hljs-subst">${entity.player.name}</span> 来辣~`</span>)
    }
    <span class="hljs-keyword">else</span>{
        world.say(<span class="hljs-string">`欢迎 <span class="hljs-subst">${entity.player.name}</span> 进入毕业生跑酷pro！`</span>)
    }
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addWearable</span>(<span class="hljs-params">entity, data</span>) </span>{
    <span class="hljs-comment">// 这一步是把角度转成弧度</span>
    <span class="hljs-keyword">const</span> orientation = <span class="hljs-keyword">new</span> GameQuaternion(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
            .rotateZ(data.rotate[<span class="hljs-number">2</span>] * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) 
            .rotateX(data.rotate[<span class="hljs-number">0</span>] * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) 
            .rotateY(data.rotate[<span class="hljs-number">1</span>] * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) 
    <span class="hljs-comment">// 将上面声明的配置一一对应地传递给传递API</span>
    entity.player.addWearable({
        <span class="hljs-attr">bodyPart</span>: data.bodyPart,
        <span class="hljs-attr">mesh</span>: data.mesh,
        <span class="hljs-attr">orientation</span>: orientation,
        <span class="hljs-attr">scale</span>: data.scale,
        <span class="hljs-attr">offset</span>: data.offset,
    })
}
<span class="hljs-keyword">const</span> zuozhe = [
 { <span class="hljs-attr">bodyPart</span>: GameBodyPart.HEAD, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;头&#x27;</span>, <span class="hljs-attr">mesh</span>: <span class="hljs-string">&#x27;mesh/绿宝石块.vb&#x27;</span>, <span class="hljs-attr">offset</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">rotate</span>: [<span class="hljs-number">45</span>, <span class="hljs-number">45</span>, <span class="hljs-number">45</span>], <span class="hljs-attr">scale</span>: [<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>] },
 { <span class="hljs-attr">bodyPart</span>: GameBodyPart.HEAD, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;头&#x27;</span>, <span class="hljs-attr">mesh</span>: <span class="hljs-string">&#x27;mesh/钻石.vb&#x27;</span>, <span class="hljs-attr">offset</span>: [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">rotate</span>: [<span class="hljs-number">45</span>, <span class="hljs-number">45</span>, <span class="hljs-number">45</span>], <span class="hljs-attr">scale</span>: [<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>] },
<span class="hljs-comment">//  { bodyPart: GameBodyPart.TORSO, name: &#x27;躯干&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [0, 0.1, 0], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.TORSO, name: &#x27;臀部&#x27;, mesh: &#x27;mesh/光轮2000.vb&#x27;, offset: [0, -0.3, 0], rotate: [0, 0, 30], scale: [0.7, 0.7, 0.7] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_UPPER_ARM, name: &#x27;左上臂&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [0.1, 0.07,-0.02], rotate: [-128, 120, -85], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.RIGHT_UPPER_ARM, name: &#x27;右上臂&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [-0.1, 0.07,-0.02], rotate: [-45, -120, -85], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_LOWER_ARM, name: &#x27;左下臂&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [0, 0.11, 0], rotate: [-128, 120, -85], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.RIGHT_LOWER_ARM, name: &#x27;右下臂&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [0, 0.09, 0], rotate: [-45, -120, -85], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_UPPER_LEG, name: &#x27;左上腿&#x27;, mesh: &#x27;mesh/1楼.vb&#x27;, offset: [0, -0.05, 0], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.RIGHT_UPPER_LEG, name: &#x27;右上腿&#x27;, mesh: &#x27;mesh/雾雨魔理沙上腿.vb&#x27;, offset: [0, -0.1, 0], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_LOWER_LEG, name: &#x27;左下腿&#x27;, mesh: &#x27;mesh/雾雨魔理沙下腿.vb&#x27;, offset: [0, 0.07, 0], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.RIGHT_LOWER_LEG, name: &#x27;右下腿&#x27;, mesh: &#x27;mesh/雾雨魔理沙下腿.vb&#x27;, offset: [0, 0.07, 0], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_FOOT, name: &#x27;左脚&#x27;, mesh: &#x27;mesh/雾雨魔理沙脚.vb&#x27;, offset: [0, 0.06, 0.05], rotate: [0, 90, 0], scale: [0.5, 0.5, 0.5] },</span>
    <span class="hljs-comment">// { bodyPart: GameBodyPart.RIGHT_LOWER_ARM, name: &#x27;右手&#x27;, mesh: &#x27;mesh/我的世界_钻石剑.vb&#x27;, offset: [-0.2, 0.2, 0.2], rotate: [-45, 90, -45], scale: [1, 1, 1] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.LEFT_LOWER_ARM, name: &#x27;左手&#x27;, mesh: &#x27;mesh/我的世界·附魔三叉戟.vb&#x27;, offset: [0.15, 0.15, 0.09], rotate: [110, 243</span>
<span class="hljs-comment">//  , 180], scale: [0.5, 0.5, 0.5] },</span>
<span class="hljs-comment">//  { bodyPart: GameBodyPart.RIGHT_LOWER_ARM, name: &#x27;右手&#x27;, mesh: &#x27;mesh/皇冠.vb&#x27;, offset: [-0.16, 0.05, 0.1], rotate: [-138, 60, 95], scale: [0.5, 0.5, 0.5] },</span>
]
<span class="hljs-keyword">const</span> yufan = [
 { <span class="hljs-attr">bodyPart</span>: GameBodyPart.HEAD, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;头&#x27;</span>, <span class="hljs-attr">mesh</span>: <span class="hljs-string">&#x27;mesh/小鱼干.vb&#x27;</span>, <span class="hljs-attr">offset</span>: [<span class="hljs-number">1.3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">rotate</span>: [<span class="hljs-number">45</span>, -<span class="hljs-number">45</span>, <span class="hljs-number">45</span>], <span class="hljs-attr">scale</span>: [<span class="hljs-number">0.01</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.01</span>] }
]
<span class="hljs-keyword">const</span> saz = [
{<span class="hljs-attr">bodyPart</span>: GameBodyPart.RIGHT_LOWER_ARM, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;右下臂&#x27;</span>, <span class="hljs-attr">mesh</span>: <span class="hljs-string">&#x27;mesh/我的世界附魔钻石剑.vb&#x27;</span>, <span class="hljs-attr">offset</span>: [-<span class="hljs-number">0.4</span>, <span class="hljs-number">0.4</span>, <span class="hljs-number">0.25</span>], <span class="hljs-attr">rotate</span>: [<span class="hljs-number">135</span>, <span class="hljs-number">135</span>, <span class="hljs-number">135</span>], <span class="hljs-attr">scale</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]},
{<span class="hljs-attr">bodyPart</span>: GameBodyPart.HEAD_LOWER_ARM, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;头&#x27;</span>, <span class="hljs-attr">mesh</span>: <span class="hljs-string">&#x27;mesh/墨镜.vb&#x27;</span>, <span class="hljs-attr">offset</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.25</span>], <span class="hljs-attr">rotate</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">0</span>], <span class="hljs-attr">scale</span>: [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">0.3</span>]}
]
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chuandaipeijian</span>(<span class="hljs-params">entity</span>)</span>{
    <span class="hljs-keyword">if</span>(entity.player.name==<span class="hljs-string">`阿兹卡班毕业生`</span>){
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> data <span class="hljs-keyword">of</span> zuozhe) {
            addWearable(entity, data)
        }
        entity.player.directMessage(<span class="hljs-string">`穿戴配件成功`</span>);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.player.name==<span class="hljs-string">&#x27;KyTT&#x27;</span>||entity.player.name==<span class="hljs-string">&#x27;羽帆&#x27;</span>){
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> data <span class="hljs-keyword">of</span> yufan) {
            addWearable(entity, data)
        }
        entity.player.directMessage(<span class="hljs-string">`穿戴配件成功`</span>);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.player.name==<span class="hljs-string">`SAZ`</span>){
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> data <span class="hljs-keyword">of</span> saz) {
            addWearable(entity, data)
        }
         entity.player.directMessage(<span class="hljs-string">`穿戴配件成功`</span>);
        }
    <span class="hljs-comment">// else if(entity.player.name==`KyTT`){</span>
    <span class="hljs-comment">//     for (const data of kytt) {</span>
    <span class="hljs-comment">//         addWearable(entity, data)</span>
    <span class="hljs-comment">//     }</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-comment">// 有bug</span>
    <span class="hljs-comment">// if(hmd in entity.player.name){</span>
    <span class="hljs-comment">//     // 隐藏所有身体部件！</span>
    <span class="hljs-comment">//     for (const bodyPart in entity.player.skinInvisible) {</span>
    <span class="hljs-comment">//         entity.player.skinInvisible[bodyPart] = true;</span>
    <span class="hljs-comment">//     }</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-comment">// if(entity.player.name==&#x27;阿兹卡班毕业生&#x27;){</span>
        <span class="hljs-comment">// entity.player.setSkinByName(&#x27;苦力怕皮肤&#x27;);</span>
    <span class="hljs-comment">// }</span>
}
world.onPlayerJoin(<span class="hljs-keyword">async</span>({entity})=&gt;{
    chuandaipeijian(entity)
})

<span class="hljs-comment">//sql相关</span>
world.onPlayerLeave(<span class="hljs-keyword">async</span>({entity})=&gt;{
    entity.save != <span class="hljs-literal">false</span> ? <span class="hljs-keyword">await</span> savePlayer(entity) : <span class="hljs-literal">null</span>; <span class="hljs-comment">// 存档</span>
    savePlayer(entity);
})
<span class="hljs-keyword">const</span> points = world.querySelectorAll(<span class="hljs-string">&#x27;.存档点&#x27;</span>)
points.forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
    e.onEntityContact(<span class="hljs-function">(<span class="hljs-params">{other}</span>)=&gt;</span>{
        <span class="hljs-keyword">const</span> spawnPoint = e.position.add({<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,<span class="hljs-attr">y</span>: <span class="hljs-number">2.5</span>,<span class="hljs-attr">z</span>: <span class="hljs-number">0</span>});
        <span class="hljs-keyword">if</span>(spawnPoint.equals(other.player.spawnPoint))<span class="hljs-keyword">return</span>;
        other.player.spawnPoint = spawnPoint;
        other.zhutu_position_x=e.position.x;
        other.zhutu_position_y=e.position.y+<span class="hljs-number">2.5</span>;
        other.zhutu_position_z=e.position.z;
        savePlayer(other);
        other.player.directMessage(<span class="hljs-string">&#x27;存档成功，经验+1！&#x27;</span>);
        <span class="hljs-keyword">if</span>(other.victory==<span class="hljs-literal">false</span>){
            other.exp+=<span class="hljs-number">1</span>;
        }
    })
})
world.onFluidEnter(<span class="hljs-function">(<span class="hljs-params">{entity, tick, voxel}</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> voxelName = voxels.name(voxel)
    <span class="hljs-keyword">if</span> (voxelName==<span class="hljs-string">&#x27;water&#x27;</span>&amp;&amp;entity.ingjf==<span class="hljs-literal">false</span>){
        entity.player.forceRespawn()
        entity.player.directMessage(<span class="hljs-string">`落水重生`</span>)
    }
})

world.onChat(<span class="hljs-function">(<span class="hljs-params">{message,entity}</span>)=&gt;</span>{
            <span class="hljs-keyword">var</span> huancun = msglist[<span class="hljs-number">0</span>];
            msglist[<span class="hljs-number">0</span>]=entity.player.name+<span class="hljs-string">&#x27;：\n&#x27;</span>+message;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">2</span>;i++){
                msglist[i] = huancun;
                huancun = msglist[i+<span class="hljs-number">1</span>]
            }
            world.say(<span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>：<span class="hljs-subst">${message}</span>`</span>)
            <span class="hljs-keyword">if</span>(entity.player.name!=<span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>&amp;&amp;(message==<span class="hljs-string">`ban 阿兹卡班毕业生`</span>||message==<span class="hljs-string">`kick 阿兹卡班毕业生`</span>)){
                dialog(<span class="hljs-string">`作者`</span>,<span class="hljs-string">`胆子很大啊！敢封禁/踢出作者！`</span>,entity);
                entity.position.set(<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">10</span>);
            }
        })
        world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
            world.onChat(<span class="hljs-function">(<span class="hljs-params">{message,entity:user}</span>)=&gt;</span>{  
                <span class="hljs-keyword">if</span>(user.player.name=<span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>){
                    <span class="hljs-comment">// if(message.startsWith(&#x27;push admin&#x27;)){</span>
                    <span class="hljs-comment">//     console.log(message.slice(11));</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(11)){</span>
                    <span class="hljs-comment">//         entity.isadmin=true;</span>
                    <span class="hljs-comment">//         savePlayer(entity);</span>
                    <span class="hljs-comment">//         world.say(&#x27;恭喜&#x27;+entity.player.name+&#x27;成为管理员&#x27;);</span>
                    <span class="hljs-comment">//         dialog(`阿兹卡班毕业生`,`恭喜你入选管理员，希望你为毕业生跑酷pro做出贡献\n刷新后生效`,entity);</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                    <span class="hljs-comment">// if(message.startsWith(&#x27;kick&#x27;)){</span>
                    <span class="hljs-comment">//     console.log(message.slice(5));</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(5)){</span>
                    <span class="hljs-comment">//         entity.position.set(2,6,10);</span>
                    <span class="hljs-comment">//         dialog(``,`你被踢出`,entity);</span>
                    <span class="hljs-comment">//         entity.player.kick()</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                    <span class="hljs-comment">// else if(message.startsWith(&#x27;ban&#x27;)){</span>
                    <span class="hljs-comment">//     console.log(message.slice(5));</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(4)){</span>
                    <span class="hljs-comment">//         entity.canplay=false;</span>
                    <span class="hljs-comment">//         savePlayer(entity);</span>
                    <span class="hljs-comment">//         entity.position.set(2,6,10);</span>
                    <span class="hljs-comment">//         dialog(``,`你被封禁，移至小黑屋，请退出游戏`,entity);</span>
                    <span class="hljs-comment">//         world.say(entity.player.name+&#x27;被作者封禁&#x27;);</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                    <span class="hljs-comment">// else if(message.startsWith(&#x27;canplay&#x27;)){</span>
                    <span class="hljs-comment">//     console.log(message.slice(8));</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(8)){</span>
                    <span class="hljs-comment">//         entity.canplay=true;</span>
                    <span class="hljs-comment">//         entity.position.set(2,10,10);</span>
                    <span class="hljs-comment">//         dialog(``,`已解除封禁\n为了防止sql存档异常，请右键sql存档或者踩一个存档点`,entity);</span>
                    <span class="hljs-comment">//         savePlayer(entity);</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                    <span class="hljs-comment">// else if(message.startsWith(&#x27;e&#x27;)){</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(11)){</span>
                    <span class="hljs-comment">//         entity.e=true;</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                    <span class="hljs-comment">// else if(message.startsWith(&#x27;cannotcommand&#x27;)){</span>
                    <span class="hljs-comment">//     if(entity.player.name==message.slice(14)){</span>
                    <span class="hljs-comment">//         entity.e=false;</span>
                    <span class="hljs-comment">//     }</span>
                    <span class="hljs-comment">// }</span>
                }
            })
    })
<span class="hljs-comment">// })</span>
<span class="hljs-comment">// world.onPlayerJoin(({entity})=&gt;{</span>
<span class="hljs-comment">//     entity.player.onChat(({message,entity:user})=&gt;{world.say(`${user.player.name}：${message}`)})</span>
<span class="hljs-comment">// })</span>
<span class="hljs-comment">// npc交互</span>
<span class="hljs-keyword">const</span> xiaoheiwu = world.querySelector(<span class="hljs-string">&#x27;#小黑屋&#x27;</span>);
xiaoheiwu.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
xiaoheiwu.interactRadius = <span class="hljs-number">5</span>;   <span class="hljs-comment">// 实体的互动范围</span>
xiaoheiwu.interactHint = <span class="hljs-string">`小黑屋\n不想被关进小黑屋就安分守己哦~`</span>; <span class="hljs-comment">// 互动提示框显示实体的名称</span>
xiaoheiwu.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>

<span class="hljs-keyword">const</span> stone2023 = world.querySelector(<span class="hljs-string">&#x27;#2023&#x27;</span>);
stone2023.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
stone2023.interactRadius = <span class="hljs-number">5</span>;   <span class="hljs-comment">// 实体的互动范围</span>
stone2023.interactHint = <span class="hljs-string">`2023纪念石`</span>; <span class="hljs-comment">// 互动提示框显示实体的名称</span>
stone2023.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
<span class="hljs-comment">// stone2023.onInteract(({entity})=&gt;{</span>
<span class="hljs-comment">//     entity.player.link(`https://azkbbys.gitbook.io/azkbbys/celebrate/on-going/2024-happy-new-year`, {isConfirm: false, isNewTab: true});</span>
<span class="hljs-comment">// })</span>


<span class="hljs-keyword">const</span> tzxyg1 = world.querySelector(<span class="hljs-string">&#x27;#跳转下一关-1&#x27;</span>);
tzxyg1.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
tzxyg1.interactRadius = <span class="hljs-number">2</span>;   <span class="hljs-comment">// 实体的互动范围</span>
tzxyg1.interactHint = <span class="hljs-string">`互动跳转下一关`</span>; <span class="hljs-comment">// 互动提示框显示实体的名称</span>
tzxyg1.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
tzxyg1.onInteract(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    entity.position.set(<span class="hljs-number">123</span>,<span class="hljs-number">15</span>,<span class="hljs-number">30</span>)
})

<span class="hljs-keyword">const</span> boat = world.querySelector(<span class="hljs-string">&#x27;#船&#x27;</span>);
boat.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
boat.interactRadius = <span class="hljs-number">2</span>;   <span class="hljs-comment">// 实体的互动范围</span>
boat.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
boat.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
boat.onInteract(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    dialog(<span class="hljs-string">`小船`</span>,<span class="hljs-string">`嘿！发现彩蛋啦！\n给你上上色~\n加入Q群763919859领取更多福利！`</span>,entity)
    entity.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
})

<span class="hljs-keyword">const</span> caidanflower = world.querySelector(<span class="hljs-string">&#x27;#彩蛋花&#x27;</span>);
caidanflower.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
caidanflower.interactRadius = <span class="hljs-number">2</span>;   <span class="hljs-comment">// 实体的互动范围</span>
caidanflower.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
caidanflower.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
caidanflower.onInteract(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    dialog(<span class="hljs-string">`花`</span>,<span class="hljs-string">`嘿！发现彩蛋啦！\n给你1经验！可以重复领取！顺便给你上上色吧~别忘了手动点击保存哦\n加入Q群763919859领取更多福利！`</span>,entity)
    entity.exp+=<span class="hljs-number">1</span>
    entity.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0.1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)
})

<span class="hljs-keyword">const</span> xuanzefutu = world.querySelector(<span class="hljs-string">&#x27;#dream-1&#x27;</span>);
xuanzefutu.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
xuanzefutu.interactRadius = <span class="hljs-number">5</span>;   <span class="hljs-comment">// 实体的互动范围</span>
xuanzefutu.interactHint = <span class="hljs-string">`选择附图`</span>; <span class="hljs-comment">// 互动提示框显示实体的名称</span>
xuanzefutu.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
xuanzefutu.onInteract(<span class="hljs-keyword">async</span>({entity})=&gt;{
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;选择附图&#x27;</span>,
        <span class="hljs-attr">content</span>:<span class="hljs-string">`点击附图名称，查看详情`</span>,
        <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;春&#x27;</span>,<span class="hljs-string">&#x27;夏&#x27;</span>]
    });
    <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
        <span class="hljs-keyword">return</span>; 
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;春&#x27;</span>){
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
            <span class="hljs-attr">type</span>: GameDialogType.SELECT,
            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;地图详情&#x27;</span>,
            <span class="hljs-attr">content</span>:<span class="hljs-string">`地图主题：春\n\n点击按钮进入地图`</span>,
            <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;进入地图&#x27;</span>,<span class="hljs-string">&#x27;就是看看&#x27;</span>]
        });
        <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
            <span class="hljs-keyword">return</span>; 
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;进入地图&#x27;</span>){
            entity.player.link(<span class="hljs-string">`https://dao3.fun/play/6d789dabd5e09ca687ce`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">false</span>});
        }
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;夏&#x27;</span>){
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
            <span class="hljs-attr">type</span>: GameDialogType.SELECT,
            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;地图详情&#x27;</span>,
            <span class="hljs-attr">content</span>:<span class="hljs-string">`地图主题：夏\n\n点击按钮进入地图`</span>,
            <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;进入地图&#x27;</span>,<span class="hljs-string">&#x27;就是看看&#x27;</span>]
        });
        <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
            <span class="hljs-keyword">return</span>; 
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;进入地图&#x27;</span>){
            entity.player.link(<span class="hljs-string">`https://dao3.fun/play/54230e5fd4ecbaecc0ee`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">false</span>});
        }
    }
})

<span class="hljs-keyword">const</span> tiaoguandream = world.querySelector(<span class="hljs-string">&#x27;#跳关dream&#x27;</span>);
tiaoguandream.enableInteract = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 允许进行互动</span>
tiaoguandream.interactRadius = <span class="hljs-number">5</span>;   <span class="hljs-comment">// 实体的互动范围</span>
tiaoguandream.interactHint = <span class="hljs-string">`跳关`</span>; <span class="hljs-comment">// 互动提示框显示实体的名称</span>
tiaoguandream.interactColor = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);  <span class="hljs-comment">// 互动提示的文字颜色</span>
tiaoguandream.onInteract(<span class="hljs-keyword">async</span>({entity})=&gt;{
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;选择&#x27;</span>,
        <span class="hljs-attr">content</span>:<span class="hljs-string">`确定花费40exp跳关么`</span>,
        <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;是&#x27;</span>,<span class="hljs-string">&#x27;否&#x27;</span>]
    });
    <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
        <span class="hljs-keyword">return</span>; 
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;是&#x27;</span>){
        <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">40</span>){
            entity.exp-=<span class="hljs-number">40</span>;
            entity.position.set(<span class="hljs-number">79</span>,<span class="hljs-number">19</span>,<span class="hljs-number">18</span>)
            savePlayer(entity)
            entity.player.directMessage(<span class="hljs-string">&#x27;跳关成功&#x27;</span>)
        }
        <span class="hljs-keyword">else</span>{
            dialog(<span class="hljs-string">&#x27;错误&#x27;</span>,<span class="hljs-string">&#x27;经验不足&#x27;</span>,entity)
        }
    }
})

<span class="hljs-keyword">const</span> end = world.querySelector(<span class="hljs-string">&#x27;#终点&#x27;</span>);
<span class="hljs-comment">// end.enableInteract = true; // 允许进行互动</span>
<span class="hljs-comment">// end.interactRadius = 2;   // 实体的互动范围</span>
end.onEntityContact(<span class="hljs-keyword">async</span>({other})=&gt;{
    <span class="hljs-keyword">if</span>(other.victory==<span class="hljs-literal">false</span>){
        other.position.set(<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">4</span>)
        other.player.color= <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)
        other.player.canFly=<span class="hljs-literal">true</span>
        other.player.spectator=<span class="hljs-literal">true</span>
        dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`恭喜你通关了！！！\n已开启您的飞行权限\n经验+50`</span>,other)
        world.say(<span class="hljs-string">`恭喜<span class="hljs-subst">${other.player.name}</span>通关游戏！`</span>)
        other.exp+=<span class="hljs-number">50</span>
        other.zhutu_position_x=savedData.zhutu_position_x
        other.zhutu_position_y=savedData.zhutu_position_y
        other.zhutu_position_z=savedData.zhutu_position_z
        savePlayer(other)
        other.victory=<span class="hljs-literal">true</span>
    }
    <span class="hljs-keyword">else</span>{
        dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`你已经通过关了，按下右键-重来可以重来`</span>,other)
    }
})

<span class="hljs-comment">// 碰撞过滤</span>
world.addCollisionFilter(<span class="hljs-string">&#x27;player&#x27;</span>,<span class="hljs-string">&#x27;player&#x27;</span>)
<span class="hljs-comment">//黑名单</span>
world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(heimingdan.includes(entity.player.name)){
        entity.player.kick()
    }
})
<span class="hljs-comment">// 管理员代码</span>
world.onChat(<span class="hljs-function">(<span class="hljs-params">{ entity, message }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(adminpro.includes(entity.player.name)||entity.adminlevel&gt;<span class="hljs-number">1</span>){
        <span class="hljs-keyword">if</span> (message.startsWith(<span class="hljs-string">&#x27;$&#x27;</span>)) {
            <span class="hljs-keyword">try</span> {
                world.say(<span class="hljs-string">&#x27;&lt;~ &#x27;</span> + <span class="hljs-built_in">eval</span>(message.slice(<span class="hljs-number">1</span>)))
            }
            <span class="hljs-keyword">catch</span> (err) {
                world.say(<span class="hljs-string">&#x27;&lt;~ &#x27;</span> + err)
            }
        }
    }
})

<span class="hljs-keyword">const</span> particle_greenCrystal = {
    <span class="hljs-attr">particleRate</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">particleLifetime</span>: <span class="hljs-number">0.4</span>,
    <span class="hljs-attr">particleSize</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.25</span>],
    <span class="hljs-attr">particleColor</span>: [
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
    ],
}
<span class="hljs-keyword">const</span> test_green = {
    <span class="hljs-attr">particleRate</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">particleLifetime</span>: <span class="hljs-number">999</span>,
    <span class="hljs-attr">particleSize</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.25</span>],
    <span class="hljs-attr">particleColor</span>: [
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
    ],
}
<span class="hljs-keyword">const</span> particle_purpleCrystal = {
    <span class="hljs-attr">particleRate</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">particleLifetime</span>: <span class="hljs-number">0.4</span>,
    <span class="hljs-attr">particleSize</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.25</span>],
    <span class="hljs-attr">particleColor</span>: [
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
    ],
}
<span class="hljs-keyword">const</span> wcbl = {
    <span class="hljs-attr">particleRate</span>: <span class="hljs-number">700</span>,
    <span class="hljs-attr">particleLifetime</span>: <span class="hljs-number">1.5</span>,
    <span class="hljs-attr">particleSize</span>: [<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>],
    <span class="hljs-attr">particleColor</span>: [
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
    ],
}
world.onPlayerJoin(<span class="hljs-keyword">async</span>({entity})=&gt;{
    <span class="hljs-keyword">await</span> loadPlayer(entity)
    <span class="hljs-keyword">if</span>(entity.player.name==<span class="hljs-string">&#x27;阿兹卡班毕业生&#x27;</span>){
        entity.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)
        <span class="hljs-built_in">Object</span>.assign(entity, wcbl)
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(admin.includes(entity.player.name)||adminpro.includes(entity.player.name)||entity.adminlevel&gt;<span class="hljs-number">0</span>){
        <span class="hljs-built_in">Object</span>.assign(entity, particle_purpleCrystal)
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.greenlzxg==<span class="hljs-literal">true</span>||lzxglist.includes(entity.player.userKey)||lzxglist.includes(entity.player.name)){
        <span class="hljs-built_in">Object</span>.assign(entity, particle_greenCrystal)
    }
    <span class="hljs-comment">// 管理员sql与地图管理员列表同步</span>
    <span class="hljs-comment">// if(admin.includes(entity.player.name)){</span>
    <span class="hljs-comment">//     entity.isadmin=true;</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-comment">// if(entity.isPlayer==true&amp;&amp;admin.includes(entity.player.name)==false){</span>
    <span class="hljs-comment">//     admin.push(entity.player.name)</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-comment">// 检测网址中是否含有兑换码，如含有则使用</span>
    <span class="hljs-keyword">var</span> playerurl_string = entity.player.url;
    <span class="hljs-keyword">var</span> playerurl  = <span class="hljs-keyword">new</span> URL(playerurl_string);
    entity.duihuanma = playerurl.searchParams.get(<span class="hljs-string">&#x27;code&#x27;</span>)
    use_duihuanma(entity)
    <span class="hljs-comment">// 位置设置</span>
    entity.position.set(entity.zhutu_position_x,entity.zhutu_position_y,entity.zhutu_position_z)
    entity.player.spawnPoint.set(entity.zhutu_position_x,entity.zhutu_position_y,entity.zhutu_position_z)
    <span class="hljs-comment">// 更换皮肤</span>
    <span class="hljs-keyword">if</span>(entity.usingskin!=<span class="hljs-string">&#x27;原版&#x27;</span>){
        entity.player.setSkinByName(entity.usingskin);
    }
    <span class="hljs-comment">// 检测组队</span>
    <span class="hljs-keyword">try</span>{
        entity.playerurl_string = entity.player.url;
        entity.playerurl  = <span class="hljs-keyword">new</span> URL(entity.playerurl_string);
        <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.now());
        <span class="hljs-keyword">const</span> month = date.getMonth() + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">const</span> day = date.getDate();
        <span class="hljs-keyword">if</span>(entity.playerurl.searchParams.get(<span class="hljs-string">&#x27;serverId&#x27;</span>)&amp;&amp;entity.playerurl.searchParams.get(<span class="hljs-string">&#x27;teamId&#x27;</span>)&amp;&amp;entity.last_team!=month+day){
            entity.can=<span class="hljs-literal">true</span>;
            world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
                e.playerurl_string = e.player.url;
                e.playerurl  = <span class="hljs-keyword">new</span> URL(e.playerurl_string);
                <span class="hljs-keyword">if</span>(e.playerurl.searchParams.get(<span class="hljs-string">&#x27;serverId&#x27;</span>)&amp;&amp;e.playerurl.searchParams.get(<span class="hljs-string">&#x27;teamId&#x27;</span>)){}
                <span class="hljs-keyword">else</span>{
                    entity.can=<span class="hljs-literal">false</span>
                }
            })
            <span class="hljs-keyword">if</span>(entity.can==<span class="hljs-literal">true</span>){
                entity.exp += <span class="hljs-number">10000</span>
                entity.last_team = month+day
                savePlayer(entity)
                dialog(<span class="hljs-string">`组队福利领取成功`</span>,<span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>，欢迎使用组队功能来到本地图，1w经验已自动领取\n若您是队长，可以截图队伍界面后联系毕业生领取管理员`</span>,entity)   
            }
            <span class="hljs-keyword">else</span>{
                dialog(<span class="hljs-string">`组队福利领取失败`</span>,<span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>，偷偷改链接是没用的哦~`</span>,entity)
            }
        }
        <span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">if</span>(entity.last_team==month+day){
                dialog(<span class="hljs-string">`组队福利领取失败`</span>,<span class="hljs-string">`<span class="hljs-subst">${entity.player.name}</span>，今天你已领过组队福利，请明天再来！`</span>,entity)
            }
        }
    }
    <span class="hljs-keyword">catch</span>(e){}
})
 

<span class="hljs-comment">// 右键菜单</span>
world.onPress(<span class="hljs-keyword">async</span>({button,entity})=&gt;{
    <span class="hljs-keyword">if</span>(button===<span class="hljs-string">&#x27;action1&#x27;</span>){
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
            <span class="hljs-attr">type</span>: GameDialogType.SELECT,
            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;游戏菜单&#x27;</span>,
            <span class="hljs-attr">content</span>:<span class="hljs-string">`你有<span class="hljs-subst">${entity.exp}</span>经验\n`</span>+ <span class="hljs-string">`你的血量：`</span>+entity.hp+<span class="hljs-string">`/`</span>+entity.maxHp+<span class="hljs-string">`\n你的坐标：`</span>+entity.position,
            <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;赞助毕业生，得顶级福利&#x27;</span>,<span class="hljs-string">&#x27;选择附图&#x27;</span>,<span class="hljs-string">&#x27;关于gameUi&#x27;</span>,<span class="hljs-string">&#x27;兑换码&#x27;</span>,<span class="hljs-string">&#x27;sql存档&#x27;</span>,<span class="hljs-string">&#x27;sql删档&#x27;</span>,<span class="hljs-string">&#x27;经验排行榜&#x27;</span>,<span class="hljs-string">&#x27;皮肤库&#x27;</span>,<span class="hljs-string">&#x27;商店&#x27;</span>,<span class="hljs-string">&#x27;背包&#x27;</span>,<span class="hljs-string">&#x27;重来&#x27;</span>,<span class="hljs-string">&#x27;脱离卡点&#x27;</span>,<span class="hljs-string">&#x27;进入/离开挂机房&#x27;</span>,<span class="hljs-string">&#x27;进入/退出俯视全图&#x27;</span>,<span class="hljs-string">&#x27;切换人称&#x27;</span>,<span class="hljs-string">&#x27;bug反馈&#x27;</span>,<span class="hljs-string">&#x27;禁言玩家说话&#x27;</span>,<span class="hljs-string">&#x27;管理员工具&#x27;</span>]
        });
        <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
            <span class="hljs-keyword">return</span>; 
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;赞助毕业生，得顶级福利&#x27;</span>){
            entity.player.link(<span class="hljs-string">`https://azkbbys.gitbook.io/azkbbys/zzbys`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">true</span>})
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;选择附图&#x27;</span>){
            entity.position.set(<span class="hljs-number">97</span>,<span class="hljs-number">40</span>,<span class="hljs-number">74</span>);
            dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`你已进入附图选择区域，与dream互动即可选择附图，要退出请右键点击“脱离卡点”`</span>,entity)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;关于gameUi&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;gameUi&#x27;</span>,
                <span class="hljs-attr">content</span>:<span class="hljs-string">`选择你要进行的操作`</span>,
                <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;取消操作&#x27;</span>,<span class="hljs-string">&#x27;关闭gameUi&#x27;</span>,<span class="hljs-string">&#x27;刷新gameUi内容/开启gameUi&#x27;</span>,<span class="hljs-string">&#x27;刷新gameUi大小&#x27;</span>]
            });
            <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                <span class="hljs-keyword">return</span>; 
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;关闭gameUi&#x27;</span>){
                remoteChannel.sendClientEvent(entity, {<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;command&#x27;</span>,<span class="hljs-attr">args</span>:<span class="hljs-string">&#x27;close&#x27;</span>})
                entity.player.directMessage(<span class="hljs-string">`已关闭`</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;刷新gameUi内容/开启gameUi&#x27;</span>){
                remoteChannel.sendClientEvent(entity, {
                    <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;command&#x27;</span>,
                    <span class="hljs-attr">args</span>:<span class="hljs-string">&#x27;open&#x27;</span>
                })
                remoteChannel.sendClientEvent(entity, {
                    <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;玩家信息1&#x27;</span>,
                    <span class="hljs-attr">args</span>:{
                        <span class="hljs-attr">avatar</span>:entity.player.avatar,
                        <span class="hljs-attr">name</span>:entity.player.name,
                        <span class="hljs-attr">player_title</span>:entity.player_title
                    }
                })
                entity.player.directMessage(<span class="hljs-string">`刷新/开启成功`</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;刷新gameUi大小&#x27;</span>){
                remoteChannel.sendClientEvent(entity, {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;刷新大小&#x27;</span>,
                    <span class="hljs-attr">args</span>: <span class="hljs-literal">null</span>
                })
                entity.player.directMessage(<span class="hljs-string">`当前暂不支持刷新，请刷新网页即可`</span>)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;兑换码&#x27;</span>){
            entity.duihuanma = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;兑换&#x27;</span>,
                <span class="hljs-attr">content</span>: <span class="hljs-string">`输入你所获得的兑换码\n兑换码可以在Q群763919859获得！`</span>,
                <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
            });
            <span class="hljs-keyword">if</span>(!entity.duihuanma || entity.duihuanma === <span class="hljs-literal">null</span>){ 
                entity.player.link(<span class="hljs-string">`http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=Atg_SCPUyp2d8yAAxjaozzjFH3eu198J&amp;authKey=ohyqS%2FYbJ%2F3C%2BkzrFVQSS7wJoeifKFxeo8SNr4KsX7fey6sx%2Fy%2FX7JEF%2Bvtkryd1&amp;noverify=0&amp;group_code=763919859`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">true</span>})
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.used_duihuanma.includes(entity.duihuanma)==<span class="hljs-literal">true</span>){
                dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`这个兑换码已经使用过了`</span>,entity)
            }
            <span class="hljs-keyword">else</span>{
                use_duihuanma(entity)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;sql存档&#x27;</span>){
            savePlayer(entity);
            dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`存档成功！\n每次踩到存档点会自动进行所有数据的保存`</span>,entity)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;sql删档&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;你确定要删档吗？&#x27;</span>,
                <span class="hljs-attr">content</span>:<span class="hljs-string">`你确定要删档吗？\n删档后一切数据将消失！\n不能后悔！`</span>,
                <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;不确定&#x27;</span>,<span class="hljs-string">&#x27;算了&#x27;</span>,<span class="hljs-string">&#x27;没想好&#x27;</span>,<span class="hljs-string">&#x27;不删&#x27;</span>,<span class="hljs-string">&#x27;删了吧&#x27;</span>]
            });
            <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;删了吧&#x27;</span>){
                <span class="hljs-built_in">Object</span>.assign(entity, savedData);
                savePlayer(entity);
                entity.player.kick();
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;经验排行榜&#x27;</span>){
            <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;select&#x27;</span>,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;排行&#x27;</span>,
                <span class="hljs-attr">content</span>: <span class="hljs-keyword">await</span> leaderBoard(<span class="hljs-string">&#x27;exp&#x27;</span>),
                <span class="hljs-attr">options</span>: [<span class="hljs-string">&#x27;确认&#x27;</span>]
            });
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;皮肤库&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;选择皮肤&#x27;</span>,
                <span class="hljs-attr">content</span>:<span class="hljs-string">`请选择要使用的皮肤`</span>,
                <span class="hljs-attr">options</span>:entity.skins
            });
            <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                entity.player.resetToDefaultSkin()
                entity.usingskin = <span class="hljs-string">&#x27;原版&#x27;</span>
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value!=<span class="hljs-string">&#x27;原版皮肤&#x27;</span>){
                entity.usingskin = result.value;
                entity.player.setSkinByName(result.value)
            }
            <span class="hljs-keyword">else</span>{
                entity.player.resetToDefaultSkin()
                entity.usingskin = <span class="hljs-string">&#x27;原版&#x27;</span>
            }
            savePlayer(entity)
            entity.player.directMessage(<span class="hljs-string">&#x27;切换成功&#x27;</span>)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;商店&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;你要买点啥？&#x27;</span>,
                <span class="hljs-attr">content</span>:<span class="hljs-string">`你要买点啥？\n你有<span class="hljs-subst">${entity.exp}</span>经验\n说明：名称（价格）（备注）`</span>,
                <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;退出&#x27;</span>,
                <span class="hljs-string">&#x27;永久绿色粒子效果（150exp）（全图同步）&#x27;</span>,
                <span class="hljs-string">&#x27;永久苦力怕皮肤（500exp）（全图同步）（鬼知道作者把皮肤做成了啥样）&#x27;</span>,
                <span class="hljs-string">&#x27;永久史蒂夫皮肤（500exp）（全图同步）（还原度还是可以的吧）&#x27;</span>,
                <span class="hljs-string">&#x27;一次性飞行特权（70exp）（开启飞行权限，仅能在一个地图使用！有效期：2s）&#x27;</span>,
                <span class="hljs-string">&#x27;一次性飞行变速器（5exp）（更改飞行速度，仅能在一个地图使用！使用前提：已经开启飞行）&#x27;</span>,
                <span class="hljs-string">&#x27;缩小药水（70exp）（一次性，将角色大小缩小50%，不可叠加使用）&#x27;</span>,
                <span class="hljs-string">&#x27;还原药水（1exp）（一次性，将角色大小还原&#x27;</span>,
                <span class="hljs-string">&#x27;放大药水（70exp）（一次性，将角色大小增大50%，不可叠加使用）&#x27;</span>]
            });
            <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                <span class="hljs-keyword">return</span>; 
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;永久绿色粒子效果（150exp）（全图同步）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">150</span>){
                    entity.exp-=<span class="hljs-number">150</span>;
                    entity.greenlzxg=<span class="hljs-literal">true</span>;
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已自动使用，刷新后生效`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;永久苦力怕皮肤（500exp）（全图同步）（鬼知道作者把皮肤做成了啥样）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">500</span>&amp;&amp;entity.skins.includes(<span class="hljs-string">&#x27;苦力怕&#x27;</span>)==<span class="hljs-literal">false</span>){
                    entity.exp-=<span class="hljs-number">500</span>;
                    entity.skins.push(<span class="hljs-string">&#x27;苦力怕&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入皮肤库，可右键点击“皮肤库”使用`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够或已拥有皮肤`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;永久史蒂夫皮肤（500exp）（全图同步）（还原度还是可以的吧）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">500</span>&amp;&amp;entity.skins.includes(<span class="hljs-string">&#x27;史蒂夫&#x27;</span>)==<span class="hljs-literal">false</span>){
                    entity.exp-=<span class="hljs-number">500</span>;
                    entity.skins.push(<span class="hljs-string">&#x27;史蒂夫&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入皮肤库，可右键点击“皮肤库”使用`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够或已拥有皮肤`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性飞行特权（70exp）（开启飞行权限，仅能在一个地图使用！有效期：2s）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">80</span>){
                    entity.exp-=<span class="hljs-number">80</span>;
                    entity.bag.push(<span class="hljs-string">&#x27;一次性飞行特权&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入背包`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性飞行变速器（5exp）（更改飞行速度，仅能在一个地图使用！使用前提：已经开启飞行）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">5</span>){
                    entity.exp-=<span class="hljs-number">5</span>;
                    entity.bag.push(<span class="hljs-string">&#x27;一次性飞行变速器&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入背包`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;缩小药水（70exp）（一次性，将角色大小缩小50%，不可叠加使用）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">70</span>){
                    entity.exp-=<span class="hljs-number">70</span>;
                    entity.bag.push(<span class="hljs-string">&#x27;一次性缩小药水&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入背包`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;还原药水（1exp）（一次性，将角色大小还原&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">1</span>){
                    entity.exp-=<span class="hljs-number">1</span>;
                    entity.bag.push(<span class="hljs-string">&#x27;一次性还原药水&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入背包`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;放大药水（70exp）（一次性，将角色大小增大50%，不可叠加使用）&#x27;</span>){
                <span class="hljs-keyword">if</span>(entity.exp&gt;=<span class="hljs-number">70</span>){
                    entity.exp-=<span class="hljs-number">70</span>;
                    entity.bag.push(<span class="hljs-string">&#x27;一次性放大药水&#x27;</span>)
                    savePlayer(entity);
                    entity.player.directMessage(<span class="hljs-string">`购买成功，已放入背包`</span>)
                }
                <span class="hljs-keyword">else</span>{
                    dialog(<span class="hljs-string">`错误`</span>,<span class="hljs-string">`经验不够！`</span>,entity)
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;背包&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;你要使用啥？&#x27;</span>,
                <span class="hljs-attr">content</span>:<span class="hljs-string">`你要使用啥？\n警告：点击后立即使用无确认\n退出请点X`</span>,
                <span class="hljs-attr">options</span>:entity.bag
            });
            <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                <span class="hljs-keyword">return</span>; 
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性飞行特权&#x27;</span>){
                entity.player.canFly=<span class="hljs-literal">true</span>;
                <span class="hljs-keyword">let</span> index = entity.bag.indexOf(<span class="hljs-string">&#x27;一次性飞行特权&#x27;</span>);
                <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
                    entity.bag.splice(index, <span class="hljs-number">1</span>);
                }
                savePlayer(entity)
                entity.player.canFly=<span class="hljs-literal">true</span>;
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功，2s后降落&#x27;</span>);
                <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">2000</span>);
                entity.player.canFly=<span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性飞行变速器&#x27;</span>){
                <span class="hljs-keyword">let</span> index = entity.bag.indexOf(<span class="hljs-string">&#x27;一次性飞行变速器&#x27;</span>);
                <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
                    entity.bag.splice(index, <span class="hljs-number">1</span>);
                }
                <span class="hljs-keyword">const</span> flyspeed = <span class="hljs-keyword">await</span> entity.player.dialog({
                    <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                    <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;自定义飞行速度&#x27;</span>,
                    <span class="hljs-attr">content</span>: <span class="hljs-string">`输入飞行速度，不要试探服务器极限`</span>,
                    <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                });
                entity.player.flySpeed=flyspeed
                savePlayer(entity)
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功&#x27;</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性缩小药水&#x27;</span>){
                <span class="hljs-keyword">let</span> index = entity.bag.indexOf(<span class="hljs-string">&#x27;一次性缩小药水&#x27;</span>);
                <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
                    entity.bag.splice(index, <span class="hljs-number">1</span>);
                }
                entity.player.scale=<span class="hljs-number">0.5</span>
                savePlayer(entity)
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功&#x27;</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性还原药水&#x27;</span>){
                <span class="hljs-keyword">let</span> index = entity.bag.indexOf(<span class="hljs-string">&#x27;一次性还原药水&#x27;</span>);
                <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
                    entity.bag.splice(index, <span class="hljs-number">1</span>);
                }
                entity.player.scale=<span class="hljs-number">1</span>
                savePlayer(entity)
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功&#x27;</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;一次性放大药水&#x27;</span>){
                <span class="hljs-keyword">let</span> index = entity.bag.indexOf(<span class="hljs-string">&#x27;一次性放大药水&#x27;</span>);
                <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
                    entity.bag.splice(index, <span class="hljs-number">1</span>);
                }
                entity.player.scale=<span class="hljs-number">1.5</span>
                savePlayer(entity)
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功&#x27;</span>)
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;无限飞行羽翼&#x27;</span>){
                entity.player.canFly=<span class="hljs-literal">true</span>;
                entity.player.directMessage(<span class="hljs-string">&#x27;使用成功&#x27;</span>)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;重来&#x27;</span>){
            <span class="hljs-keyword">if</span>(entity.canplay==<span class="hljs-literal">false</span>){
                dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`你在封禁中，不能出来`</span>,entity)
            }
            <span class="hljs-keyword">else</span>{
                entity.player.spectator=<span class="hljs-literal">false</span>;
                entity.player.directMessage(<span class="hljs-string">`重来`</span>)
                entity.victory = <span class="hljs-literal">false</span>
                entity.player.canFly=<span class="hljs-literal">false</span>
                entity.hp=<span class="hljs-number">100</span>
                entity.player.color = <span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
                entity.position.set(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>)
                entity.ingjf=<span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;脱离卡点&#x27;</span>){
            <span class="hljs-keyword">if</span>(entity.canplay==<span class="hljs-literal">false</span>){
                dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`你在封禁中，不能出来`</span>,entity)
            }
            <span class="hljs-keyword">else</span>{
                entity.player.forceRespawn()
                entity.ingjf=<span class="hljs-literal">false</span>;
                entity.player.directMessage(<span class="hljs-string">&#x27;脱离成功！&#x27;</span>)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;进入/离开挂机房&#x27;</span>){
            <span class="hljs-keyword">if</span>(entity.canplay==<span class="hljs-literal">false</span>){
                dialog(<span class="hljs-string">`系统`</span>,<span class="hljs-string">`你在封禁中，不能出来`</span>,entity)
            }
            <span class="hljs-keyword">else</span>{
                <span class="hljs-keyword">if</span>(entity.ingjf==<span class="hljs-literal">true</span>){
                    entity.player.forceRespawn();
                    entity.ingjf=<span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">else</span>{
                    entity.position.set(<span class="hljs-number">97</span>,<span class="hljs-number">6</span>,<span class="hljs-number">74</span>);
                    entity.ingjf=<span class="hljs-literal">true</span>;
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;进入/退出俯视全图&#x27;</span>){
            <span class="hljs-keyword">if</span>(entity.fsqting==<span class="hljs-literal">false</span>){
                <span class="hljs-keyword">const</span> fsqt = world.querySelector(<span class="hljs-string">&#x27;#俯视全图&#x27;</span>)
                entity.player.cameraEntity=fsqt
                entity.player.directMessage(<span class="hljs-string">&#x27;正在俯视全图，再次点击按钮可退出&#x27;</span>)
                entity.fsqting=<span class="hljs-literal">true</span>
            }
            <span class="hljs-keyword">else</span>{
                entity.player.cameraEntity=entity
                entity.fsqting=<span class="hljs-literal">false</span>
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;切换人称&#x27;</span>){
            <span class="hljs-keyword">if</span> (entity.player.cameraMode === GameCameraMode.FOLLOW) {
                entity.player.cameraMode = GameCameraMode.FPS
                entity.player.directMessage(<span class="hljs-string">`切换成功`</span>)
            }
            <span class="hljs-keyword">else</span> {
                entity.player.cameraMode = GameCameraMode.FOLLOW
                entity.player.directMessage(<span class="hljs-string">`切换成功`</span>)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;bug反馈&#x27;</span>){
            dialog(<span class="hljs-string">`作者`</span>,<span class="hljs-string">`反馈问题请发在评论区，也可以发作者邮箱oyroyroyr@163.com，如果采纳会赠送地图绿色粒子特效`</span>,entity)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;禁言玩家说话&#x27;</span>){
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;禁言玩家说话&#x27;</span>,
                <span class="hljs-attr">content</span>: <span class="hljs-string">`你想要说啥`</span>,
                <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;“警告！非禁言玩家尽量不要使用！”&#x27;</span>,
            });
            <span class="hljs-keyword">if</span>(!result || result === <span class="hljs-literal">null</span>){
                <span class="hljs-keyword">return</span>; 
            }
            <span class="hljs-keyword">else</span> {
                world.say(entity.player.name+<span class="hljs-string">&#x27;：&#x27;</span>+result)
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;管理员工具&#x27;</span>){
            <span class="hljs-keyword">if</span>(admin.includes(entity.player.name)||entity.adminlevel&gt;<span class="hljs-number">0</span>||adminpro.includes(entity.player.name)){
                <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                    <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                    <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;管理员工具&#x27;</span>,
                    <span class="hljs-attr">content</span>: <span class="hljs-string">`选择你需要使用的工具`</span>,
                    <span class="hljs-attr">options</span>:[<span class="hljs-string">&#x27;管理员命令文档&#x27;</span>,<span class="hljs-string">&#x27;飞行&#x27;</span>,<span class="hljs-string">&#x27;降落&#x27;</span>,<span class="hljs-string">&#x27;开启/关闭穿墙&#x27;</span>,<span class="hljs-string">&#x27;玩家传送器&#x27;</span>,<span class="hljs-string">&#x27;传送至某玩家&#x27;</span>,<span class="hljs-string">&#x27;集体传送附图！&#x27;</span>,<span class="hljs-string">&#x27;计时器&#x27;</span>,<span class="hljs-string">&#x27;广播公告&#x27;</span>,<span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>]
                });
                <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                    <span class="hljs-keyword">return</span>; 
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;管理员命令文档&#x27;</span>){
                    entity.player.link(<span class="hljs-string">`https://azkbbys.gitbook.io/azkbbys/docs/bysrunpro/bysrunpro-admin-code-tutorial`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">true</span>})
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;飞行&#x27;</span>){
                    entity.player.canFly=<span class="hljs-literal">true</span>
                    entity.player.directMessage(<span class="hljs-string">&#x27;您可以飞行了&#x27;</span>)
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;降落&#x27;</span>){
                    entity.player.canFly=<span class="hljs-literal">false</span>
                    entity.player.directMessage(<span class="hljs-string">&#x27;降落成功&#x27;</span>)
                    <span class="hljs-keyword">const</span> allWearables = entity.player.wearables();
                    <span class="hljs-comment">// allWearables.forEach((item) =&gt; {</span>
                    <span class="hljs-comment">//     item.remove();</span>
                    <span class="hljs-comment">// });</span>
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;开启/关闭穿墙&#x27;</span>){
                    <span class="hljs-keyword">if</span>(entity.player.spectator==<span class="hljs-literal">false</span>){
                        entity.player.spectator=<span class="hljs-literal">true</span>
                    }
                    <span class="hljs-keyword">else</span>{
                        entity.player.spectator=<span class="hljs-literal">false</span>
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;玩家传送器&#x27;</span>){
                    <span class="hljs-keyword">const</span> playernamelist = []
                    world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
                        <span class="hljs-keyword">if</span>(e.player.name!=entity.player.name)
                        playernamelist.push(e.player.name)
                    })
                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;传送至某玩家&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`你要传送谁到你的位置`</span>,
                        <span class="hljs-attr">options</span>:playernamelist
                    });
                    <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                        <span class="hljs-keyword">return</span>; 
                    }
                    <span class="hljs-keyword">else</span>{
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>)){;
                            <span class="hljs-keyword">if</span>(e.player.name==result.value){;
                                e.position.x=entity.position.x
                                e.position.y=entity.position.y
                                e.position.z=entity.position.z
                                entity.player.directMessage(<span class="hljs-string">&#x27;传送成功！&#x27;</span>)
                            };
                        };
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;传送至某玩家&#x27;</span>){
                    <span class="hljs-keyword">const</span> playernamelist = []
                    world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
                        <span class="hljs-keyword">if</span>(e.player.name!=entity.player.name)
                        playernamelist.push(e.player.name)
                    })
                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.SELECT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;传送至某玩家&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`你要传送你到谁的位置`</span>,
                        <span class="hljs-attr">options</span>:playernamelist
                    });
                    <span class="hljs-keyword">if</span>(!result || result.value === <span class="hljs-literal">null</span>){ 
                        <span class="hljs-keyword">return</span>; 
                    }
                    <span class="hljs-keyword">else</span>{
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>)){;
                            <span class="hljs-keyword">if</span>(e.player.name==result.value){;
                                entity.position.x=e.position.x
                                entity.position.y=e.position.y
                                entity.position.z=e.position.z
                                entity.player.directMessage(<span class="hljs-string">&#x27;传送成功！&#x27;</span>)
                            };
                        };
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;集体传送附图！&#x27;</span>){
                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;集体传送&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`请输入密码（找作者要）`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                    });
                    <span class="hljs-keyword">if</span>(!result || result === <span class="hljs-literal">null</span>){ 
                        <span class="hljs-keyword">return</span>; 
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result==<span class="hljs-string">&#x27;123456&#x27;</span>){
                        world.say(<span class="hljs-string">&#x27;管理员开启了集体传送，3s后全体传送至附图《春》&#x27;</span>)
                        <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">3000</span>)
                        world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
                            e.player.link(<span class="hljs-string">`https://dao3.fun/play/6d789dabd5e09ca687ce`</span>, {<span class="hljs-attr">isConfirm</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isNewTab</span>: <span class="hljs-literal">false</span>})
                        })
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;计时器&#x27;</span>){
                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;计时器&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`你想计时多久`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;“确定”&#x27;</span>,
                    });
                    <span class="hljs-built_in">console</span>.log(entity.count)
                    <span class="hljs-keyword">if</span>(entity.count=<span class="hljs-literal">true</span>){
                        <span class="hljs-keyword">let</span> s = <span class="hljs-number">0</span>
                        <span class="hljs-keyword">let</span> m = <span class="hljs-number">0</span>
                        <span class="hljs-keyword">let</span> h = <span class="hljs-number">0</span>
                        <span class="hljs-keyword">while</span>(entity.count==<span class="hljs-literal">true</span>){
                            s++
                            <span class="hljs-keyword">if</span>(s&gt;=<span class="hljs-number">60</span>){;m++;s=<span class="hljs-number">0</span>}
                            <span class="hljs-keyword">if</span>(m&gt;=<span class="hljs-number">60</span>){;h++;m=<span class="hljs-number">0</span>}
                            <span class="hljs-keyword">if</span>(h&gt;=<span class="hljs-number">3</span>){;entity.player.directMessage(<span class="hljs-string">&#x27;计时最多3小时&#x27;</span>);<span class="hljs-keyword">return</span>;}
                            entity.player.directMessage(h+<span class="hljs-string">&#x27;:&#x27;</span>+m+<span class="hljs-string">&#x27;:&#x27;</span>+s)
                            <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
                        }
                    }
                    <span class="hljs-keyword">else</span>{
                        entity.player.directMessage(<span class="hljs-string">&#x27;计时器关闭！&#x27;</span>)
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value==<span class="hljs-string">&#x27;广播公告&#x27;</span>){
                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;广播公告&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`输入广播内容`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认广播&#x27;</span>,
                    });
                    world.say(result)
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value=<span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>){
                    <span class="hljs-comment">// entity.player.directMessage(&#x27;因为重启服务器代码失效，现在禁用躲猫猫模式&#x27;)</span>
                    <span class="hljs-keyword">const</span> zbz = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`输入抓捕者`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                    });
                    zbznc = zbz;
                    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>){
                        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> entity.player.dialog({
                            <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>,
                            <span class="hljs-attr">content</span>: <span class="hljs-string">`输入躲藏者昵称，输入@以结束添加`</span>,
                            <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                        });
                        <span class="hljs-keyword">if</span>(result!=<span class="hljs-string">`@`</span>){
                            dcz.push(result);
                            entity.player.directMessage(<span class="hljs-string">`添加成功，<span class="hljs-subst">${result}</span>`</span>)
                            dmmrenshu+=<span class="hljs-number">1</span>;
                        }
                        <span class="hljs-keyword">else</span>{
                            <span class="hljs-keyword">break</span>;
                        }
                    }
                    <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`输入躲藏时间，单位秒，不可包含小数`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                    });
                    dctime = <span class="hljs-built_in">parseInt</span>(a)*<span class="hljs-number">16</span>
                    <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">await</span> entity.player.dialog({
                        <span class="hljs-attr">type</span>: GameDialogType.INPUT,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;躲猫猫模式&#x27;</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`输入抓捕时间，单位秒，不可包含小数`</span>,
                        <span class="hljs-attr">confirmText</span>: <span class="hljs-string">&#x27;确认&#x27;</span>,
                    });
                    zbtime = <span class="hljs-built_in">parseInt</span>(b)*<span class="hljs-number">16</span>;
                    <span class="hljs-keyword">if</span>(dmm==<span class="hljs-literal">false</span>){
                        dmm = <span class="hljs-literal">true</span>;
                        world.say(<span class="hljs-string">`管理员 <span class="hljs-subst">${entity.player.name}</span> 开启了躲猫猫模式`</span>)
                        dialog(<span class="hljs-string">`提示`</span>,<span class="hljs-string">`已开启躲猫猫模式`</span>,entity)
                    }
                    <span class="hljs-keyword">else</span>{
                        dialog(<span class="hljs-string">`提示`</span>,<span class="hljs-string">`错误：\n已经有另外一个管理员开启了躲猫猫模式`</span>,entity)
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(result.value=<span class="hljs-string">&#x27;穿戴配件&#x27;</span>){
                    chuandaipeijian(entity)
                }
            }
        }
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(button==<span class="hljs-string">&#x27;action3&#x27;</span>){
        entity.player.cameraEntity=entity
    }
})
<span class="hljs-comment">// 模型运动</span>
<span class="hljs-keyword">const</span> lotus_leaf = world.querySelector(<span class="hljs-string">&#x27;#荷叶-2&#x27;</span>) <span class="hljs-comment">//获取实体</span>
lotus_leaf.fixed = <span class="hljs-literal">true</span><span class="hljs-comment">//不受外力影响</span>
lotus_leaf.collides = <span class="hljs-literal">true</span><span class="hljs-comment">//允许碰撞</span>
<span class="hljs-keyword">const</span> startPos_lotus_leaf = [<span class="hljs-number">63.7</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">3.7</span>]<span class="hljs-comment">//初始位置</span>
<span class="hljs-keyword">const</span> endPos_lotus_leaf = [<span class="hljs-number">75</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">3.7</span>]

<span class="hljs-keyword">const</span> ani_lotus_leaf = lotus_leaf.animate([
    { <span class="hljs-attr">position</span>: startPos_lotus_leaf, <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">position</span>: startPos_lotus_leaf, <span class="hljs-attr">duration</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">position</span>: endPos_lotus_leaf, <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">position</span>: endPos_lotus_leaf, <span class="hljs-attr">duration</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">position</span>: startPos_lotus_leaf, <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span> },
], {
    <span class="hljs-attr">duration</span>: <span class="hljs-number">16</span> * <span class="hljs-number">4</span>, <span class="hljs-comment">//一个循环共用时</span>
    <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span>,<span class="hljs-comment">//只播放1次</span>
    <span class="hljs-attr">direction</span>: GameAnimationDirection.WRAP,<span class="hljs-comment">//让实体从终点回到起点</span>
})
world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>) =&gt;</span> {
    ani_lotus_leaf.play({
            <span class="hljs-attr">duration</span>: <span class="hljs-number">16</span> * <span class="hljs-number">4</span>, <span class="hljs-comment">//播放一个循环共用时20秒(每秒16帧),</span>
            <span class="hljs-attr">iterations</span>: <span class="hljs-literal">Infinity</span>,<span class="hljs-comment">//动画无限次循环播放</span>
            <span class="hljs-attr">direction</span>: GameAnimationDirection.WRAP,<span class="hljs-comment">//让动画实体从终点回到起点</span>
        })
})

<span class="hljs-comment">// gui</span>
<span class="hljs-comment">// const { GameEasyGUI } = require(&quot;./GameEasyGUI.js&quot;);          //导入GameEasyGUI.js</span>
<span class="hljs-comment">// world.onPlayerJoin(async ({ entity }) =&gt; {</span>
<span class="hljs-comment">//     var mygui = new GameEasyGUI(&quot;myGUI&quot;, entity);</span>
<span class="hljs-comment">//     entity.gui = mygui;           //创建一个gui对象</span>
<span class="hljs-comment">//     var dom = mygui.document;</span>
<span class="hljs-comment">//     var msg1 = dom.createXml(&quot;label&quot;, {</span>
<span class="hljs-comment">//         height: 20,</span>
<span class="hljs-comment">//         width: 200,</span>
<span class="hljs-comment">//         color: &quot;#fff&quot;,</span>
<span class="hljs-comment">//         fontSize: 18,</span>
<span class="hljs-comment">//         x: 10,</span>
<span class="hljs-comment">//         y: 70,</span>
<span class="hljs-comment">//         id:&quot;msg1&quot;</span>
<span class="hljs-comment">//     });</span>
<span class="hljs-comment">//     var group = dom.createXml(&quot;group&quot;, {</span>
<span class="hljs-comment">//         width: 240,</span>
<span class="hljs-comment">//         height: 160,</span>
<span class="hljs-comment">//         borderColor: &quot;rgba(0,0,0,0)&quot;,</span>
<span class="hljs-comment">//         backgroundColor: &quot;rgba(0,0,0,0.45)&quot;,</span>
<span class="hljs-comment">//         right:20,</span>
<span class="hljs-comment">//         top:50</span>
<span class="hljs-comment">//     }).appendChild(dom.createXml(&quot;label&quot;, {</span>
<span class="hljs-comment">//         height: 20,</span>
<span class="hljs-comment">//         width: 100,</span>
<span class="hljs-comment">//         color: &quot;#fff&quot;,</span>
<span class="hljs-comment">//         fontSize: 20,</span>
<span class="hljs-comment">//         x: 10,</span>
<span class="hljs-comment">//         y: 10,</span>
<span class="hljs-comment">//         text: &quot;聊天消息&quot;</span>
<span class="hljs-comment">//     })).appendChild(msg1);         //将创建好的元素插入group中   </span>
<span class="hljs-comment">//     dom.appendChild(group);                                  //将元素插入document中</span>
<span class="hljs-comment">//     mygui.render();                                            //渲染gui</span>
<span class="hljs-comment">//     var button = dom.createXml(&quot;button&quot;,{</span>
<span class="hljs-comment">//         text:&quot;戳我发消息（防禁言）&quot;,</span>
<span class="hljs-comment">//         x:10,</span>
<span class="hljs-comment">//         y:120,</span>
<span class="hljs-comment">//         percentWidth:90,</span>
<span class="hljs-comment">//         height:30,</span>
<span class="hljs-comment">//         color:&quot;#fa0&quot;</span>
<span class="hljs-comment">//     });</span>
<span class="hljs-comment">//     button.addEventListener(&quot;click&quot;,async function({entity}){</span>
<span class="hljs-comment">//         const result = await entity.player.dialog({</span>
<span class="hljs-comment">//             type: GameDialogType.INPUT,</span>
<span class="hljs-comment">//             title: &#x27;发言&#x27;,</span>
<span class="hljs-comment">//             content: `你想要说啥`,</span>
<span class="hljs-comment">//             confirmText: &#x27;确定发送，反悔请点X&#x27;,</span>
<span class="hljs-comment">//         });</span>
<span class="hljs-comment">//         if(!result || result === null){</span>
<span class="hljs-comment">//             return; </span>
<span class="hljs-comment">//         }</span>
<span class="hljs-comment">//         else {</span>
<span class="hljs-comment">//             world.say(entity.player.name+&#x27;：&#x27;+result)</span>
<span class="hljs-comment">//             msglist[0]=entity.player.name+&#x27;：&#x27;+result</span>
<span class="hljs-comment">//         }</span>
<span class="hljs-comment">//     })</span>
<span class="hljs-comment">//     group.appendChild(button);</span>
<span class="hljs-comment">//     mygui.reload();                             //刷新</span>
<span class="hljs-comment">// });</span>
<span class="hljs-comment">// //循环显示信息</span>
<span class="hljs-comment">// world.onTick(()=&gt;{</span>
<span class="hljs-comment">//     world.querySelectorAll(&#x27;player&#x27;).forEach((e)=&gt;{</span>
<span class="hljs-comment">//         if(e.gui){</span>
<span class="hljs-comment">//             let dom = e.gui.document;</span>
<span class="hljs-comment">//             let msg1 = dom.getElementById(&quot;msg1&quot;);</span>
<span class="hljs-comment">//             msg1.setAttribute(&quot;text&quot;,msglist[0]);</span>
<span class="hljs-comment">//         }</span>
<span class="hljs-comment">//     })</span>
<span class="hljs-comment">// })</span>

world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    world.onTick(<span class="hljs-function">(<span class="hljs-params">{tick}</span>)=&gt;</span>{
        <span class="hljs-keyword">if</span>(dmm==<span class="hljs-literal">true</span>&amp;&amp;entity.dmmshoudao==<span class="hljs-literal">false</span>){
            <span class="hljs-keyword">if</span>(zbznc==entity.player.name){
                entity.player.directMessage(<span class="hljs-string">`你是抓捕者`</span>);
                entity.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
                entity.dmmzy=<span class="hljs-string">&#x27;抓捕&#x27;</span>;
                dialog(<span class="hljs-string">`操作说明`</span>,<span class="hljs-string">`碰到躲藏者（黑色的人）即可抓获`</span>,entity)
                entity.dmmshoudao=<span class="hljs-literal">true</span>;
                entity.position.set(<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">10</span>);
                entity.player.canFly=<span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(dcz.includes(entity.player.name)){
                entity.player.directMessage(<span class="hljs-string">`你是躲藏者，快开始躲藏吧！`</span>);
                entity.dmmzy=<span class="hljs-string">&#x27;躲藏&#x27;</span>;
                dialog(<span class="hljs-string">`操作说明`</span>,<span class="hljs-string">`不要被红色昵称的抓捕者碰到！`</span>,entity)
                entity.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
                entity.dmmshoudao=<span class="hljs-literal">true</span>;
                entity.player.canFly=<span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">if</span>(dmm==<span class="hljs-literal">true</span>){
            <span class="hljs-keyword">if</span>(dctime==<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(dctime==<span class="hljs-number">0</span>&amp;&amp;entity.dmmzy==<span class="hljs-string">&#x27;抓捕&#x27;</span>){
                    entity.player.forceRespawn()
                    <span class="hljs-comment">// dctime-=16;</span>
                }
            }
        }
    })
})

world.onTick(<span class="hljs-keyword">async</span>({tick})=&gt;{
    <span class="hljs-keyword">if</span>(dmm==<span class="hljs-literal">true</span>){
        <span class="hljs-keyword">if</span>(dctime&gt;=<span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span>(tick%<span class="hljs-number">16</span>==<span class="hljs-number">0</span>){
                dctime-=<span class="hljs-number">16</span>;
                world.say(<span class="hljs-string">`躲猫猫-躲藏时间还剩<span class="hljs-subst">${dctime/<span class="hljs-number">16</span>}</span>秒`</span>)
                world.clearCollisionFilters()
                <span class="hljs-comment">// entity.dmmshoudao=true</span>
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(zbtime!=<span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span>(tick%<span class="hljs-number">16</span>==<span class="hljs-number">0</span>){
                zbtime-=<span class="hljs-number">16</span>;
                world.say(<span class="hljs-string">`躲猫猫-抓捕时间还剩<span class="hljs-subst">${zbtime/<span class="hljs-number">16</span>}</span>秒`</span>)
            }
        }
        <span class="hljs-keyword">else</span>{
            dmm=<span class="hljs-literal">false</span>;
            world.say(<span class="hljs-string">`躲猫猫结束，如3s后服务器未自行重启，请管理员输入\$while(1){} 进行重启`</span>)
            <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">3000</span>)
            <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>){}
        }
    }
})

world.onEntityContact(<span class="hljs-function">(<span class="hljs-params">{entity,other}</span>)=&gt;</span>{
    <span class="hljs-keyword">if</span>(entity.dmmzy==<span class="hljs-string">&#x27;抓捕&#x27;</span>){
        <span class="hljs-keyword">if</span>(other.dmmzy==<span class="hljs-string">&#x27;躲藏&#x27;</span>&amp;&amp;beizhuadao.includes(entity.player.name)==<span class="hljs-literal">false</span>){
            beizhuadao.push(other.player.name);
            world.say(<span class="hljs-string">`抓捕者抓到了<span class="hljs-subst">${other.player.name}</span>`</span>)
            entity.player.directMessage(<span class="hljs-string">`恭喜抓到人了！经验+10`</span>);
            entity.exp+=<span class="hljs-number">10</span>;
            savePlayer(entity)
            other.player.directMessage(<span class="hljs-string">`被抓到了了！经验+5`</span>);
            other.exp+=<span class="hljs-number">5</span>;
            savePlayer(other)
            other.player.color=<span class="hljs-keyword">new</span> GameRGBColor(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);
        }
    }
})

<span class="hljs-comment">//挂机检测</span>
<span class="hljs-comment">// world.onPlayerJoin(({entity})=&gt;{</span>
<span class="hljs-comment">//     entity.xcundang= 0</span>
<span class="hljs-comment">//     entity.ycundang= 0</span>
<span class="hljs-comment">//     entity.zcundang= 0</span>
<span class="hljs-comment">//     entity.i=0</span>
<span class="hljs-comment">//     world.onTick(async({tick})=&gt;{</span>
<span class="hljs-comment">//         if(tick%16==0){</span>
<span class="hljs-comment">//             if(entity.xcundang==entity.position.x&amp;&amp;entity.ycundang==entity.position.y&amp;&amp;entity.zcundang==entity.position.z){</span>
<span class="hljs-comment">//                 entity.i+=1</span>
<span class="hljs-comment">//                 console.log(&#x27;挂机&#x27;,entity.i)</span>
<span class="hljs-comment">//             }</span>
<span class="hljs-comment">//             else{</span>
<span class="hljs-comment">//                 entity.i=0</span>
<span class="hljs-comment">//                 entity.xcundang=entity.position.x</span>
<span class="hljs-comment">//                 entity.ycundang=entity.position.y</span>
<span class="hljs-comment">//                 entity.zcundang=entity.position.z</span>
<span class="hljs-comment">//             }</span>
<span class="hljs-comment">//             if(entity.i==130&amp;&amp;entity.cankick==true){</span>
<span class="hljs-comment">//                 entity.player.cancelDialogs()</span>
<span class="hljs-comment">//                 dialog(&#x27;系统&#x27;,&#x27;你已在当前位置停留了5min，若继续停留，10s后将踢出游戏！\n挂机会导致服务器变卡，甚至崩服，为了服务器的健康，现在禁止挂机&#x27;,entity)</span>
<span class="hljs-comment">//             }</span>
<span class="hljs-comment">//             else if(entity.i&gt;=140&amp;&amp;entity.cankick==true){</span>
<span class="hljs-comment">//                 entity.i=0</span>
<span class="hljs-comment">//                 entity.player.kick()</span>
<span class="hljs-comment">//             }</span>
<span class="hljs-comment">//         }</span>
<span class="hljs-comment">//     })</span>
<span class="hljs-comment">// })</span>
world.onTick(<span class="hljs-function">(<span class="hljs-params">{tick}</span>)=&gt;</span>{
    <span class="hljs-keyword">if</span>(tick%<span class="hljs-number">960</span>==<span class="hljs-number">0</span>){
        <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.now());
        <span class="hljs-keyword">const</span> minute = date.getMinutes()
        <span class="hljs-keyword">if</span>(minute==<span class="hljs-number">0</span>){
            world.say(<span class="hljs-string">&#x27;整点福利：全体玩家经验+10&#x27;</span>)
            world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
                e.exp+=<span class="hljs-number">10</span>
                savePlayer(e)
            })
        }
    }
})

<span class="hljs-comment">// 服务端、客户端信息交流/gameUi控制</span>
world.onTick(<span class="hljs-function">(<span class="hljs-params">{tick}</span>)=&gt;</span>{
    remoteChannel.sendClientEvent(world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>), {
        <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;世界信息&#x27;</span>,
        <span class="hljs-attr">args</span>:{
            <span class="hljs-attr">message</span>: msglist[<span class="hljs-number">0</span>]
        }
    })
    world.querySelectorAll(<span class="hljs-string">&#x27;player&#x27;</span>).forEach(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
        remoteChannel.sendClientEvent(e, {
            <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;玩家信息1&#x27;</span>,
            <span class="hljs-attr">args</span>:{
                <span class="hljs-attr">avatar</span>:e.player.avatar,
                <span class="hljs-attr">name</span>:e.player.name,
                <span class="hljs-attr">player_title</span>:e.player_title
            }
        })
        remoteChannel.sendClientEvent(e, {
            <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;玩家信息2&#x27;</span>,
            <span class="hljs-attr">args</span>:{
                <span class="hljs-attr">wintimes</span>: e.wintimes,
                <span class="hljs-attr">exp</span>: e.exp,
                <span class="hljs-attr">x</span>: e.position.x,
                <span class="hljs-attr">y</span>: e.position.y,
                <span class="hljs-attr">z</span>: e.position.z
            }
        })
    }) 
})
</div></code></pre>
<h3 id="%E5%AE%A0%E7%89%A9.js" tabindex="-1">宠物.js</h3>
<pre class='hljs'><code><div><span class="hljs-built_in">console</span>.clear()
<span class="hljs-keyword">const</span> mscale = <span class="hljs-number">1</span> / <span class="hljs-number">16</span>
<span class="hljs-keyword">const</span> Quat = <span class="hljs-keyword">new</span> GameQuaternion(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buddyFollow</span>(<span class="hljs-params">entity, mesh, y</span>) </span>{
    <span class="hljs-keyword">const</span> buddy = world.createEntity({
        mesh,
        <span class="hljs-attr">position</span>: entity.position,
        <span class="hljs-attr">meshScale</span>: [mscale, mscale, mscale],
        <span class="hljs-attr">gravity</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//不受重力影响</span>
        <span class="hljs-attr">fixed</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//可推移</span>
        <span class="hljs-attr">collides</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//不可碰撞</span>
        <span class="hljs-attr">friction</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//无摩擦力</span>
        <span class="hljs-attr">mass</span>: <span class="hljs-number">0.01</span>, <span class="hljs-comment">//非常轻</span>
    })

    <span class="hljs-keyword">const</span> tgPos = entity.position
    <span class="hljs-keyword">const</span> budPos = buddy.position
    <span class="hljs-keyword">const</span> facing = entity.player.facingDirection<span class="hljs-comment">//玩家的朝向</span>
    <span class="hljs-keyword">const</span> ratio = <span class="hljs-number">0.1</span><span class="hljs-comment">//追随的灵敏度, 最好设在0.5左右, 1.0表示立即移到玩家位置</span>

    <span class="hljs-keyword">const</span> dist = <span class="hljs-number">2</span> <span class="hljs-comment">//与玩家保持的距离</span>
    <span class="hljs-keyword">const</span> yOffset = y <span class="hljs-comment">//y轴位移, 保持僚机在头顶或脚下</span>

    <span class="hljs-keyword">const</span> ticker = world.onTick(<span class="hljs-function">() =&gt;</span> {

        <span class="hljs-comment">//要让小精灵跟在玩家背后, 需要计算xz轴的位移: 玩家朝向的反方向</span>
        <span class="hljs-keyword">const</span> xOffset = -facing.x * dist
        <span class="hljs-keyword">const</span> zOffset = -facing.z * dist

        <span class="hljs-comment">//当前位置与目标位置在xyz轴的差距</span>
        <span class="hljs-keyword">const</span> xDiff = tgPos.x - budPos.x
        <span class="hljs-keyword">const</span> yDiff = tgPos.y - budPos.y
        <span class="hljs-keyword">const</span> zDiff = tgPos.z - budPos.z

        <span class="hljs-comment">//计算xyz方向上 当前位置向目标位置靠拢的速度</span>
        <span class="hljs-keyword">const</span> vx = (xDiff + xOffset) * ratio
        <span class="hljs-keyword">const</span> vy = (yDiff + yOffset) * ratio
        <span class="hljs-keyword">const</span> vz = (zDiff + zOffset) * ratio

        buddy.velocity.set(vx, vy, vz)<span class="hljs-comment">//设置僚机速度</span>

        <span class="hljs-keyword">if</span> (buddy.velocity.sqrMag() &gt; <span class="hljs-number">0.005</span>) {<span class="hljs-comment">//速度要足够大, 才触发转向, 防止抖动</span>
            buddy.meshOrientation = Quat.rotateY(<span class="hljs-built_in">Math</span>.atan2(zDiff, xDiff)) <span class="hljs-comment">//让小精灵一直面向玩家</span>
        }
    })

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        ticker.cancel() <span class="hljs-comment">//关掉tick循环</span>
        buddy.destroy() <span class="hljs-comment">//移除实体</span>
    }
}

world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{ entity }</span>) =&gt;</span> {
    entity.setPet = buddyFollow(entity, <span class="hljs-string">&#x27;mesh/皮卡丘.vb&#x27;</span>, -<span class="hljs-number">1</span>) <span class="hljs-comment">//给玩家增加宠物</span>
})

world.onPlayerLeave(<span class="hljs-function">(<span class="hljs-params">{ entity }</span>) =&gt;</span> {
    <span class="hljs-comment">//玩家离开地图时, 切记一定要关掉tick循环以及销毁小精灵实体, 否则随着人数增加, 服务器积累到一定程度就会崩溃</span>
    entity.setPet() <span class="hljs-comment">//干掉宠物</span>
})
</div></code></pre>
<h3 id="%E9%98%B2%E6%AD%A2%E6%83%B3%E4%B8%8D%E5%BC%80.js" tabindex="-1">防止想不开.js</h3>
<pre class='hljs'><code><div>world.onPlayerJoin(<span class="hljs-function">(<span class="hljs-params">{entity}</span>)=&gt;</span>{
    world.onTick(<span class="hljs-function">(<span class="hljs-params">{tick}</span>)=&gt;</span>{
        <span class="hljs-keyword">if</span>(entity.position.x&lt;<span class="hljs-number">0</span>){
            entity.velocity.x=<span class="hljs-number">1</span>;
            entity.player.directMessage(<span class="hljs-string">&#x27;别想不开啊，跳虚空干啥？&#x27;</span>)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.position.x&gt;<span class="hljs-number">127</span>){
            entity.velocity.x=-<span class="hljs-number">1</span>;
            entity.player.directMessage(<span class="hljs-string">&#x27;别想不开啊，跳虚空干啥？&#x27;</span>)
        }
        <span class="hljs-keyword">if</span>(entity.position.z&lt;<span class="hljs-number">0</span>){
            entity.velocity.z=<span class="hljs-number">1</span>;
            entity.player.directMessage(<span class="hljs-string">&#x27;别想不开啊，跳虚空干啥？&#x27;</span>)
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(entity.position.z&gt;<span class="hljs-number">127</span>){
            entity.velocity.z=-<span class="hljs-number">1</span>;
            entity.player.directMessage(<span class="hljs-string">&#x27;别想不开啊，跳虚空干啥？&#x27;</span>)
        }
    })
})
</div></code></pre>

    </div>
</body>
</html>
